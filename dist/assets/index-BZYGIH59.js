(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Dd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o0={exports:{}},Na={},l0={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=Symbol.for("react.element"),$v=Symbol.for("react.portal"),_v=Symbol.for("react.fragment"),Hv=Symbol.for("react.strict_mode"),Vv=Symbol.for("react.profiler"),Wv=Symbol.for("react.provider"),Uv=Symbol.for("react.context"),Kv=Symbol.for("react.forward_ref"),qv=Symbol.for("react.suspense"),Jv=Symbol.for("react.memo"),Gv=Symbol.for("react.lazy"),yh=Symbol.iterator;function Yv(t){return t===null||typeof t!="object"?null:(t=yh&&t[yh]||t["@@iterator"],typeof t=="function"?t:null)}var a0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c0=Object.assign,u0={};function Ri(t,e,n){this.props=t,this.context=e,this.refs=u0,this.updater=n||a0}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d0(){}d0.prototype=Ri.prototype;function Pd(t,e,n){this.props=t,this.context=e,this.refs=u0,this.updater=n||a0}var Rd=Pd.prototype=new d0;Rd.constructor=Pd;c0(Rd,Ri.prototype);Rd.isPureReactComponent=!0;var vh=Array.isArray,f0=Object.prototype.hasOwnProperty,Id={current:null},h0={key:!0,ref:!0,__self:!0,__source:!0};function p0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)f0.call(e,r)&&!h0.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ys,type:t,key:s,ref:o,props:i,_owner:Id.current}}function Qv(t,e){return{$$typeof:Ys,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ld(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ys}function Xv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xh=/\/+/g;function oc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xv(""+t.key):e.toString(36)}function $o(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ys:case $v:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+oc(o,0):r,vh(i)?(n="",t!=null&&(n=t.replace(xh,"$&/")+"/"),$o(i,e,n,"",function(c){return c})):i!=null&&(Ld(i)&&(i=Qv(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xh,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vh(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+oc(s,l);o+=$o(s,e,n,a,i)}else if(a=Yv(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+oc(s,l++),o+=$o(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ao(t,e,n){if(t==null)return t;var r=[],i=0;return $o(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Zv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nt={current:null},_o={transition:null},ex={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:_o,ReactCurrentOwner:Id};function m0(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:ao,forEach:function(t,e,n){ao(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ao(t,function(){e++}),e},toArray:function(t){return ao(t,function(e){return e})||[]},only:function(t){if(!Ld(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=Ri;G.Fragment=_v;G.Profiler=Vv;G.PureComponent=Pd;G.StrictMode=Hv;G.Suspense=qv;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ex;G.act=m0;G.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=c0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Id.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)f0.call(e,a)&&!h0.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ys,type:t.type,key:i,ref:s,props:r,_owner:o}};G.createContext=function(t){return t={$$typeof:Uv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Wv,_context:t},t.Consumer=t};G.createElement=p0;G.createFactory=function(t){var e=p0.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:Kv,render:t}};G.isValidElement=Ld;G.lazy=function(t){return{$$typeof:Gv,_payload:{_status:-1,_result:t},_init:Zv}};G.memo=function(t,e){return{$$typeof:Jv,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=_o.transition;_o.transition={};try{t()}finally{_o.transition=e}};G.unstable_act=m0;G.useCallback=function(t,e){return nt.current.useCallback(t,e)};G.useContext=function(t){return nt.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return nt.current.useDeferredValue(t)};G.useEffect=function(t,e){return nt.current.useEffect(t,e)};G.useId=function(){return nt.current.useId()};G.useImperativeHandle=function(t,e,n){return nt.current.useImperativeHandle(t,e,n)};G.useInsertionEffect=function(t,e){return nt.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return nt.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return nt.current.useMemo(t,e)};G.useReducer=function(t,e,n){return nt.current.useReducer(t,e,n)};G.useRef=function(t){return nt.current.useRef(t)};G.useState=function(t){return nt.current.useState(t)};G.useSyncExternalStore=function(t,e,n){return nt.current.useSyncExternalStore(t,e,n)};G.useTransition=function(){return nt.current.useTransition()};G.version="18.3.1";l0.exports=G;var j=l0.exports;const C=Dd(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx=j,nx=Symbol.for("react.element"),rx=Symbol.for("react.fragment"),ix=Object.prototype.hasOwnProperty,sx=tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ox={key:!0,ref:!0,__self:!0,__source:!0};function g0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ix.call(e,r)&&!ox.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:nx,type:t,key:s,ref:o,props:i,_owner:sx.current}}Na.Fragment=rx;Na.jsx=g0;Na.jsxs=g0;o0.exports=Na;var h=o0.exports,y0={exports:{}},vt={},v0={exports:{}},x0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,A){var B=D.length;D.push(A);e:for(;0<B;){var ie=B-1>>>1,$=D[ie];if(0<i($,A))D[ie]=A,D[B]=$,B=ie;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var A=D[0],B=D.pop();if(B!==A){D[0]=B;e:for(var ie=0,$=D.length,Y=$>>>1;ie<Y;){var X=2*(ie+1)-1,Ne=D[X],Ge=X+1,ae=D[Ge];if(0>i(Ne,B))Ge<$&&0>i(ae,Ne)?(D[ie]=ae,D[Ge]=B,ie=Ge):(D[ie]=Ne,D[X]=B,ie=X);else if(Ge<$&&0>i(ae,B))D[ie]=ae,D[Ge]=B,ie=Ge;else break e}}return A}function i(D,A){var B=D.sortIndex-A.sortIndex;return B!==0?B:D.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,d=null,f=3,p=!1,m=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var A=n(c);A!==null;){if(A.callback===null)r(c);else if(A.startTime<=D)r(c),A.sortIndex=A.expirationTime,e(a,A);else break;A=n(c)}}function k(D){if(v=!1,w(D),!m)if(n(a)!==null)m=!0,_e(S);else{var A=n(c);A!==null&&ve(k,A.startTime-D)}}function S(D,A){m=!1,v&&(v=!1,y(T),T=-1),p=!0;var B=f;try{for(w(A),d=n(a);d!==null&&(!(d.expirationTime>A)||D&&!ee());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,f=d.priorityLevel;var $=ie(d.expirationTime<=A);A=t.unstable_now(),typeof $=="function"?d.callback=$:d===n(a)&&r(a),w(A)}else r(a);d=n(a)}if(d!==null)var Y=!0;else{var X=n(c);X!==null&&ve(k,X.startTime-A),Y=!1}return Y}finally{d=null,f=B,p=!1}}var b=!1,E=null,T=-1,I=5,z=-1;function ee(){return!(t.unstable_now()-z<I)}function K(){if(E!==null){var D=t.unstable_now();z=D;var A=!0;try{A=E(!0,D)}finally{A?le():(b=!1,E=null)}}else b=!1}var le;if(typeof g=="function")le=function(){g(K)};else if(typeof MessageChannel<"u"){var kt=new MessageChannel,ln=kt.port2;kt.port1.onmessage=K,le=function(){ln.postMessage(null)}}else le=function(){x(K,0)};function _e(D){E=D,b||(b=!0,le())}function ve(D,A){T=x(function(){D(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,_e(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var A=3;break;default:A=f}var B=f;f=A;try{return D()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,A){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var B=f;f=D;try{return A()}finally{f=B}},t.unstable_scheduleCallback=function(D,A,B){var ie=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ie+B:ie):B=ie,D){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=B+$,D={id:u++,callback:A,priorityLevel:D,startTime:B,expirationTime:$,sortIndex:-1},B>ie?(D.sortIndex=B,e(c,D),n(a)===null&&D===n(c)&&(v?(y(T),T=-1):v=!0,ve(k,B-ie))):(D.sortIndex=$,e(a,D),m||p||(m=!0,_e(S))),D},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(D){var A=f;return function(){var B=f;f=A;try{return D.apply(this,arguments)}finally{f=B}}}})(x0);v0.exports=x0;var lx=v0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax=j,yt=lx;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w0=new Set,bs={};function Br(t,e){wi(t,e),wi(t+"Capture",e)}function wi(t,e){for(bs[t]=e,t=0;t<e.length;t++)w0.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),au=Object.prototype.hasOwnProperty,cx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wh={},kh={};function ux(t){return au.call(kh,t)?!0:au.call(wh,t)?!1:cx.test(t)?kh[t]=!0:(wh[t]=!0,!1)}function dx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fx(t,e,n,r){if(e===null||typeof e>"u"||dx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Be[t]=new rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Be[e]=new rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Be[t]=new rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Be[t]=new rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Be[t]=new rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Be[t]=new rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Be[t]=new rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Be[t]=new rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Be[t]=new rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var zd=/[\-:]([a-z])/g;function Bd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zd,Bd);Be[e]=new rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zd,Bd);Be[e]=new rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zd,Bd);Be[e]=new rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Be[t]=new rt(t,1,!1,t.toLowerCase(),null,!1,!1)});Be.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Be[t]=new rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fd(t,e,n,r){var i=Be.hasOwnProperty(e)?Be[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fx(e,n,i,r)&&(n=null),r||i===null?ux(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bn=ax.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,co=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),$d=Symbol.for("react.strict_mode"),cu=Symbol.for("react.profiler"),k0=Symbol.for("react.provider"),b0=Symbol.for("react.context"),_d=Symbol.for("react.forward_ref"),uu=Symbol.for("react.suspense"),du=Symbol.for("react.suspense_list"),Hd=Symbol.for("react.memo"),Mn=Symbol.for("react.lazy"),S0=Symbol.for("react.offscreen"),bh=Symbol.iterator;function _i(t){return t===null||typeof t!="object"?null:(t=bh&&t[bh]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Object.assign,lc;function Xi(t){if(lc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lc=e&&e[1]||""}return`
`+lc+t}var ac=!1;function cc(t,e){if(!t||ac)return"";ac=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{ac=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xi(t):""}function hx(t){switch(t.tag){case 5:return Xi(t.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 2:case 15:return t=cc(t.type,!1),t;case 11:return t=cc(t.type.render,!1),t;case 1:return t=cc(t.type,!0),t;default:return""}}function fu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qr:return"Fragment";case Yr:return"Portal";case cu:return"Profiler";case $d:return"StrictMode";case uu:return"Suspense";case du:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case b0:return(t.displayName||"Context")+".Consumer";case k0:return(t._context.displayName||"Context")+".Provider";case _d:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hd:return e=t.displayName||null,e!==null?e:fu(t.type)||"Memo";case Mn:e=t._payload,t=t._init;try{return fu(t(e))}catch{}}return null}function px(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fu(e);case 8:return e===$d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mx(t){var e=N0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uo(t){t._valueTracker||(t._valueTracker=mx(t))}function C0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=N0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hu(t,e){var n=e.checked;return pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sh(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E0(t,e){e=e.checked,e!=null&&Fd(t,"checked",e,!1)}function pu(t,e){E0(t,e);var n=Zn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mu(t,e.type,n):e.hasOwnProperty("defaultValue")&&mu(t,e.type,Zn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mu(t,e,n){(e!=="number"||ll(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zi=Array.isArray;function ui(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ch(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Zi(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zn(n)}}function M0(t,e){var n=Zn(e.value),r=Zn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Eh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function T0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?T0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fo,O0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fo=fo||document.createElement("div"),fo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ss(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gx=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(t){gx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ss[e]=ss[t]})});function j0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ss.hasOwnProperty(t)&&ss[t]?(""+e).trim():e+"px"}function A0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=j0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yx=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vu(t,e){if(e){if(yx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function xu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wu=null;function Vd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ku=null,di=null,fi=null;function Mh(t){if(t=Zs(t)){if(typeof ku!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Oa(e),ku(t.stateNode,t.type,e))}}function D0(t){di?fi?fi.push(t):fi=[t]:di=t}function P0(){if(di){var t=di,e=fi;if(fi=di=null,Mh(t),e)for(t=0;t<e.length;t++)Mh(e[t])}}function R0(t,e){return t(e)}function I0(){}var uc=!1;function L0(t,e,n){if(uc)return t(e,n);uc=!0;try{return R0(t,e,n)}finally{uc=!1,(di!==null||fi!==null)&&(I0(),P0())}}function Ns(t,e){var n=t.stateNode;if(n===null)return null;var r=Oa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var bu=!1;if(yn)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){bu=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{bu=!1}function vx(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ls=!1,al=null,cl=!1,Su=null,xx={onError:function(t){ls=!0,al=t}};function wx(t,e,n,r,i,s,o,l,a){ls=!1,al=null,vx.apply(xx,arguments)}function kx(t,e,n,r,i,s,o,l,a){if(wx.apply(this,arguments),ls){if(ls){var c=al;ls=!1,al=null}else throw Error(M(198));cl||(cl=!0,Su=c)}}function Fr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function z0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Th(t){if(Fr(t)!==t)throw Error(M(188))}function bx(t){var e=t.alternate;if(!e){if(e=Fr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Th(i),t;if(s===r)return Th(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function B0(t){return t=bx(t),t!==null?F0(t):null}function F0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=F0(t);if(e!==null)return e;t=t.sibling}return null}var $0=yt.unstable_scheduleCallback,Oh=yt.unstable_cancelCallback,Sx=yt.unstable_shouldYield,Nx=yt.unstable_requestPaint,ye=yt.unstable_now,Cx=yt.unstable_getCurrentPriorityLevel,Wd=yt.unstable_ImmediatePriority,_0=yt.unstable_UserBlockingPriority,ul=yt.unstable_NormalPriority,Ex=yt.unstable_LowPriority,H0=yt.unstable_IdlePriority,Ca=null,nn=null;function Mx(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Ca,t,void 0,(t.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:jx,Tx=Math.log,Ox=Math.LN2;function jx(t){return t>>>=0,t===0?32:31-(Tx(t)/Ox|0)|0}var ho=64,po=4194304;function es(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=es(l):(s&=o,s!==0&&(r=es(s)))}else o=n&~i,o!==0?r=es(o):s!==0&&(r=es(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ht(e),i=1<<n,r|=t[n],e&=~i;return r}function Ax(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ht(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Ax(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Nu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function V0(){var t=ho;return ho<<=1,!(ho&4194240)&&(ho=64),t}function dc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ht(e),t[e]=n}function Px(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ht(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ud(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ht(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Z=0;function W0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var U0,Kd,K0,q0,J0,Cu=!1,mo=[],_n=null,Hn=null,Vn=null,Cs=new Map,Es=new Map,Dn=[],Rx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jh(t,e){switch(t){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Cs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Es.delete(e.pointerId)}}function Vi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zs(e),e!==null&&Kd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ix(t,e,n,r,i){switch(e){case"focusin":return _n=Vi(_n,t,e,n,r,i),!0;case"dragenter":return Hn=Vi(Hn,t,e,n,r,i),!0;case"mouseover":return Vn=Vi(Vn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Cs.set(s,Vi(Cs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Es.set(s,Vi(Es.get(s)||null,t,e,n,r,i)),!0}return!1}function G0(t){var e=hr(t.target);if(e!==null){var n=Fr(e);if(n!==null){if(e=n.tag,e===13){if(e=z0(n),e!==null){t.blockedOn=e,J0(t.priority,function(){K0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ho(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Eu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wu=r,n.target.dispatchEvent(r),wu=null}else return e=Zs(n),e!==null&&Kd(e),t.blockedOn=n,!1;e.shift()}return!0}function Ah(t,e,n){Ho(t)&&n.delete(e)}function Lx(){Cu=!1,_n!==null&&Ho(_n)&&(_n=null),Hn!==null&&Ho(Hn)&&(Hn=null),Vn!==null&&Ho(Vn)&&(Vn=null),Cs.forEach(Ah),Es.forEach(Ah)}function Wi(t,e){t.blockedOn===e&&(t.blockedOn=null,Cu||(Cu=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,Lx)))}function Ms(t){function e(i){return Wi(i,t)}if(0<mo.length){Wi(mo[0],t);for(var n=1;n<mo.length;n++){var r=mo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_n!==null&&Wi(_n,t),Hn!==null&&Wi(Hn,t),Vn!==null&&Wi(Vn,t),Cs.forEach(e),Es.forEach(e),n=0;n<Dn.length;n++)r=Dn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dn.length&&(n=Dn[0],n.blockedOn===null);)G0(n),n.blockedOn===null&&Dn.shift()}var hi=bn.ReactCurrentBatchConfig,fl=!0;function zx(t,e,n,r){var i=Z,s=hi.transition;hi.transition=null;try{Z=1,qd(t,e,n,r)}finally{Z=i,hi.transition=s}}function Bx(t,e,n,r){var i=Z,s=hi.transition;hi.transition=null;try{Z=4,qd(t,e,n,r)}finally{Z=i,hi.transition=s}}function qd(t,e,n,r){if(fl){var i=Eu(t,e,n,r);if(i===null)kc(t,e,r,hl,n),jh(t,r);else if(Ix(i,t,e,n,r))r.stopPropagation();else if(jh(t,r),e&4&&-1<Rx.indexOf(t)){for(;i!==null;){var s=Zs(i);if(s!==null&&U0(s),s=Eu(t,e,n,r),s===null&&kc(t,e,r,hl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else kc(t,e,r,null,n)}}var hl=null;function Eu(t,e,n,r){if(hl=null,t=Vd(r),t=hr(t),t!==null)if(e=Fr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=z0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hl=t,null}function Y0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cx()){case Wd:return 1;case _0:return 4;case ul:case Ex:return 16;case H0:return 536870912;default:return 16}default:return 16}}var Ln=null,Jd=null,Vo=null;function Q0(){if(Vo)return Vo;var t,e=Jd,n=e.length,r,i="value"in Ln?Ln.value:Ln.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Vo=i.slice(t,1<r?1-r:void 0)}function Wo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function go(){return!0}function Dh(){return!1}function xt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?go:Dh,this.isPropagationStopped=Dh,this}return pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=go)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=go)},persist:function(){},isPersistent:go}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gd=xt(Ii),Xs=pe({},Ii,{view:0,detail:0}),Fx=xt(Xs),fc,hc,Ui,Ea=pe({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(fc=t.screenX-Ui.screenX,hc=t.screenY-Ui.screenY):hc=fc=0,Ui=t),fc)},movementY:function(t){return"movementY"in t?t.movementY:hc}}),Ph=xt(Ea),$x=pe({},Ea,{dataTransfer:0}),_x=xt($x),Hx=pe({},Xs,{relatedTarget:0}),pc=xt(Hx),Vx=pe({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),Wx=xt(Vx),Ux=pe({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kx=xt(Ux),qx=pe({},Ii,{data:0}),Rh=xt(qx),Jx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Yx[t])?!!e[t]:!1}function Yd(){return Qx}var Xx=pe({},Xs,{key:function(t){if(t.key){var e=Jx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(t){return t.type==="keypress"?Wo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zx=xt(Xx),ew=pe({},Ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ih=xt(ew),tw=pe({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),nw=xt(tw),rw=pe({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),iw=xt(rw),sw=pe({},Ea,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ow=xt(sw),lw=[9,13,27,32],Qd=yn&&"CompositionEvent"in window,as=null;yn&&"documentMode"in document&&(as=document.documentMode);var aw=yn&&"TextEvent"in window&&!as,X0=yn&&(!Qd||as&&8<as&&11>=as),Lh=" ",zh=!1;function Z0(t,e){switch(t){case"keyup":return lw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xr=!1;function cw(t,e){switch(t){case"compositionend":return eg(e);case"keypress":return e.which!==32?null:(zh=!0,Lh);case"textInput":return t=e.data,t===Lh&&zh?null:t;default:return null}}function uw(t,e){if(Xr)return t==="compositionend"||!Qd&&Z0(t,e)?(t=Q0(),Vo=Jd=Ln=null,Xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X0&&e.locale!=="ko"?null:e.data;default:return null}}var dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dw[t.type]:e==="textarea"}function tg(t,e,n,r){D0(r),e=pl(e,"onChange"),0<e.length&&(n=new Gd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cs=null,Ts=null;function fw(t){fg(t,0)}function Ma(t){var e=ti(t);if(C0(e))return t}function hw(t,e){if(t==="change")return e}var ng=!1;if(yn){var mc;if(yn){var gc="oninput"in document;if(!gc){var Fh=document.createElement("div");Fh.setAttribute("oninput","return;"),gc=typeof Fh.oninput=="function"}mc=gc}else mc=!1;ng=mc&&(!document.documentMode||9<document.documentMode)}function $h(){cs&&(cs.detachEvent("onpropertychange",rg),Ts=cs=null)}function rg(t){if(t.propertyName==="value"&&Ma(Ts)){var e=[];tg(e,Ts,t,Vd(t)),L0(fw,e)}}function pw(t,e,n){t==="focusin"?($h(),cs=e,Ts=n,cs.attachEvent("onpropertychange",rg)):t==="focusout"&&$h()}function mw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ma(Ts)}function gw(t,e){if(t==="click")return Ma(e)}function yw(t,e){if(t==="input"||t==="change")return Ma(e)}function vw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ut=typeof Object.is=="function"?Object.is:vw;function Os(t,e){if(Ut(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!au.call(e,i)||!Ut(t[i],e[i]))return!1}return!0}function _h(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hh(t,e){var n=_h(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_h(n)}}function ig(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ig(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sg(){for(var t=window,e=ll();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ll(t.document)}return e}function Xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xw(t){var e=sg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ig(n.ownerDocument.documentElement,n)){if(r!==null&&Xd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Hh(n,s);var o=Hh(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ww=yn&&"documentMode"in document&&11>=document.documentMode,Zr=null,Mu=null,us=null,Tu=!1;function Vh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tu||Zr==null||Zr!==ll(r)||(r=Zr,"selectionStart"in r&&Xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),us&&Os(us,r)||(us=r,r=pl(Mu,"onSelect"),0<r.length&&(e=new Gd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zr)))}function yo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ei={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionend:yo("Transition","TransitionEnd")},yc={},og={};yn&&(og=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function Ta(t){if(yc[t])return yc[t];if(!ei[t])return t;var e=ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in og)return yc[t]=e[n];return t}var lg=Ta("animationend"),ag=Ta("animationiteration"),cg=Ta("animationstart"),ug=Ta("transitionend"),dg=new Map,Wh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(t,e){dg.set(t,e),Br(e,[t])}for(var vc=0;vc<Wh.length;vc++){var xc=Wh[vc],kw=xc.toLowerCase(),bw=xc[0].toUpperCase()+xc.slice(1);nr(kw,"on"+bw)}nr(lg,"onAnimationEnd");nr(ag,"onAnimationIteration");nr(cg,"onAnimationStart");nr("dblclick","onDoubleClick");nr("focusin","onFocus");nr("focusout","onBlur");nr(ug,"onTransitionEnd");wi("onMouseEnter",["mouseout","mouseover"]);wi("onMouseLeave",["mouseout","mouseover"]);wi("onPointerEnter",["pointerout","pointerover"]);wi("onPointerLeave",["pointerout","pointerover"]);Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Br("onBeforeInput",["compositionend","keypress","textInput","paste"]);Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ts));function Uh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kx(r,e,void 0,t),t.currentTarget=null}function fg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Uh(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Uh(i,l,c),s=a}}}if(cl)throw t=Su,cl=!1,Su=null,t}function se(t,e){var n=e[Pu];n===void 0&&(n=e[Pu]=new Set);var r=t+"__bubble";n.has(r)||(hg(e,t,2,!1),n.add(r))}function wc(t,e,n){var r=0;e&&(r|=4),hg(n,t,r,e)}var vo="_reactListening"+Math.random().toString(36).slice(2);function js(t){if(!t[vo]){t[vo]=!0,w0.forEach(function(n){n!=="selectionchange"&&(Sw.has(n)||wc(n,!1,t),wc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vo]||(e[vo]=!0,wc("selectionchange",!1,e))}}function hg(t,e,n,r){switch(Y0(e)){case 1:var i=zx;break;case 4:i=Bx;break;default:i=qd}n=i.bind(null,e,n,t),i=void 0,!bu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function kc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=hr(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}L0(function(){var c=s,u=Vd(n),d=[];e:{var f=dg.get(t);if(f!==void 0){var p=Gd,m=t;switch(t){case"keypress":if(Wo(n)===0)break e;case"keydown":case"keyup":p=Zx;break;case"focusin":m="focus",p=pc;break;case"focusout":m="blur",p=pc;break;case"beforeblur":case"afterblur":p=pc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ph;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=_x;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=nw;break;case lg:case ag:case cg:p=Wx;break;case ug:p=iw;break;case"scroll":p=Fx;break;case"wheel":p=ow;break;case"copy":case"cut":case"paste":p=Kx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ih}var v=(e&4)!==0,x=!v&&t==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var g=c,w;g!==null;){w=g;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,y!==null&&(k=Ns(g,y),k!=null&&v.push(As(g,k,w)))),x)break;g=g.return}0<v.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==wu&&(m=n.relatedTarget||n.fromElement)&&(hr(m)||m[vn]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?hr(m):null,m!==null&&(x=Fr(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(v=Ph,k="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Ih,k="onPointerLeave",y="onPointerEnter",g="pointer"),x=p==null?f:ti(p),w=m==null?f:ti(m),f=new v(k,g+"leave",p,n,u),f.target=x,f.relatedTarget=w,k=null,hr(u)===c&&(v=new v(y,g+"enter",m,n,u),v.target=w,v.relatedTarget=x,k=v),x=k,p&&m)t:{for(v=p,y=m,g=0,w=v;w;w=Vr(w))g++;for(w=0,k=y;k;k=Vr(k))w++;for(;0<g-w;)v=Vr(v),g--;for(;0<w-g;)y=Vr(y),w--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=Vr(v),y=Vr(y)}v=null}else v=null;p!==null&&Kh(d,f,p,v,!1),m!==null&&x!==null&&Kh(d,x,m,v,!0)}}e:{if(f=c?ti(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=hw;else if(Bh(f))if(ng)S=yw;else{S=mw;var b=pw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=gw);if(S&&(S=S(t,c))){tg(d,S,n,u);break e}b&&b(t,f,c),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&mu(f,"number",f.value)}switch(b=c?ti(c):window,t){case"focusin":(Bh(b)||b.contentEditable==="true")&&(Zr=b,Mu=c,us=null);break;case"focusout":us=Mu=Zr=null;break;case"mousedown":Tu=!0;break;case"contextmenu":case"mouseup":case"dragend":Tu=!1,Vh(d,n,u);break;case"selectionchange":if(ww)break;case"keydown":case"keyup":Vh(d,n,u)}var E;if(Qd)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Xr?Z0(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(X0&&n.locale!=="ko"&&(Xr||T!=="onCompositionStart"?T==="onCompositionEnd"&&Xr&&(E=Q0()):(Ln=u,Jd="value"in Ln?Ln.value:Ln.textContent,Xr=!0)),b=pl(c,T),0<b.length&&(T=new Rh(T,t,null,n,u),d.push({event:T,listeners:b}),E?T.data=E:(E=eg(n),E!==null&&(T.data=E)))),(E=aw?cw(t,n):uw(t,n))&&(c=pl(c,"onBeforeInput"),0<c.length&&(u=new Rh("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}fg(d,e)})}function As(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ns(t,n),s!=null&&r.unshift(As(t,s,i)),s=Ns(t,e),s!=null&&r.push(As(t,s,i))),t=t.return}return r}function Vr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kh(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=Ns(n,s),a!=null&&o.unshift(As(n,a,l))):i||(a=Ns(n,s),a!=null&&o.push(As(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Nw=/\r\n?/g,Cw=/\u0000|\uFFFD/g;function qh(t){return(typeof t=="string"?t:""+t).replace(Nw,`
`).replace(Cw,"")}function xo(t,e,n){if(e=qh(e),qh(t)!==e&&n)throw Error(M(425))}function ml(){}var Ou=null,ju=null;function Au(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Du=typeof setTimeout=="function"?setTimeout:void 0,Ew=typeof clearTimeout=="function"?clearTimeout:void 0,Jh=typeof Promise=="function"?Promise:void 0,Mw=typeof queueMicrotask=="function"?queueMicrotask:typeof Jh<"u"?function(t){return Jh.resolve(null).then(t).catch(Tw)}:Du;function Tw(t){setTimeout(function(){throw t})}function bc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ms(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ms(e)}function Wn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Li=Math.random().toString(36).slice(2),en="__reactFiber$"+Li,Ds="__reactProps$"+Li,vn="__reactContainer$"+Li,Pu="__reactEvents$"+Li,Ow="__reactListeners$"+Li,jw="__reactHandles$"+Li;function hr(t){var e=t[en];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[en]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gh(t);t!==null;){if(n=t[en])return n;t=Gh(t)}return e}t=n,n=t.parentNode}return null}function Zs(t){return t=t[en]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Oa(t){return t[Ds]||null}var Ru=[],ni=-1;function rr(t){return{current:t}}function oe(t){0>ni||(t.current=Ru[ni],Ru[ni]=null,ni--)}function re(t,e){ni++,Ru[ni]=t.current,t.current=e}var er={},qe=rr(er),lt=rr(!1),Tr=er;function ki(t,e){var n=t.type.contextTypes;if(!n)return er;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function at(t){return t=t.childContextTypes,t!=null}function gl(){oe(lt),oe(qe)}function Yh(t,e,n){if(qe.current!==er)throw Error(M(168));re(qe,e),re(lt,n)}function pg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,px(t)||"Unknown",i));return pe({},n,r)}function yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||er,Tr=qe.current,re(qe,t),re(lt,lt.current),!0}function Qh(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=pg(t,e,Tr),r.__reactInternalMemoizedMergedChildContext=t,oe(lt),oe(qe),re(qe,t)):oe(lt),re(lt,n)}var fn=null,ja=!1,Sc=!1;function mg(t){fn===null?fn=[t]:fn.push(t)}function Aw(t){ja=!0,mg(t)}function ir(){if(!Sc&&fn!==null){Sc=!0;var t=0,e=Z;try{var n=fn;for(Z=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fn=null,ja=!1}catch(i){throw fn!==null&&(fn=fn.slice(t+1)),$0(Wd,ir),i}finally{Z=e,Sc=!1}}return null}var ri=[],ii=0,vl=null,xl=0,Et=[],Mt=0,Or=null,hn=1,pn="";function cr(t,e){ri[ii++]=xl,ri[ii++]=vl,vl=t,xl=e}function gg(t,e,n){Et[Mt++]=hn,Et[Mt++]=pn,Et[Mt++]=Or,Or=t;var r=hn;t=pn;var i=32-Ht(r)-1;r&=~(1<<i),n+=1;var s=32-Ht(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,hn=1<<32-Ht(e)+i|n<<i|r,pn=s+t}else hn=1<<s|n<<i|r,pn=t}function Zd(t){t.return!==null&&(cr(t,1),gg(t,1,0))}function ef(t){for(;t===vl;)vl=ri[--ii],ri[ii]=null,xl=ri[--ii],ri[ii]=null;for(;t===Or;)Or=Et[--Mt],Et[Mt]=null,pn=Et[--Mt],Et[Mt]=null,hn=Et[--Mt],Et[Mt]=null}var gt=null,mt=null,ue=!1,Ft=null;function yg(t,e){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gt=t,mt=Wn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gt=t,mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Or!==null?{id:hn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gt=t,mt=null,!0):!1;default:return!1}}function Iu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lu(t){if(ue){var e=mt;if(e){var n=e;if(!Xh(t,e)){if(Iu(t))throw Error(M(418));e=Wn(n.nextSibling);var r=gt;e&&Xh(t,e)?yg(r,n):(t.flags=t.flags&-4097|2,ue=!1,gt=t)}}else{if(Iu(t))throw Error(M(418));t.flags=t.flags&-4097|2,ue=!1,gt=t}}}function Zh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gt=t}function wo(t){if(t!==gt)return!1;if(!ue)return Zh(t),ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Au(t.type,t.memoizedProps)),e&&(e=mt)){if(Iu(t))throw vg(),Error(M(418));for(;e;)yg(t,e),e=Wn(e.nextSibling)}if(Zh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mt=Wn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mt=null}}else mt=gt?Wn(t.stateNode.nextSibling):null;return!0}function vg(){for(var t=mt;t;)t=Wn(t.nextSibling)}function bi(){mt=gt=null,ue=!1}function tf(t){Ft===null?Ft=[t]:Ft.push(t)}var Dw=bn.ReactCurrentBatchConfig;function Ki(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function ko(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ep(t){var e=t._init;return e(t._payload)}function xg(t){function e(y,g){if(t){var w=y.deletions;w===null?(y.deletions=[g],y.flags|=16):w.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=Jn(y,g),y.index=0,y.sibling=null,y}function s(y,g,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<g?(y.flags|=2,g):w):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,g,w,k){return g===null||g.tag!==6?(g=jc(w,y.mode,k),g.return=y,g):(g=i(g,w),g.return=y,g)}function a(y,g,w,k){var S=w.type;return S===Qr?u(y,g,w.props.children,k,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Mn&&ep(S)===g.type)?(k=i(g,w.props),k.ref=Ki(y,g,w),k.return=y,k):(k=Qo(w.type,w.key,w.props,null,y.mode,k),k.ref=Ki(y,g,w),k.return=y,k)}function c(y,g,w,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Ac(w,y.mode,k),g.return=y,g):(g=i(g,w.children||[]),g.return=y,g)}function u(y,g,w,k,S){return g===null||g.tag!==7?(g=kr(w,y.mode,k,S),g.return=y,g):(g=i(g,w),g.return=y,g)}function d(y,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=jc(""+g,y.mode,w),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case co:return w=Qo(g.type,g.key,g.props,null,y.mode,w),w.ref=Ki(y,null,g),w.return=y,w;case Yr:return g=Ac(g,y.mode,w),g.return=y,g;case Mn:var k=g._init;return d(y,k(g._payload),w)}if(Zi(g)||_i(g))return g=kr(g,y.mode,w,null),g.return=y,g;ko(y,g)}return null}function f(y,g,w,k){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(y,g,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case co:return w.key===S?a(y,g,w,k):null;case Yr:return w.key===S?c(y,g,w,k):null;case Mn:return S=w._init,f(y,g,S(w._payload),k)}if(Zi(w)||_i(w))return S!==null?null:u(y,g,w,k,null);ko(y,w)}return null}function p(y,g,w,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(w)||null,l(g,y,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case co:return y=y.get(k.key===null?w:k.key)||null,a(g,y,k,S);case Yr:return y=y.get(k.key===null?w:k.key)||null,c(g,y,k,S);case Mn:var b=k._init;return p(y,g,w,b(k._payload),S)}if(Zi(k)||_i(k))return y=y.get(w)||null,u(g,y,k,S,null);ko(g,k)}return null}function m(y,g,w,k){for(var S=null,b=null,E=g,T=g=0,I=null;E!==null&&T<w.length;T++){E.index>T?(I=E,E=null):I=E.sibling;var z=f(y,E,w[T],k);if(z===null){E===null&&(E=I);break}t&&E&&z.alternate===null&&e(y,E),g=s(z,g,T),b===null?S=z:b.sibling=z,b=z,E=I}if(T===w.length)return n(y,E),ue&&cr(y,T),S;if(E===null){for(;T<w.length;T++)E=d(y,w[T],k),E!==null&&(g=s(E,g,T),b===null?S=E:b.sibling=E,b=E);return ue&&cr(y,T),S}for(E=r(y,E);T<w.length;T++)I=p(E,y,T,w[T],k),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?T:I.key),g=s(I,g,T),b===null?S=I:b.sibling=I,b=I);return t&&E.forEach(function(ee){return e(y,ee)}),ue&&cr(y,T),S}function v(y,g,w,k){var S=_i(w);if(typeof S!="function")throw Error(M(150));if(w=S.call(w),w==null)throw Error(M(151));for(var b=S=null,E=g,T=g=0,I=null,z=w.next();E!==null&&!z.done;T++,z=w.next()){E.index>T?(I=E,E=null):I=E.sibling;var ee=f(y,E,z.value,k);if(ee===null){E===null&&(E=I);break}t&&E&&ee.alternate===null&&e(y,E),g=s(ee,g,T),b===null?S=ee:b.sibling=ee,b=ee,E=I}if(z.done)return n(y,E),ue&&cr(y,T),S;if(E===null){for(;!z.done;T++,z=w.next())z=d(y,z.value,k),z!==null&&(g=s(z,g,T),b===null?S=z:b.sibling=z,b=z);return ue&&cr(y,T),S}for(E=r(y,E);!z.done;T++,z=w.next())z=p(E,y,T,z.value,k),z!==null&&(t&&z.alternate!==null&&E.delete(z.key===null?T:z.key),g=s(z,g,T),b===null?S=z:b.sibling=z,b=z);return t&&E.forEach(function(K){return e(y,K)}),ue&&cr(y,T),S}function x(y,g,w,k){if(typeof w=="object"&&w!==null&&w.type===Qr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case co:e:{for(var S=w.key,b=g;b!==null;){if(b.key===S){if(S=w.type,S===Qr){if(b.tag===7){n(y,b.sibling),g=i(b,w.props.children),g.return=y,y=g;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Mn&&ep(S)===b.type){n(y,b.sibling),g=i(b,w.props),g.ref=Ki(y,b,w),g.return=y,y=g;break e}n(y,b);break}else e(y,b);b=b.sibling}w.type===Qr?(g=kr(w.props.children,y.mode,k,w.key),g.return=y,y=g):(k=Qo(w.type,w.key,w.props,null,y.mode,k),k.ref=Ki(y,g,w),k.return=y,y=k)}return o(y);case Yr:e:{for(b=w.key;g!==null;){if(g.key===b)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(y,g.sibling),g=i(g,w.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=Ac(w,y.mode,k),g.return=y,y=g}return o(y);case Mn:return b=w._init,x(y,g,b(w._payload),k)}if(Zi(w))return m(y,g,w,k);if(_i(w))return v(y,g,w,k);ko(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,w),g.return=y,y=g):(n(y,g),g=jc(w,y.mode,k),g.return=y,y=g),o(y)):n(y,g)}return x}var Si=xg(!0),wg=xg(!1),wl=rr(null),kl=null,si=null,nf=null;function rf(){nf=si=kl=null}function sf(t){var e=wl.current;oe(wl),t._currentValue=e}function zu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pi(t,e){kl=t,nf=si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ot=!0),t.firstContext=null)}function Pt(t){var e=t._currentValue;if(nf!==t)if(t={context:t,memoizedValue:e,next:null},si===null){if(kl===null)throw Error(M(308));si=t,kl.dependencies={lanes:0,firstContext:t}}else si=si.next=t;return e}var pr=null;function of(t){pr===null?pr=[t]:pr.push(t)}function kg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,of(e)):(n.next=i.next,i.next=n),e.interleaved=n,xn(t,r)}function xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tn=!1;function lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Un(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xn(t,n)}return i=r.interleaved,i===null?(e.next=e,of(r)):(e.next=i.next,i.next=e),r.interleaved=e,xn(t,n)}function Uo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ud(t,n)}}function tp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bl(t,e,n,r){var i=t.updateQueue;Tn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,u=c=a=null,l=s;do{var f=l.lane,p=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,v=l;switch(f=e,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=pe({},d,f);break e;case 2:Tn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=p,a=d):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ar|=o,t.lanes=o,t.memoizedState=d}}function np(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var eo={},rn=rr(eo),Ps=rr(eo),Rs=rr(eo);function mr(t){if(t===eo)throw Error(M(174));return t}function af(t,e){switch(re(Rs,e),re(Ps,t),re(rn,eo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yu(e,t)}oe(rn),re(rn,e)}function Ni(){oe(rn),oe(Ps),oe(Rs)}function Sg(t){mr(Rs.current);var e=mr(rn.current),n=yu(e,t.type);e!==n&&(re(Ps,t),re(rn,n))}function cf(t){Ps.current===t&&(oe(rn),oe(Ps))}var fe=rr(0);function Sl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nc=[];function uf(){for(var t=0;t<Nc.length;t++)Nc[t]._workInProgressVersionPrimary=null;Nc.length=0}var Ko=bn.ReactCurrentDispatcher,Cc=bn.ReactCurrentBatchConfig,jr=0,he=null,ke=null,Ce=null,Nl=!1,ds=!1,Is=0,Pw=0;function He(){throw Error(M(321))}function df(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ut(t[n],e[n]))return!1;return!0}function ff(t,e,n,r,i,s){if(jr=s,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ko.current=t===null||t.memoizedState===null?zw:Bw,t=n(r,i),ds){s=0;do{if(ds=!1,Is=0,25<=s)throw Error(M(301));s+=1,Ce=ke=null,e.updateQueue=null,Ko.current=Fw,t=n(r,i)}while(ds)}if(Ko.current=Cl,e=ke!==null&&ke.next!==null,jr=0,Ce=ke=he=null,Nl=!1,e)throw Error(M(300));return t}function hf(){var t=Is!==0;return Is=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?he.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function Rt(){if(ke===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Ce===null?he.memoizedState:Ce.next;if(e!==null)Ce=e,ke=t;else{if(t===null)throw Error(M(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ce===null?he.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function Ls(t,e){return typeof e=="function"?e(t):e}function Ec(t){var e=Rt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var u=c.lane;if((jr&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,he.lanes|=u,Ar|=u}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,Ut(r,e.memoizedState)||(ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,he.lanes|=s,Ar|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mc(t){var e=Rt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ut(s,e.memoizedState)||(ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ng(){}function Cg(t,e){var n=he,r=Rt(),i=e(),s=!Ut(r.memoizedState,i);if(s&&(r.memoizedState=i,ot=!0),r=r.queue,pf(Tg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,zs(9,Mg.bind(null,n,r,i,e),void 0,null),Me===null)throw Error(M(349));jr&30||Eg(n,e,i)}return i}function Eg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Mg(t,e,n,r){e.value=n,e.getSnapshot=r,Og(e)&&jg(t)}function Tg(t,e,n){return n(function(){Og(e)&&jg(t)})}function Og(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ut(t,n)}catch{return!0}}function jg(t){var e=xn(t,1);e!==null&&Vt(e,t,1,-1)}function rp(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:t},e.queue=t,t=t.dispatch=Lw.bind(null,he,t),[e.memoizedState,t]}function zs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ag(){return Rt().memoizedState}function qo(t,e,n,r){var i=Gt();he.flags|=t,i.memoizedState=zs(1|e,n,void 0,r===void 0?null:r)}function Aa(t,e,n,r){var i=Rt();r=r===void 0?null:r;var s=void 0;if(ke!==null){var o=ke.memoizedState;if(s=o.destroy,r!==null&&df(r,o.deps)){i.memoizedState=zs(e,n,s,r);return}}he.flags|=t,i.memoizedState=zs(1|e,n,s,r)}function ip(t,e){return qo(8390656,8,t,e)}function pf(t,e){return Aa(2048,8,t,e)}function Dg(t,e){return Aa(4,2,t,e)}function Pg(t,e){return Aa(4,4,t,e)}function Rg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ig(t,e,n){return n=n!=null?n.concat([t]):null,Aa(4,4,Rg.bind(null,e,t),n)}function mf(){}function Lg(t,e){var n=Rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&df(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zg(t,e){var n=Rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&df(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Bg(t,e,n){return jr&21?(Ut(n,e)||(n=V0(),he.lanes|=n,Ar|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=n)}function Rw(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var r=Cc.transition;Cc.transition={};try{t(!1),e()}finally{Z=n,Cc.transition=r}}function Fg(){return Rt().memoizedState}function Iw(t,e,n){var r=qn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$g(t))_g(e,n);else if(n=kg(t,e,n,r),n!==null){var i=Qe();Vt(n,t,r,i),Hg(n,e,r)}}function Lw(t,e,n){var r=qn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($g(t))_g(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Ut(l,o)){var a=e.interleaved;a===null?(i.next=i,of(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=kg(t,e,i,r),n!==null&&(i=Qe(),Vt(n,t,r,i),Hg(n,e,r))}}function $g(t){var e=t.alternate;return t===he||e!==null&&e===he}function _g(t,e){ds=Nl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ud(t,n)}}var Cl={readContext:Pt,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useInsertionEffect:He,useLayoutEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useMutableSource:He,useSyncExternalStore:He,useId:He,unstable_isNewReconciler:!1},zw={readContext:Pt,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:ip,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qo(4194308,4,Rg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qo(4194308,4,t,e)},useInsertionEffect:function(t,e){return qo(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Iw.bind(null,he,t),[r.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:rp,useDebugValue:mf,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=rp(!1),e=t[0];return t=Rw.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=he,i=Gt();if(ue){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Me===null)throw Error(M(349));jr&30||Eg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ip(Tg.bind(null,r,s,t),[t]),r.flags|=2048,zs(9,Mg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gt(),e=Me.identifierPrefix;if(ue){var n=pn,r=hn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Is++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Pw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bw={readContext:Pt,useCallback:Lg,useContext:Pt,useEffect:pf,useImperativeHandle:Ig,useInsertionEffect:Dg,useLayoutEffect:Pg,useMemo:zg,useReducer:Ec,useRef:Ag,useState:function(){return Ec(Ls)},useDebugValue:mf,useDeferredValue:function(t){var e=Rt();return Bg(e,ke.memoizedState,t)},useTransition:function(){var t=Ec(Ls)[0],e=Rt().memoizedState;return[t,e]},useMutableSource:Ng,useSyncExternalStore:Cg,useId:Fg,unstable_isNewReconciler:!1},Fw={readContext:Pt,useCallback:Lg,useContext:Pt,useEffect:pf,useImperativeHandle:Ig,useInsertionEffect:Dg,useLayoutEffect:Pg,useMemo:zg,useReducer:Mc,useRef:Ag,useState:function(){return Mc(Ls)},useDebugValue:mf,useDeferredValue:function(t){var e=Rt();return ke===null?e.memoizedState=t:Bg(e,ke.memoizedState,t)},useTransition:function(){var t=Mc(Ls)[0],e=Rt().memoizedState;return[t,e]},useMutableSource:Ng,useSyncExternalStore:Cg,useId:Fg,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Da={isMounted:function(t){return(t=t._reactInternals)?Fr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qe(),i=qn(t),s=mn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Un(t,s,i),e!==null&&(Vt(e,t,i,r),Uo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qe(),i=qn(t),s=mn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Un(t,s,i),e!==null&&(Vt(e,t,i,r),Uo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qe(),r=qn(t),i=mn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Un(t,i,r),e!==null&&(Vt(e,t,r,n),Uo(e,t,r))}};function sp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Os(n,r)||!Os(i,s):!0}function Vg(t,e,n){var r=!1,i=er,s=e.contextType;return typeof s=="object"&&s!==null?s=Pt(s):(i=at(e)?Tr:qe.current,r=e.contextTypes,s=(r=r!=null)?ki(t,i):er),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Da,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function op(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Da.enqueueReplaceState(e,e.state,null)}function Fu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},lf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Pt(s):(s=at(e)?Tr:qe.current,i.context=ki(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Da.enqueueReplaceState(i,i.state,null),bl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ci(t,e){try{var n="",r=e;do n+=hx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Tc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $u(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $w=typeof WeakMap=="function"?WeakMap:Map;function Wg(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ml||(Ml=!0,Yu=r),$u(t,e)},n}function Ug(t,e,n){n=mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){$u(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$u(t,e),typeof r!="function"&&(Kn===null?Kn=new Set([this]):Kn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $w;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ek.bind(null,t,e,n),e.then(t,t))}function ap(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,Un(n,e,1))),n.lanes|=1),t)}var _w=bn.ReactCurrentOwner,ot=!1;function Ye(t,e,n,r){e.child=t===null?wg(e,null,n,r):Si(e,t.child,n,r)}function up(t,e,n,r,i){n=n.render;var s=e.ref;return pi(e,i),r=ff(t,e,n,r,s,i),n=hf(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(ue&&n&&Zd(e),e.flags|=1,Ye(t,e,r,i),e.child)}function dp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Sf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Kg(t,e,s,r,i)):(t=Qo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Os,n(o,r)&&t.ref===e.ref)return wn(t,e,i)}return e.flags|=1,t=Jn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Kg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Os(s,r)&&t.ref===e.ref)if(ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ot=!0);else return e.lanes=t.lanes,wn(t,e,i)}return _u(t,e,n,r,i)}function qg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(li,ht),ht|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(li,ht),ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,re(li,ht),ht|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,re(li,ht),ht|=r;return Ye(t,e,i,n),e.child}function Jg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _u(t,e,n,r,i){var s=at(n)?Tr:qe.current;return s=ki(e,s),pi(e,i),n=ff(t,e,n,r,s,i),r=hf(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(ue&&r&&Zd(e),e.flags|=1,Ye(t,e,n,i),e.child)}function fp(t,e,n,r,i){if(at(n)){var s=!0;yl(e)}else s=!1;if(pi(e,i),e.stateNode===null)Jo(t,e),Vg(e,n,r),Fu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pt(c):(c=at(n)?Tr:qe.current,c=ki(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&op(e,o,r,c),Tn=!1;var f=e.memoizedState;o.state=f,bl(e,r,o,i),a=e.memoizedState,l!==r||f!==a||lt.current||Tn?(typeof u=="function"&&(Bu(e,n,u,r),a=e.memoizedState),(l=Tn||sp(e,n,l,r,f,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,bg(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:zt(e.type,l),o.props=c,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Pt(a):(a=at(n)?Tr:qe.current,a=ki(e,a));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&op(e,o,r,a),Tn=!1,f=e.memoizedState,o.state=f,bl(e,r,o,i);var m=e.memoizedState;l!==d||f!==m||lt.current||Tn?(typeof p=="function"&&(Bu(e,n,p,r),m=e.memoizedState),(c=Tn||sp(e,n,c,r,f,m,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Hu(t,e,n,r,s,i)}function Hu(t,e,n,r,i,s){Jg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Qh(e,n,!1),wn(t,e,s);r=e.stateNode,_w.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Si(e,t.child,null,s),e.child=Si(e,null,l,s)):Ye(t,e,l,s),e.memoizedState=r.state,i&&Qh(e,n,!0),e.child}function Gg(t){var e=t.stateNode;e.pendingContext?Yh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yh(t,e.context,!1),af(t,e.containerInfo)}function hp(t,e,n,r,i){return bi(),tf(i),e.flags|=256,Ye(t,e,n,r),e.child}var Vu={dehydrated:null,treeContext:null,retryLane:0};function Wu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yg(t,e,n){var r=e.pendingProps,i=fe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),re(fe,i&1),t===null)return Lu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ia(o,r,0,null),t=kr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wu(n),e.memoizedState=Vu,t):gf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Hw(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Jn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Jn(l,s):(s=kr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Wu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vu,r}return s=t.child,t=s.sibling,r=Jn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gf(t,e){return e=Ia({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bo(t,e,n,r){return r!==null&&tf(r),Si(e,t.child,null,n),t=gf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Hw(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Tc(Error(M(422))),bo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ia({mode:"visible",children:r.children},i,0,null),s=kr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Si(e,t.child,null,o),e.child.memoizedState=Wu(o),e.memoizedState=Vu,s);if(!(e.mode&1))return bo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(M(419)),r=Tc(s,r,void 0),bo(t,e,o,r)}if(l=(o&t.childLanes)!==0,ot||l){if(r=Me,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xn(t,i),Vt(r,t,i,-1))}return bf(),r=Tc(Error(M(421))),bo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,mt=Wn(i.nextSibling),gt=e,ue=!0,Ft=null,t!==null&&(Et[Mt++]=hn,Et[Mt++]=pn,Et[Mt++]=Or,hn=t.id,pn=t.overflow,Or=e),e=gf(e,r.children),e.flags|=4096,e)}function pp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zu(t.return,e,n)}function Oc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Qg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ye(t,e,r.children,n),r=fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pp(t,n,e);else if(t.tag===19)pp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(re(fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Sl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Oc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Sl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Oc(e,!0,n,null,s);break;case"together":Oc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ar|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vw(t,e,n){switch(e.tag){case 3:Gg(e),bi();break;case 5:Sg(e);break;case 1:at(e.type)&&yl(e);break;case 4:af(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;re(wl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(re(fe,fe.current&1),e.flags|=128,null):n&e.child.childLanes?Yg(t,e,n):(re(fe,fe.current&1),t=wn(t,e,n),t!==null?t.sibling:null);re(fe,fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),re(fe,fe.current),r)break;return null;case 22:case 23:return e.lanes=0,qg(t,e,n)}return wn(t,e,n)}var Xg,Uu,Zg,ey;Xg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Uu=function(){};Zg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,mr(rn.current);var s=null;switch(n){case"input":i=hu(t,i),r=hu(t,r),s=[];break;case"select":i=pe({},i,{value:void 0}),r=pe({},r,{value:void 0}),s=[];break;case"textarea":i=gu(t,i),r=gu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ml)}vu(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(bs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(bs.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&se("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ey=function(t,e,n,r){n!==r&&(e.flags|=4)};function qi(t,e){if(!ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ww(t,e,n){var r=e.pendingProps;switch(ef(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(e),null;case 1:return at(e.type)&&gl(),Ve(e),null;case 3:return r=e.stateNode,Ni(),oe(lt),oe(qe),uf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Zu(Ft),Ft=null))),Uu(t,e),Ve(e),null;case 5:cf(e);var i=mr(Rs.current);if(n=e.type,t!==null&&e.stateNode!=null)Zg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ve(e),null}if(t=mr(rn.current),wo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[en]=e,r[Ds]=s,t=(e.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(i=0;i<ts.length;i++)se(ts[i],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":Sh(r,s),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},se("invalid",r);break;case"textarea":Ch(r,s),se("invalid",r)}vu(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&xo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&xo(r.textContent,l,t),i=["children",""+l]):bs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&se("scroll",r)}switch(n){case"input":uo(r),Nh(r,s,!0);break;case"textarea":uo(r),Eh(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ml)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=T0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[en]=e,t[Ds]=r,Xg(t,e,!1,!1),e.stateNode=t;e:{switch(o=xu(n,r),n){case"dialog":se("cancel",t),se("close",t),i=r;break;case"iframe":case"object":case"embed":se("load",t),i=r;break;case"video":case"audio":for(i=0;i<ts.length;i++)se(ts[i],t);i=r;break;case"source":se("error",t),i=r;break;case"img":case"image":case"link":se("error",t),se("load",t),i=r;break;case"details":se("toggle",t),i=r;break;case"input":Sh(t,r),i=hu(t,r),se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=pe({},r,{value:void 0}),se("invalid",t);break;case"textarea":Ch(t,r),i=gu(t,r),se("invalid",t);break;default:i=r}vu(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?A0(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&O0(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ss(t,a):typeof a=="number"&&Ss(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bs.hasOwnProperty(s)?a!=null&&s==="onScroll"&&se("scroll",t):a!=null&&Fd(t,s,a,o))}switch(n){case"input":uo(t),Nh(t,r,!1);break;case"textarea":uo(t),Eh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ui(t,!!r.multiple,s,!1):r.defaultValue!=null&&ui(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ve(e),null;case 6:if(t&&e.stateNode!=null)ey(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=mr(Rs.current),mr(rn.current),wo(e)){if(r=e.stateNode,n=e.memoizedProps,r[en]=e,(s=r.nodeValue!==n)&&(t=gt,t!==null))switch(t.tag){case 3:xo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=e,e.stateNode=r}return Ve(e),null;case 13:if(oe(fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ue&&mt!==null&&e.mode&1&&!(e.flags&128))vg(),bi(),e.flags|=98560,s=!1;else if(s=wo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[en]=e}else bi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ve(e),s=!1}else Ft!==null&&(Zu(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||fe.current&1?Se===0&&(Se=3):bf())),e.updateQueue!==null&&(e.flags|=4),Ve(e),null);case 4:return Ni(),Uu(t,e),t===null&&js(e.stateNode.containerInfo),Ve(e),null;case 10:return sf(e.type._context),Ve(e),null;case 17:return at(e.type)&&gl(),Ve(e),null;case 19:if(oe(fe),s=e.memoizedState,s===null)return Ve(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qi(s,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sl(t),o!==null){for(e.flags|=128,qi(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(fe,fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&ye()>Ei&&(e.flags|=128,r=!0,qi(s,!1),e.lanes=4194304)}else{if(!r)if(t=Sl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ue)return Ve(e),null}else 2*ye()-s.renderingStartTime>Ei&&n!==1073741824&&(e.flags|=128,r=!0,qi(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ye(),e.sibling=null,n=fe.current,re(fe,r?n&1|2:n&1),e):(Ve(e),null);case 22:case 23:return kf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ht&1073741824&&(Ve(e),e.subtreeFlags&6&&(e.flags|=8192)):Ve(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Uw(t,e){switch(ef(e),e.tag){case 1:return at(e.type)&&gl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ni(),oe(lt),oe(qe),uf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cf(e),null;case 13:if(oe(fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));bi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(fe),null;case 4:return Ni(),null;case 10:return sf(e.type._context),null;case 22:case 23:return kf(),null;case 24:return null;default:return null}}var So=!1,Ue=!1,Kw=typeof WeakSet=="function"?WeakSet:Set,R=null;function oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){me(t,e,r)}else n.current=null}function Ku(t,e,n){try{n()}catch(r){me(t,e,r)}}var mp=!1;function qw(t,e){if(Ou=fl,t=sg(),Xd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(l=o),f===s&&++u===r&&(a=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(ju={focusedElem:t,selectionRange:n},fl=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,x=m.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:zt(e.type,v),x);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(k){me(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return m=mp,mp=!1,m}function fs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ku(e,n,s)}i=i.next}while(i!==r)}}function Pa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ty(t){var e=t.alternate;e!==null&&(t.alternate=null,ty(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[Ds],delete e[Pu],delete e[Ow],delete e[jw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ny(t){return t.tag===5||t.tag===3||t.tag===4}function gp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ny(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ju(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ml));else if(r!==4&&(t=t.child,t!==null))for(Ju(t,e,n),t=t.sibling;t!==null;)Ju(t,e,n),t=t.sibling}function Gu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gu(t,e,n),t=t.sibling;t!==null;)Gu(t,e,n),t=t.sibling}var De=null,Bt=!1;function Nn(t,e,n){for(n=n.child;n!==null;)ry(t,e,n),n=n.sibling}function ry(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Ca,n)}catch{}switch(n.tag){case 5:Ue||oi(n,e);case 6:var r=De,i=Bt;De=null,Nn(t,e,n),De=r,Bt=i,De!==null&&(Bt?(t=De,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):De.removeChild(n.stateNode));break;case 18:De!==null&&(Bt?(t=De,n=n.stateNode,t.nodeType===8?bc(t.parentNode,n):t.nodeType===1&&bc(t,n),Ms(t)):bc(De,n.stateNode));break;case 4:r=De,i=Bt,De=n.stateNode.containerInfo,Bt=!0,Nn(t,e,n),De=r,Bt=i;break;case 0:case 11:case 14:case 15:if(!Ue&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ku(n,e,o),i=i.next}while(i!==r)}Nn(t,e,n);break;case 1:if(!Ue&&(oi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){me(n,e,l)}Nn(t,e,n);break;case 21:Nn(t,e,n);break;case 22:n.mode&1?(Ue=(r=Ue)||n.memoizedState!==null,Nn(t,e,n),Ue=r):Nn(t,e,n);break;default:Nn(t,e,n)}}function yp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Kw),e.forEach(function(r){var i=nk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:De=l.stateNode,Bt=!1;break e;case 3:De=l.stateNode.containerInfo,Bt=!0;break e;case 4:De=l.stateNode.containerInfo,Bt=!0;break e}l=l.return}if(De===null)throw Error(M(160));ry(s,o,i),De=null,Bt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){me(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iy(e,t),e=e.sibling}function iy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),Jt(t),r&4){try{fs(3,t,t.return),Pa(3,t)}catch(v){me(t,t.return,v)}try{fs(5,t,t.return)}catch(v){me(t,t.return,v)}}break;case 1:Lt(e,t),Jt(t),r&512&&n!==null&&oi(n,n.return);break;case 5:if(Lt(e,t),Jt(t),r&512&&n!==null&&oi(n,n.return),t.flags&32){var i=t.stateNode;try{Ss(i,"")}catch(v){me(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&E0(i,s),xu(l,o);var c=xu(l,s);for(o=0;o<a.length;o+=2){var u=a[o],d=a[o+1];u==="style"?A0(i,d):u==="dangerouslySetInnerHTML"?O0(i,d):u==="children"?Ss(i,d):Fd(i,u,d,c)}switch(l){case"input":pu(i,s);break;case"textarea":M0(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ui(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?ui(i,!!s.multiple,s.defaultValue,!0):ui(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ds]=s}catch(v){me(t,t.return,v)}}break;case 6:if(Lt(e,t),Jt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){me(t,t.return,v)}}break;case 3:if(Lt(e,t),Jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ms(e.containerInfo)}catch(v){me(t,t.return,v)}break;case 4:Lt(e,t),Jt(t);break;case 13:Lt(e,t),Jt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xf=ye())),r&4&&yp(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ue=(c=Ue)||u,Lt(e,t),Ue=c):Lt(e,t),Jt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(R=t,u=t.child;u!==null;){for(d=R=u;R!==null;){switch(f=R,p=f.child,f.tag){case 0:case 11:case 14:case 15:fs(4,f,f.return);break;case 1:oi(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){me(r,n,v)}}break;case 5:oi(f,f.return);break;case 22:if(f.memoizedState!==null){xp(d);continue}}p!==null?(p.return=f,R=p):xp(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=j0("display",o))}catch(v){me(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){me(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Lt(e,t),Jt(t),r&4&&yp(t);break;case 21:break;default:Lt(e,t),Jt(t)}}function Jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ny(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ss(i,""),r.flags&=-33);var s=gp(t);Gu(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=gp(t);Ju(t,l,o);break;default:throw Error(M(161))}}catch(a){me(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Jw(t,e,n){R=t,sy(t)}function sy(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||So;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ue;l=So;var c=Ue;if(So=o,(Ue=a)&&!c)for(R=i;R!==null;)o=R,a=o.child,o.tag===22&&o.memoizedState!==null?wp(i):a!==null?(a.return=o,R=a):wp(i);for(;s!==null;)R=s,sy(s),s=s.sibling;R=i,So=l,Ue=c}vp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):vp(t)}}function vp(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||Pa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ue)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&np(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}np(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ms(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ue||e.flags&512&&qu(e)}catch(f){me(e,e.return,f)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function xp(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function wp(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pa(4,e)}catch(a){me(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){me(e,i,a)}}var s=e.return;try{qu(e)}catch(a){me(e,s,a)}break;case 5:var o=e.return;try{qu(e)}catch(a){me(e,o,a)}}}catch(a){me(e,e.return,a)}if(e===t){R=null;break}var l=e.sibling;if(l!==null){l.return=e.return,R=l;break}R=e.return}}var Gw=Math.ceil,El=bn.ReactCurrentDispatcher,yf=bn.ReactCurrentOwner,At=bn.ReactCurrentBatchConfig,Q=0,Me=null,xe=null,ze=0,ht=0,li=rr(0),Se=0,Bs=null,Ar=0,Ra=0,vf=0,hs=null,it=null,xf=0,Ei=1/0,un=null,Ml=!1,Yu=null,Kn=null,No=!1,zn=null,Tl=0,ps=0,Qu=null,Go=-1,Yo=0;function Qe(){return Q&6?ye():Go!==-1?Go:Go=ye()}function qn(t){return t.mode&1?Q&2&&ze!==0?ze&-ze:Dw.transition!==null?(Yo===0&&(Yo=V0()),Yo):(t=Z,t!==0||(t=window.event,t=t===void 0?16:Y0(t.type)),t):1}function Vt(t,e,n,r){if(50<ps)throw ps=0,Qu=null,Error(M(185));Qs(t,n,r),(!(Q&2)||t!==Me)&&(t===Me&&(!(Q&2)&&(Ra|=n),Se===4&&Pn(t,ze)),ct(t,r),n===1&&Q===0&&!(e.mode&1)&&(Ei=ye()+500,ja&&ir()))}function ct(t,e){var n=t.callbackNode;Dx(t,e);var r=dl(t,t===Me?ze:0);if(r===0)n!==null&&Oh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Oh(n),e===1)t.tag===0?Aw(kp.bind(null,t)):mg(kp.bind(null,t)),Mw(function(){!(Q&6)&&ir()}),n=null;else{switch(W0(r)){case 1:n=Wd;break;case 4:n=_0;break;case 16:n=ul;break;case 536870912:n=H0;break;default:n=ul}n=hy(n,oy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oy(t,e){if(Go=-1,Yo=0,Q&6)throw Error(M(327));var n=t.callbackNode;if(mi()&&t.callbackNode!==n)return null;var r=dl(t,t===Me?ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ol(t,r);else{e=r;var i=Q;Q|=2;var s=ay();(Me!==t||ze!==e)&&(un=null,Ei=ye()+500,wr(t,e));do try{Xw();break}catch(l){ly(t,l)}while(!0);rf(),El.current=s,Q=i,xe!==null?e=0:(Me=null,ze=0,e=Se)}if(e!==0){if(e===2&&(i=Nu(t),i!==0&&(r=i,e=Xu(t,i))),e===1)throw n=Bs,wr(t,0),Pn(t,r),ct(t,ye()),n;if(e===6)Pn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Yw(i)&&(e=Ol(t,r),e===2&&(s=Nu(t),s!==0&&(r=s,e=Xu(t,s))),e===1))throw n=Bs,wr(t,0),Pn(t,r),ct(t,ye()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:ur(t,it,un);break;case 3:if(Pn(t,r),(r&130023424)===r&&(e=xf+500-ye(),10<e)){if(dl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Qe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Du(ur.bind(null,t,it,un),e);break}ur(t,it,un);break;case 4:if(Pn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ht(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gw(r/1960))-r,10<r){t.timeoutHandle=Du(ur.bind(null,t,it,un),r);break}ur(t,it,un);break;case 5:ur(t,it,un);break;default:throw Error(M(329))}}}return ct(t,ye()),t.callbackNode===n?oy.bind(null,t):null}function Xu(t,e){var n=hs;return t.current.memoizedState.isDehydrated&&(wr(t,e).flags|=256),t=Ol(t,e),t!==2&&(e=it,it=n,e!==null&&Zu(e)),t}function Zu(t){it===null?it=t:it.push.apply(it,t)}function Yw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ut(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pn(t,e){for(e&=~vf,e&=~Ra,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ht(e),r=1<<n;t[n]=-1,e&=~r}}function kp(t){if(Q&6)throw Error(M(327));mi();var e=dl(t,0);if(!(e&1))return ct(t,ye()),null;var n=Ol(t,e);if(t.tag!==0&&n===2){var r=Nu(t);r!==0&&(e=r,n=Xu(t,r))}if(n===1)throw n=Bs,wr(t,0),Pn(t,e),ct(t,ye()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ur(t,it,un),ct(t,ye()),null}function wf(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(Ei=ye()+500,ja&&ir())}}function Dr(t){zn!==null&&zn.tag===0&&!(Q&6)&&mi();var e=Q;Q|=1;var n=At.transition,r=Z;try{if(At.transition=null,Z=1,t)return t()}finally{Z=r,At.transition=n,Q=e,!(Q&6)&&ir()}}function kf(){ht=li.current,oe(li)}function wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ew(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(ef(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gl();break;case 3:Ni(),oe(lt),oe(qe),uf();break;case 5:cf(r);break;case 4:Ni();break;case 13:oe(fe);break;case 19:oe(fe);break;case 10:sf(r.type._context);break;case 22:case 23:kf()}n=n.return}if(Me=t,xe=t=Jn(t.current,null),ze=ht=e,Se=0,Bs=null,vf=Ra=Ar=0,it=hs=null,pr!==null){for(e=0;e<pr.length;e++)if(n=pr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}pr=null}return t}function ly(t,e){do{var n=xe;try{if(rf(),Ko.current=Cl,Nl){for(var r=he.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Nl=!1}if(jr=0,Ce=ke=he=null,ds=!1,Is=0,yf.current=null,n===null||n.return===null){Se=1,Bs=e,xe=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ze,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=ap(o);if(p!==null){p.flags&=-257,cp(p,o,l,s,e),p.mode&1&&lp(s,c,e),e=p,a=c;var m=e.updateQueue;if(m===null){var v=new Set;v.add(a),e.updateQueue=v}else m.add(a);break e}else{if(!(e&1)){lp(s,c,e),bf();break e}a=Error(M(426))}}else if(ue&&l.mode&1){var x=ap(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),cp(x,o,l,s,e),tf(Ci(a,l));break e}}s=a=Ci(a,l),Se!==4&&(Se=2),hs===null?hs=[s]:hs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Wg(s,a,e);tp(s,y);break e;case 1:l=a;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Kn===null||!Kn.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=Ug(s,l,e);tp(s,k);break e}}s=s.return}while(s!==null)}uy(n)}catch(S){e=S,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(!0)}function ay(){var t=El.current;return El.current=Cl,t===null?Cl:t}function bf(){(Se===0||Se===3||Se===2)&&(Se=4),Me===null||!(Ar&268435455)&&!(Ra&268435455)||Pn(Me,ze)}function Ol(t,e){var n=Q;Q|=2;var r=ay();(Me!==t||ze!==e)&&(un=null,wr(t,e));do try{Qw();break}catch(i){ly(t,i)}while(!0);if(rf(),Q=n,El.current=r,xe!==null)throw Error(M(261));return Me=null,ze=0,Se}function Qw(){for(;xe!==null;)cy(xe)}function Xw(){for(;xe!==null&&!Sx();)cy(xe)}function cy(t){var e=fy(t.alternate,t,ht);t.memoizedProps=t.pendingProps,e===null?uy(t):xe=e,yf.current=null}function uy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Uw(n,e),n!==null){n.flags&=32767,xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,xe=null;return}}else if(n=Ww(n,e,ht),n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);Se===0&&(Se=5)}function ur(t,e,n){var r=Z,i=At.transition;try{At.transition=null,Z=1,Zw(t,e,n,r)}finally{At.transition=i,Z=r}return null}function Zw(t,e,n,r){do mi();while(zn!==null);if(Q&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Px(t,s),t===Me&&(xe=Me=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||No||(No=!0,hy(ul,function(){return mi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=At.transition,At.transition=null;var o=Z;Z=1;var l=Q;Q|=4,yf.current=null,qw(t,n),iy(n,t),xw(ju),fl=!!Ou,ju=Ou=null,t.current=n,Jw(n),Nx(),Q=l,Z=o,At.transition=s}else t.current=n;if(No&&(No=!1,zn=t,Tl=i),s=t.pendingLanes,s===0&&(Kn=null),Mx(n.stateNode),ct(t,ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ml)throw Ml=!1,t=Yu,Yu=null,t;return Tl&1&&t.tag!==0&&mi(),s=t.pendingLanes,s&1?t===Qu?ps++:(ps=0,Qu=t):ps=0,ir(),null}function mi(){if(zn!==null){var t=W0(Tl),e=At.transition,n=Z;try{if(At.transition=null,Z=16>t?16:t,zn===null)var r=!1;else{if(t=zn,zn=null,Tl=0,Q&6)throw Error(M(331));var i=Q;for(Q|=4,R=t.current;R!==null;){var s=R,o=s.child;if(R.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(R=c;R!==null;){var u=R;switch(u.tag){case 0:case 11:case 15:fs(8,u,s)}var d=u.child;if(d!==null)d.return=u,R=d;else for(;R!==null;){u=R;var f=u.sibling,p=u.return;if(ty(u),u===c){R=null;break}if(f!==null){f.return=p,R=f;break}R=p}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}R=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,R=o;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fs(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,R=y;break e}R=s.return}}var g=t.current;for(R=g;R!==null;){o=R;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,R=w;else e:for(o=g;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pa(9,l)}}catch(S){me(l,l.return,S)}if(l===o){R=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,R=k;break e}R=l.return}}if(Q=i,ir(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Ca,t)}catch{}r=!0}return r}finally{Z=n,At.transition=e}}return!1}function bp(t,e,n){e=Ci(n,e),e=Wg(t,e,1),t=Un(t,e,1),e=Qe(),t!==null&&(Qs(t,1,e),ct(t,e))}function me(t,e,n){if(t.tag===3)bp(t,t,n);else for(;e!==null;){if(e.tag===3){bp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kn===null||!Kn.has(r))){t=Ci(n,t),t=Ug(e,t,1),e=Un(e,t,1),t=Qe(),e!==null&&(Qs(e,1,t),ct(e,t));break}}e=e.return}}function ek(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qe(),t.pingedLanes|=t.suspendedLanes&n,Me===t&&(ze&n)===n&&(Se===4||Se===3&&(ze&130023424)===ze&&500>ye()-xf?wr(t,0):vf|=n),ct(t,e)}function dy(t,e){e===0&&(t.mode&1?(e=po,po<<=1,!(po&130023424)&&(po=4194304)):e=1);var n=Qe();t=xn(t,e),t!==null&&(Qs(t,e,n),ct(t,n))}function tk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dy(t,n)}function nk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),dy(t,n)}var fy;fy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||lt.current)ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ot=!1,Vw(t,e,n);ot=!!(t.flags&131072)}else ot=!1,ue&&e.flags&1048576&&gg(e,xl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jo(t,e),t=e.pendingProps;var i=ki(e,qe.current);pi(e,n),i=ff(null,e,r,t,i,n);var s=hf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,at(r)?(s=!0,yl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lf(e),i.updater=Da,e.stateNode=i,i._reactInternals=e,Fu(e,r,t,n),e=Hu(null,e,r,!0,s,n)):(e.tag=0,ue&&s&&Zd(e),Ye(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ik(r),t=zt(r,t),i){case 0:e=_u(null,e,r,t,n);break e;case 1:e=fp(null,e,r,t,n);break e;case 11:e=up(null,e,r,t,n);break e;case 14:e=dp(null,e,r,zt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),_u(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),fp(t,e,r,i,n);case 3:e:{if(Gg(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,bg(t,e),bl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ci(Error(M(423)),e),e=hp(t,e,r,n,i);break e}else if(r!==i){i=Ci(Error(M(424)),e),e=hp(t,e,r,n,i);break e}else for(mt=Wn(e.stateNode.containerInfo.firstChild),gt=e,ue=!0,Ft=null,n=wg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),r===i){e=wn(t,e,n);break e}Ye(t,e,r,n)}e=e.child}return e;case 5:return Sg(e),t===null&&Lu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Au(r,i)?o=null:s!==null&&Au(r,s)&&(e.flags|=32),Jg(t,e),Ye(t,e,o,n),e.child;case 6:return t===null&&Lu(e),null;case 13:return Yg(t,e,n);case 4:return af(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Si(e,null,r,n):Ye(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),up(t,e,r,i,n);case 7:return Ye(t,e,e.pendingProps,n),e.child;case 8:return Ye(t,e,e.pendingProps.children,n),e.child;case 12:return Ye(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,re(wl,r._currentValue),r._currentValue=o,s!==null)if(Ut(s.value,o)){if(s.children===i.children&&!lt.current){e=wn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=mn(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),zu(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(M(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),zu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ye(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pi(e,n),i=Pt(i),r=r(i),e.flags|=1,Ye(t,e,r,n),e.child;case 14:return r=e.type,i=zt(r,e.pendingProps),i=zt(r.type,i),dp(t,e,r,i,n);case 15:return Kg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Jo(t,e),e.tag=1,at(r)?(t=!0,yl(e)):t=!1,pi(e,n),Vg(e,r,i),Fu(e,r,i,n),Hu(null,e,r,!0,t,n);case 19:return Qg(t,e,n);case 22:return qg(t,e,n)}throw Error(M(156,e.tag))};function hy(t,e){return $0(t,e)}function rk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,e,n,r){return new rk(t,e,n,r)}function Sf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ik(t){if(typeof t=="function")return Sf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_d)return 11;if(t===Hd)return 14}return 2}function Jn(t,e){var n=t.alternate;return n===null?(n=Ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qo(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Sf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qr:return kr(n.children,i,s,e);case $d:o=8,i|=8;break;case cu:return t=Ot(12,n,e,i|2),t.elementType=cu,t.lanes=s,t;case uu:return t=Ot(13,n,e,i),t.elementType=uu,t.lanes=s,t;case du:return t=Ot(19,n,e,i),t.elementType=du,t.lanes=s,t;case S0:return Ia(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k0:o=10;break e;case b0:o=9;break e;case _d:o=11;break e;case Hd:o=14;break e;case Mn:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Ot(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function kr(t,e,n,r){return t=Ot(7,t,r,e),t.lanes=n,t}function Ia(t,e,n,r){return t=Ot(22,t,r,e),t.elementType=S0,t.lanes=n,t.stateNode={isHidden:!1},t}function jc(t,e,n){return t=Ot(6,t,null,e),t.lanes=n,t}function Ac(t,e,n){return e=Ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dc(0),this.expirationTimes=dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nf(t,e,n,r,i,s,o,l,a){return t=new sk(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ot(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lf(s),t}function ok(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function py(t){if(!t)return er;t=t._reactInternals;e:{if(Fr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(at(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(at(n))return pg(t,n,e)}return e}function my(t,e,n,r,i,s,o,l,a){return t=Nf(n,r,!0,t,i,s,o,l,a),t.context=py(null),n=t.current,r=Qe(),i=qn(n),s=mn(r,i),s.callback=e??null,Un(n,s,i),t.current.lanes=i,Qs(t,i,r),ct(t,r),t}function La(t,e,n,r){var i=e.current,s=Qe(),o=qn(i);return n=py(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Un(i,e,o),t!==null&&(Vt(t,i,o,s),Uo(t,i,o)),o}function jl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cf(t,e){Sp(t,e),(t=t.alternate)&&Sp(t,e)}function lk(){return null}var gy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ef(t){this._internalRoot=t}za.prototype.render=Ef.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));La(t,e,null,null)};za.prototype.unmount=Ef.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dr(function(){La(null,t,null,null)}),e[vn]=null}};function za(t){this._internalRoot=t}za.prototype.unstable_scheduleHydration=function(t){if(t){var e=q0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dn.length&&e!==0&&e<Dn[n].priority;n++);Dn.splice(n,0,t),n===0&&G0(t)}};function Mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ba(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Np(){}function ak(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=jl(o);s.call(c)}}var o=my(e,r,t,0,null,!1,!1,"",Np);return t._reactRootContainer=o,t[vn]=o.current,js(t.nodeType===8?t.parentNode:t),Dr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=jl(a);l.call(c)}}var a=Nf(t,0,!1,null,null,!1,!1,"",Np);return t._reactRootContainer=a,t[vn]=a.current,js(t.nodeType===8?t.parentNode:t),Dr(function(){La(e,a,n,r)}),a}function Fa(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=jl(o);l.call(a)}}La(e,o,t,i)}else o=ak(n,e,t,i,r);return jl(o)}U0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=es(e.pendingLanes);n!==0&&(Ud(e,n|1),ct(e,ye()),!(Q&6)&&(Ei=ye()+500,ir()))}break;case 13:Dr(function(){var r=xn(t,1);if(r!==null){var i=Qe();Vt(r,t,1,i)}}),Cf(t,1)}};Kd=function(t){if(t.tag===13){var e=xn(t,134217728);if(e!==null){var n=Qe();Vt(e,t,134217728,n)}Cf(t,134217728)}};K0=function(t){if(t.tag===13){var e=qn(t),n=xn(t,e);if(n!==null){var r=Qe();Vt(n,t,e,r)}Cf(t,e)}};q0=function(){return Z};J0=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};ku=function(t,e,n){switch(e){case"input":if(pu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Oa(r);if(!i)throw Error(M(90));C0(r),pu(r,i)}}}break;case"textarea":M0(t,n);break;case"select":e=n.value,e!=null&&ui(t,!!n.multiple,e,!1)}};R0=wf;I0=Dr;var ck={usingClientEntryPoint:!1,Events:[Zs,ti,Oa,D0,P0,wf]},Ji={findFiberByHostInstance:hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uk={bundleType:Ji.bundleType,version:Ji.version,rendererPackageName:Ji.rendererPackageName,rendererConfig:Ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=B0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ji.findFiberByHostInstance||lk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Co.isDisabled&&Co.supportsFiber)try{Ca=Co.inject(uk),nn=Co}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ck;vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mf(e))throw Error(M(200));return ok(t,e,null,n)};vt.createRoot=function(t,e){if(!Mf(t))throw Error(M(299));var n=!1,r="",i=gy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nf(t,1,!1,null,null,n,!1,r,i),t[vn]=e.current,js(t.nodeType===8?t.parentNode:t),new Ef(e)};vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=B0(e),t=t===null?null:t.stateNode,t};vt.flushSync=function(t){return Dr(t)};vt.hydrate=function(t,e,n){if(!Ba(e))throw Error(M(200));return Fa(null,t,e,!0,n)};vt.hydrateRoot=function(t,e,n){if(!Mf(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=gy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=my(e,null,t,1,n??null,i,!1,s,o),t[vn]=e.current,js(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new za(e)};vt.render=function(t,e,n){if(!Ba(e))throw Error(M(200));return Fa(null,t,e,!1,n)};vt.unmountComponentAtNode=function(t){if(!Ba(t))throw Error(M(40));return t._reactRootContainer?(Dr(function(){Fa(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};vt.unstable_batchedUpdates=wf;vt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ba(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Fa(t,e,n,!1,r)};vt.version="18.3.1-next-f1338f8080-20240426";function yy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yy)}catch(t){console.error(t)}}yy(),y0.exports=vt;var vy=y0.exports;const xy=Dd(vy);var wy,Cp=vy;wy=Cp.createRoot,Cp.hydrateRoot;var dk=t=>{switch(t){case"success":return pk;case"info":return gk;case"warning":return mk;case"error":return yk;default:return null}},fk=Array(12).fill(0),hk=({visible:t,className:e})=>C.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},C.createElement("div",{className:"sonner-spinner"},fk.map((n,r)=>C.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),pk=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mk=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),gk=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),yk=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},C.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),vk=C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},C.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),C.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),xk=()=>{let[t,e]=C.useState(document.hidden);return C.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},ed=1,wk=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:ed++,s=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:n}),{...l,...t,id:i,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0,s,o=r.then(async a=>{if(s=["resolve",a],C.isValidElement(a))i=!1,this.create({id:n,type:"default",message:a});else if(bk(a)&&!a.ok){i=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${a.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${a.status}`):e.description;this.create({id:n,type:"error",message:c,description:u})}else if(e.success!==void 0){i=!1;let c=typeof e.success=="function"?await e.success(a):e.success,u=typeof e.description=="function"?await e.description(a):e.description;this.create({id:n,type:"success",message:c,description:u})}}).catch(async a=>{if(s=["reject",a],e.error!==void 0){i=!1;let c=typeof e.error=="function"?await e.error(a):e.error,u=typeof e.description=="function"?await e.description(a):e.description;this.create({id:n,type:"error",message:c,description:u})}}).finally(()=>{var a;i&&(this.dismiss(n),n=void 0),(a=e.finally)==null||a.call(e)}),l=()=>new Promise((a,c)=>o.then(()=>s[0]==="reject"?c(s[1]):a(s[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||ed++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},ft=new wk,kk=(t,e)=>{let n=(e==null?void 0:e.id)||ed++;return ft.addToast({title:t,...e,id:n}),n},bk=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Sk=kk,Nk=()=>ft.toasts,J=Object.assign(Sk,{success:ft.success,info:ft.info,warning:ft.warning,error:ft.error,custom:ft.custom,message:ft.message,promise:ft.promise,dismiss:ft.dismiss,loading:ft.loading},{getHistory:Nk});function Ck(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Ck(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Eo(t){return t.label!==void 0}var Ek=3,Mk="32px",Ep=4e3,Tk=356,Ok=14,jk=20,Ak=200;function Dk(...t){return t.filter(Boolean).join(" ")}var Pk=t=>{var e,n,r,i,s,o,l,a,c,u,d;let{invert:f,toast:p,unstyled:m,interacting:v,setHeights:x,visibleToasts:y,heights:g,index:w,toasts:k,expanded:S,removeToast:b,defaultRichColors:E,closeButton:T,style:I,cancelButtonStyle:z,actionButtonStyle:ee,className:K="",descriptionClassName:le="",duration:kt,position:ln,gap:_e,loadingIcon:ve,expandByDefault:D,classNames:A,icons:B,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:$,cn:Y}=t,[X,Ne]=C.useState(!1),[Ge,ae]=C.useState(!1),[tc,Bi]=C.useState(!1),[Fi,$i]=C.useState(!1),[Mv,dh]=C.useState(!1),[Tv,nc]=C.useState(0),[Ov,fh]=C.useState(0),so=C.useRef(p.duration||kt||Ep),hh=C.useRef(null),ar=C.useRef(null),jv=w===0,Av=w+1<=y,bt=p.type,_r=p.dismissible!==!1,Dv=p.className||"",Pv=p.descriptionClassName||"",oo=C.useMemo(()=>g.findIndex(V=>V.toastId===p.id)||0,[g,p.id]),Rv=C.useMemo(()=>{var V;return(V=p.closeButton)!=null?V:T},[p.closeButton,T]);C.useMemo(()=>p.duration||kt||Ep,[p.duration,kt]);let rc=C.useRef(0),Hr=C.useRef(0),ph=C.useRef(0),lo=C.useRef(null),[Iv,Lv]=ln.split("-"),mh=C.useMemo(()=>g.reduce((V,te,ce)=>ce>=oo?V:V+te.height,0),[g,oo]),gh=xk(),zv=p.invert||f,ic=bt==="loading";Hr.current=C.useMemo(()=>oo*_e+mh,[oo,mh]),C.useEffect(()=>{Ne(!0)},[]),C.useEffect(()=>{let V=ar.current;if(V){let te=V.getBoundingClientRect().height;return fh(te),x(ce=>[{toastId:p.id,height:te,position:p.position},...ce]),()=>x(ce=>ce.filter(It=>It.toastId!==p.id))}},[x,p.id]),C.useLayoutEffect(()=>{if(!X)return;let V=ar.current,te=V.style.height;V.style.height="auto";let ce=V.getBoundingClientRect().height;V.style.height=te,fh(ce),x(It=>It.find(qt=>qt.toastId===p.id)?It.map(qt=>qt.toastId===p.id?{...qt,height:ce}:qt):[{toastId:p.id,height:ce,position:p.position},...It])},[X,p.title,p.description,x,p.id]);let Sn=C.useCallback(()=>{ae(!0),nc(Hr.current),x(V=>V.filter(te=>te.toastId!==p.id)),setTimeout(()=>{b(p)},Ak)},[p,b,x,Hr]);C.useEffect(()=>{if(p.promise&&bt==="loading"||p.duration===1/0||p.type==="loading")return;let V;return S||v||$&&gh?(()=>{if(ph.current<rc.current){let te=new Date().getTime()-rc.current;so.current=so.current-te}ph.current=new Date().getTime()})():so.current!==1/0&&(rc.current=new Date().getTime(),V=setTimeout(()=>{var te;(te=p.onAutoClose)==null||te.call(p,p),Sn()},so.current)),()=>clearTimeout(V)},[S,v,p,bt,$,gh,Sn]),C.useEffect(()=>{p.delete&&Sn()},[Sn,p.delete]);function Bv(){var V,te,ce;return B!=null&&B.loading?C.createElement("div",{className:Y(A==null?void 0:A.loader,(V=p==null?void 0:p.classNames)==null?void 0:V.loader,"sonner-loader"),"data-visible":bt==="loading"},B.loading):ve?C.createElement("div",{className:Y(A==null?void 0:A.loader,(te=p==null?void 0:p.classNames)==null?void 0:te.loader,"sonner-loader"),"data-visible":bt==="loading"},ve):C.createElement(hk,{className:Y(A==null?void 0:A.loader,(ce=p==null?void 0:p.classNames)==null?void 0:ce.loader),visible:bt==="loading"})}return C.createElement("li",{tabIndex:0,ref:ar,className:Y(K,Dv,A==null?void 0:A.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,A==null?void 0:A.default,A==null?void 0:A[bt],(n=p==null?void 0:p.classNames)==null?void 0:n[bt]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:E,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":X,"data-promise":!!p.promise,"data-swiped":Mv,"data-removed":Ge,"data-visible":Av,"data-y-position":Iv,"data-x-position":Lv,"data-index":w,"data-front":jv,"data-swiping":tc,"data-dismissible":_r,"data-type":bt,"data-invert":zv,"data-swipe-out":Fi,"data-expanded":!!(S||D&&X),style:{"--index":w,"--toasts-before":w,"--z-index":k.length-w,"--offset":`${Ge?Tv:Hr.current}px`,"--initial-height":D?"auto":`${Ov}px`,...I,...p.style},onPointerDown:V=>{ic||!_r||(hh.current=new Date,nc(Hr.current),V.target.setPointerCapture(V.pointerId),V.target.tagName!=="BUTTON"&&(Bi(!0),lo.current={x:V.clientX,y:V.clientY}))},onPointerUp:()=>{var V,te,ce,It;if(Fi||!_r)return;lo.current=null;let qt=Number(((V=ar.current)==null?void 0:V.style.getPropertyValue("--swipe-amount").replace("px",""))||0),sc=new Date().getTime()-((te=hh.current)==null?void 0:te.getTime()),Fv=Math.abs(qt)/sc;if(Math.abs(qt)>=jk||Fv>.11){nc(Hr.current),(ce=p.onDismiss)==null||ce.call(p,p),Sn(),$i(!0),dh(!1);return}(It=ar.current)==null||It.style.setProperty("--swipe-amount","0px"),Bi(!1)},onPointerMove:V=>{var te,ce,It;if(!lo.current||!_r)return;let qt=V.clientY-lo.current.y,sc=((te=window.getSelection())==null?void 0:te.toString().length)>0;Number(((ce=ar.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount").replace("px",""))||0)>0&&dh(!0),!sc&&((It=ar.current)==null||It.style.setProperty("--swipe-amount",`${Math.max(0,qt)}px`))}},Rv&&!p.jsx?C.createElement("button",{"aria-label":ie,"data-disabled":ic,"data-close-button":!0,onClick:ic||!_r?()=>{}:()=>{var V;Sn(),(V=p.onDismiss)==null||V.call(p,p)},className:Y(A==null?void 0:A.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(s=B==null?void 0:B.close)!=null?s:vk):null,p.jsx||C.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:C.createElement(C.Fragment,null,bt||p.icon||p.promise?C.createElement("div",{"data-icon":"",className:Y(A==null?void 0:A.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Bv():null,p.type!=="loading"?p.icon||(B==null?void 0:B[bt])||dk(bt):null):null,C.createElement("div",{"data-content":"",className:Y(A==null?void 0:A.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},C.createElement("div",{"data-title":"",className:Y(A==null?void 0:A.title,(a=p==null?void 0:p.classNames)==null?void 0:a.title)},typeof p.title=="function"?p.title():p.title),p.description?C.createElement("div",{"data-description":"",className:Y(le,Pv,A==null?void 0:A.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),C.isValidElement(p.cancel)?p.cancel:p.cancel&&Eo(p.cancel)?C.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||z,onClick:V=>{var te,ce;Eo(p.cancel)&&_r&&((ce=(te=p.cancel).onClick)==null||ce.call(te,V),Sn())},className:Y(A==null?void 0:A.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,C.isValidElement(p.action)?p.action:p.action&&Eo(p.action)?C.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||ee,onClick:V=>{var te,ce;Eo(p.action)&&((ce=(te=p.action).onClick)==null||ce.call(te,V),!V.defaultPrevented&&Sn())},className:Y(A==null?void 0:A.actionButton,(d=p==null?void 0:p.classNames)==null?void 0:d.actionButton)},p.action.label):null))};function Mp(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var Rk=j.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:a,theme:c="light",richColors:u,duration:d,style:f,visibleToasts:p=Ek,toastOptions:m,dir:v=Mp(),gap:x=Ok,loadingIcon:y,icons:g,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:k,cn:S=Dk}=t,[b,E]=C.useState([]),T=C.useMemo(()=>Array.from(new Set([r].concat(b.filter($=>$.position).map($=>$.position)))),[b,r]),[I,z]=C.useState([]),[ee,K]=C.useState(!1),[le,kt]=C.useState(!1),[ln,_e]=C.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ve=C.useRef(null),D=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=C.useRef(null),B=C.useRef(!1),ie=C.useCallback($=>{E(Y=>{var X;return(X=Y.find(Ne=>Ne.id===$.id))!=null&&X.delete||ft.dismiss($.id),Y.filter(({id:Ne})=>Ne!==$.id)})},[]);return C.useEffect(()=>ft.subscribe($=>{if($.dismiss){E(Y=>Y.map(X=>X.id===$.id?{...X,delete:!0}:X));return}setTimeout(()=>{xy.flushSync(()=>{E(Y=>{let X=Y.findIndex(Ne=>Ne.id===$.id);return X!==-1?[...Y.slice(0,X),{...Y[X],...$},...Y.slice(X+1)]:[$,...Y]})})})}),[]),C.useEffect(()=>{if(c!=="system"){_e(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?_e("dark"):_e("light")),typeof window>"u")return;let $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:Y})=>{_e(Y?"dark":"light")})}catch{$.addListener(({matches:X})=>{try{_e(X?"dark":"light")}catch(Ne){console.error(Ne)}})}},[c]),C.useEffect(()=>{b.length<=1&&K(!1)},[b]),C.useEffect(()=>{let $=Y=>{var X,Ne;i.every(Ge=>Y[Ge]||Y.code===Ge)&&(K(!0),(X=ve.current)==null||X.focus()),Y.code==="Escape"&&(document.activeElement===ve.current||(Ne=ve.current)!=null&&Ne.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[i]),C.useEffect(()=>{if(ve.current)return()=>{A.current&&(A.current.focus({preventScroll:!0}),A.current=null,B.current=!1)}},[ve.current]),C.createElement("section",{"aria-label":`${w} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"},T.map(($,Y)=>{var X;let[Ne,Ge]=$.split("-");return b.length?C.createElement("ol",{key:$,dir:v==="auto"?Mp():v,tabIndex:-1,ref:ve,className:l,"data-sonner-toaster":!0,"data-theme":ln,"data-y-position":Ne,"data-lifted":ee&&b.length>1&&!s,"data-x-position":Ge,style:{"--front-toast-height":`${((X=I[0])==null?void 0:X.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||Mk,"--width":`${Tk}px`,"--gap":`${x}px`,...f},onBlur:ae=>{B.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(B.current=!1,A.current&&(A.current.focus({preventScroll:!0}),A.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||B.current||(B.current=!0,A.current=ae.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{le||K(!1)},onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||kt(!0)},onPointerUp:()=>kt(!1)},b.filter(ae=>!ae.position&&Y===0||ae.position===$).map((ae,tc)=>{var Bi,Fi;return C.createElement(Pk,{key:ae.id,icons:g,index:tc,toast:ae,defaultRichColors:u,duration:(Bi=m==null?void 0:m.duration)!=null?Bi:d,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:p,closeButton:(Fi=m==null?void 0:m.closeButton)!=null?Fi:o,interacting:le,position:$,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:ie,toasts:b.filter($i=>$i.position==ae.position),heights:I.filter($i=>$i.position==ae.position),setHeights:z,expandByDefault:s,gap:x,loadingIcon:y,expanded:ee,pauseWhenPageIsHidden:k,cn:S})})):null}))});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ik={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),H=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:a,...c},u)=>j.createElement("svg",{ref:u,...Ik,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Lk(t)}`,l].join(" "),...c},[...e.map(([d,f])=>j.createElement(d,f)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=H("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=H("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=H("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=H("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=H("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=H("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=H("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=H("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=H("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=H("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=H("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=H("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=H("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=H("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=H("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=H("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=H("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=H("Glasses",[["circle",{cx:"6",cy:"15",r:"4",key:"vux9w4"}],["circle",{cx:"18",cy:"15",r:"4",key:"18o8ve"}],["path",{d:"M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2",key:"1ag4bs"}],["path",{d:"M2.5 13 5 7c.7-1.3 1.4-2 3-2",key:"1hm1gs"}],["path",{d:"M21.5 13 19 7c-.7-1.3-1.5-2-3-2",key:"1r31ai"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=H("HandHeart",[["path",{d:"M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1ifwr1"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"17abbs"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-5 1.8c0 1.2.8 2 1.5 2.8L16 12Z",key:"1h3036"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=H("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=H("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=H("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=H("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=H("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=H("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=H("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=H("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=H("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=H("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=H("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=H("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=H("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=H("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=H("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=H("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=H("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=H("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=H("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=H("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=H("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=H("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=H("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=H("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Op=t=>{let e;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const p=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(m=>m(e,p))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(sb?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,a);return a},ob=t=>t?Op(t):Op;var Ty={exports:{}},Oy={},jy={exports:{}},Ay={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mi=j;function lb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ab=typeof Object.is=="function"?Object.is:lb,cb=Mi.useState,ub=Mi.useEffect,db=Mi.useLayoutEffect,fb=Mi.useDebugValue;function hb(t,e){var n=e(),r=cb({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return db(function(){i.value=n,i.getSnapshot=e,Pc(i)&&s({inst:i})},[t,n,e]),ub(function(){return Pc(i)&&s({inst:i}),t(function(){Pc(i)&&s({inst:i})})},[t]),fb(n),n}function Pc(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ab(t,n)}catch{return!0}}function pb(t,e){return e()}var mb=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pb:hb;Ay.useSyncExternalStore=Mi.useSyncExternalStore!==void 0?Mi.useSyncExternalStore:mb;jy.exports=Ay;var gb=jy.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $a=j,yb=gb;function vb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xb=typeof Object.is=="function"?Object.is:vb,wb=yb.useSyncExternalStore,kb=$a.useRef,bb=$a.useEffect,Sb=$a.useMemo,Nb=$a.useDebugValue;Oy.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=kb(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Sb(function(){function a(p){if(!c){if(c=!0,u=p,p=r(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return d=m}return d=p}if(m=d,xb(u,p))return m;var v=r(p);return i!==void 0&&i(m,v)?m:(u=p,d=v)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return a(e())},f===null?void 0:function(){return a(f())}]},[e,n,r,i]);var l=wb(t,s[0],s[1]);return bb(function(){o.hasValue=!0,o.value=l},[l]),Nb(l),l};Ty.exports=Oy;var Cb=Ty.exports;const Eb=Dd(Cb),Dy={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:Mb}=C,{useSyncExternalStoreWithSelector:Tb}=Eb;let jp=!1;const Ob=t=>t;function jb(t,e=Ob,n){(Dy?"production":void 0)!=="production"&&n&&!jp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),jp=!0);const r=Tb(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Mb(r),r}const Ap=t=>{(Dy?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?ob(t):t,n=(r,i)=>jb(e,r,i);return Object.assign(n,e),n},If=t=>t?Ap(t):Ap,Ab=[{id:"bamboo",name:"Bamboo",emoji:"",growthRate:.1,points:{earth:5,carbon:3}},{id:"tree",name:"Tree",emoji:"",growthRate:.05,points:{earth:10,carbon:8}},{id:"flower",name:"Flower",emoji:"",growthRate:.15,points:{earth:3,hand:2}}],Dl=[{id:"regenerative-design",name:"Regenerative Design",description:"Learn the principles of regenerative systems and holistic design",cost:50,points:{earth:15,hand:10}},{id:"token-economics",name:"Token Economics",description:"Master the art of sustainable token economies and incentive design",cost:75,points:{space:20,carbon:10}},{id:"community-building",name:"Community Building",description:"Develop skills in fostering regenerative communities",cost:60,points:{hand:25,earth:5}},{id:"defi-mastery",name:"DeFi Mastery",description:"Learn advanced decentralized finance mechanisms",cost:100,points:{space:30,hand:10}}],Py=[{id:"regenerative-farm",name:"Regenerative Farm Network",description:"Building a network of regenerative farms to restore soil health and biodiversity while producing nutrient-dense food.",image:"https://images.unsplash.com/photo-1500651230702-0e2d8a49d4ad?auto=format&fit=crop&q=80&w=1920",raised:15e3,supporters:234,link:"https://giveth.io/project/regenerative-farm-network",category:"Agriculture"},{id:"ocean-cleanup",name:"Ocean Cleanup DAO",description:"Decentralized organization focused on removing plastic from our oceans using blockchain technology for transparency.",image:"https://images.unsplash.com/photo-1484291470158-b8f8d608850d?auto=format&fit=crop&q=80&w=1920",raised:28e3,supporters:456,link:"https://giveth.io/project/ocean-cleanup-dao",category:"Environment"},{id:"solar-villages",name:"Solar Villages Initiative",description:"Bringing renewable energy to remote villages through community-owned solar installations.",image:"https://images.unsplash.com/photo-1497440001374-f658d8994ac3?auto=format&fit=crop&q=80&w=1920",raised:42e3,supporters:678,link:"https://giveth.io/project/solar-villages",category:"Energy"},{id:"refi-education",name:"ReFi Education Platform",description:"Free education platform teaching regenerative finance and sustainable economics to communities worldwide.",image:"https://images.unsplash.com/photo-1509062522246-3755977927d7?auto=format&fit=crop&q=80&w=1920",raised:35e3,supporters:543,link:"https://giveth.io/project/refi-education",category:"Education"}],Ae=If(t=>({points:{earth:0,space:0,hand:0,carbon:0},currentLocation:"ethdenver",handBalance:{balance:100,donated:0},wallet:{balances:{REGEN:1e3,USDGLO:0}},walletConnected:!1,walletAddress:"",gardenPlots:Array(6).fill({plant:null,growth:0}),logs:["Welcome to Regen Trail! Your regenerative journey begins..."],skills:Dl.map(e=>({id:e.id,level:0,experience:0})),inventory:[],donationRound:0,completedActivities:{},addLog:e=>t(n=>({logs:[...n.logs,e]})),addPoints:e=>t(n=>({points:Object.entries(e).reduce((r,[i,s])=>({...r,[i]:(r[i]||0)+(s||0)}),{...n.points})})),setLocation:e=>t(n=>(n.addLog(`Traveling to ${e}...`),{currentLocation:e})),addHand:e=>t(n=>({handBalance:{...n.handBalance,balance:n.handBalance.balance+e},logs:[...n.logs,`Earned ${e} HAND token!`]})),donateHand:e=>t(n=>n.handBalance.balance<e?(J.error("Not enough HAND tokens!"),n):{handBalance:{balance:n.handBalance.balance-e,donated:n.handBalance.donated+e},points:{...n.points,hand:n.points.hand+Math.floor(e/10)},logs:[...n.logs,`Lent ${e} HAND tokens to the community!`]}),connectWallet:()=>t(e=>{if(e.walletConnected)return e;const n="0x"+Math.random().toString(16).slice(2,14);return{walletConnected:!0,walletAddress:n,logs:[...e.logs,`Connected wallet ${n}`]}}),plantSeed:e=>t(n=>{if(n.handBalance.balance<10)return J.error("Not enough HAND tokens! Need 10  to plant"),n;const r=Ab,i=r[Math.floor(Math.random()*r.length)],s=[...n.gardenPlots];return s[e]={plant:i,growth:0},{gardenPlots:s,handBalance:{...n.handBalance,balance:n.handBalance.balance-10},points:{...n.points,earth:n.points.earth+5,hand:n.points.hand+3},logs:[...n.logs,`Planted ${i.name} in plot ${e+1}`]}}),waterPlant:e=>t(n=>{const r=n.gardenPlots[e];if(!r.plant)return n;if(n.handBalance.balance<5)return J.error("Not enough HAND tokens! Need 5  to water"),n;const i=Math.min(1,r.growth+r.plant.growthRate),s=[...n.gardenPlots];if(s[e]={...r,growth:i},i>=1){const o=r.plant.points;return J.success(`${r.plant.name} fully grown!`,{description:`Earned ${Object.entries(o).map(([l,a])=>`${a} ${l}`).join(", ")}`}),s[e]={plant:null,growth:0},{gardenPlots:s,handBalance:{...n.handBalance,balance:n.handBalance.balance-5+20},points:Object.entries(o).reduce((l,[a,c])=>({...l,[a]:l[a]+(c||0)}),{...n.points}),logs:[...n.logs,`Harvested fully grown ${r.plant.name}!`]}}return{gardenPlots:s,handBalance:{...n.handBalance,balance:n.handBalance.balance-5},logs:[...n.logs,`Watered ${r.plant.name} in plot ${e+1}`]}}),trainSkill:e=>t(n=>{const r=Dl.find(a=>a.id===e);if(!r)return n;if(n.handBalance.balance<r.cost)return J.error("Not enough HAND tokens!"),n;const i=n.skills.find(a=>a.id===e);if(!i||i.level>=10)return J.error("Skill already mastered!"),n;const s=i.experience+1,o=s>=i.level+1,l=n.skills.map(a=>a.id!==e?a:{...a,level:o?a.level+1:a.level,experience:o?0:s});return o&&J.success(`${r.name} leveled up!`,{description:`Reached level ${i.level+1}`}),{skills:l,handBalance:{...n.handBalance,balance:n.handBalance.balance-r.cost},points:Object.entries(r.points).reduce((a,[c,u])=>({...a,[c]:a[c]+(u||0)}),{...n.points}),logs:[...n.logs,`Training ${r.name}... ${o?"Level up!":""}`]}}),purchaseItem:e=>t(n=>n.handBalance.balance<e.cost?(J.error("Not enough HAND tokens!"),n):{handBalance:{...n.handBalance,balance:n.handBalance.balance-e.cost},inventory:[...n.inventory,e],points:Object.entries(e.points).reduce((r,[i,s])=>({...r,[i]:r[i]+(s||0)}),{...n.points}),logs:[...n.logs,`Purchased ${e.name} from the store!`]}),donateToProject:async(e,n)=>{const r=Py.find(s=>s.id===e);if(!r)return;t(s=>({wallet:{...s.wallet,balances:{...s.wallet.balances,REGEN:s.wallet.balances.REGEN-n}},points:{...s.points,hand:s.points.hand+Math.floor(n/10),earth:s.points.earth+Math.floor(n/20)},logs:[...s.logs,`Donated ${n} REGEN to ${r.name}`]}));const i=new CustomEvent("donation",{detail:{amount:n,projectId:e}});window.dispatchEvent(i),J.success(`Donated ${n} REGEN to ${r.name}!`,{description:"Thank you for supporting regenerative projects!"})},addGloDollars:e=>t(n=>({wallet:{...n.wallet,balances:{...n.wallet.balances,USDGLO:(n.wallet.balances.USDGLO||0)+e}}})),completeDonationRound:()=>t(e=>({donationRound:e.donationRound+1})),markActivityComplete:(e,n)=>t(r=>({completedActivities:{...r.completedActivities,[e]:[...r.completedActivities[e]||[],n]}})),isActivityCompleted:(e,n)=>r=>{var i;return((i=r.completedActivities[e])==null?void 0:i.includes(n))||!1}})),Db=({location:t,onSelect:e})=>{const r=Ae(i=>i.currentLocation)===t.id;return h.jsxs("div",{className:`relative overflow-hidden rounded-xl transition-all duration-300 ${r?"ring-4 ring-emerald-400":"hover:ring-2 ring-emerald-200"}`,onClick:e,children:[h.jsx("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),h.jsxs("div",{className:"absolute bottom-0 p-4 text-white",children:[h.jsx("h3",{className:"text-xl font-bold",children:t.name}),h.jsx("p",{className:"text-sm opacity-90",children:t.description})]})]})},Pb=({emojis:t,onComplete:e})=>{const[n,r]=j.useState([]);return j.useEffect(()=>{const s=[];for(let l=0;l<12;l++)s.push({id:l,x:0,y:0,emoji:t[Math.floor(Math.random()*t.length)],rotation:Math.random()*360,scale:.5+Math.random()*.5});r(s);const o=setTimeout(()=>{r([]),e()},1e3);return()=>clearTimeout(o)},[t,e]),h.jsx("div",{className:"fixed inset-0 pointer-events-none",children:n.map(i=>h.jsx("div",{className:"absolute left-1/2 top-1/2 transition-all duration-1000",style:{transform:`translate(-50%, -50%) translate(${i.x}px, ${i.y}px) rotate(${i.rotation}deg) scale(${i.scale})`,animation:"particle 1s ease-out forwards"},children:i.emoji},i.id))})},Rb=({text:t})=>h.jsxs("div",{className:"fixed top-4 right-4 milestone-notification bg-white/90 backdrop-blur-sm shadow-lg rounded-lg p-4 flex items-center gap-3",children:[h.jsx(Tf,{className:"text-emerald-500"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Submitting to KarmaGap"}),h.jsx("div",{className:"text-emerald-700 font-semibold",children:t})]})]}),Ib=({quests:t})=>{const e=Ae(c=>c.addPoints),[n,r]=j.useState(!1),[i,s]=j.useState([]),[o,l]=j.useState(null),a=async c=>{if(!c.completed){if(c.milestones){for(const u of c.milestones)l(u),await new Promise(d=>setTimeout(d,1500));l(null)}e(c.points),s(c.rewards),r(!0),J.success(`Quest Complete: ${c.title}`,{description:`Earned: ${Object.entries(c.points).map(([u,d])=>`${d} ${u}`).join(", ")}`})}};return h.jsxs("div",{className:"space-y-4",children:[o&&h.jsx(Rb,{text:o}),t.map(c=>h.jsxs("div",{className:`quest-card bg-black/30 rounded-lg p-6 border border-emerald-500/20 backdrop-blur-sm transition-all duration-300 ${c.completed?"opacity-50":"cursor-pointer hover:border-emerald-400/40 hover:shadow-lg hover:shadow-emerald-500/20"}`,onClick:()=>!c.completed&&a(c),children:[h.jsx("h4",{className:"font-bold text-xl text-emerald-400 mb-3 quest-title",children:c.title}),h.jsx("p",{className:"text-gray-200 text-base mb-3 leading-relaxed",children:c.description}),c.story&&h.jsx("p",{className:"text-emerald-300 italic mb-4 leading-relaxed",children:c.story}),h.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:Object.entries(c.points).map(([u,d])=>h.jsxs("span",{className:"px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-300 text-sm font-medium border border-emerald-500/20",children:["+",d," ",u]},u))}),h.jsx("div",{className:"mt-4 flex gap-2",children:c.rewards.map((u,d)=>h.jsx("span",{className:"text-2xl filter drop-shadow-glow animate-float",children:u},d))})]},c.id)),n&&h.jsx(Pb,{emojis:i,onComplete:()=>r(!1)})]})},Zo={ethdenver:{id:"ethdenver",name:"ETHDenver 2024",description:"The premier Web3 innovation festival in the Rocky Mountains",image:"https://images.unsplash.com/photo-1634507307799-ace9b49840b7?auto=format&fit=crop&q=80&w=1920",storyIntro:"Welcome to the vibrant heart of blockchain innovation. The crisp mountain air carries whispers of revolutionary ideas as BUIDLers gather for the world's largest Web3 #BUIDLathon...",travelText:"The Modal Motorcoach transforms into a snowmobile as we glide through the Rocky Mountains! ",date:"February 23 - March 2, 2024",activities:[{id:"buidlweek",name:"BUIDL Week",description:"Join the pre-event workshops and hackathon preparation",rewards:["",""],points:{space:30,hand:20},story:["Arriving at the Sports Castle, you feel the electric energy of innovation...","Fellow BUIDLers from around the world gather to shape the future...","The workshops begin, each session unlocking new possibilities..."]},{id:"hackathon",name:"ReFi Hackathon",description:"Build regenerative solutions during the main hackathon",rewards:["",""],points:{earth:50,space:40},story:["Your team assembles in the hacker space, screens glowing with potential...","Ideas flow as freely as the coffee, each line of code a step toward regeneration...","The mentors provide guidance, helping shape your vision..."]},{id:"sporkdao",name:"SporkDAO Dinner",description:"Network with fellow regenerators over a community dinner",rewards:["",""],points:{hand:25,earth:15},story:["The aroma of locally-sourced food fills the air...","Conversations spark between bites, new collaborations forming...","The community strengthens with each shared meal..."]}],quests:[{id:"eth-1",title:"ReFi Innovation Challenge",description:"Build a sustainable solution during the hackathon",points:{space:50,carbon:20},completed:!1,rewards:["",""],story:"Your code could be the key to unlocking a more sustainable future...",milestones:["Form your team","Submit project proposal","Present to the judges"]}]},solarpunk:{id:"solarpunk",name:"SolarPunk Festival",description:"A celebration of sustainable technology and optimistic futures",image:"https://images.unsplash.com/photo-1465254596705-1ef61f93aa21?auto=format&fit=crop&q=80&w=1920",storyIntro:"Welcome to a vibrant fusion of art, technology, and ecological harmony. Solar-powered stages pulse with music while innovators showcase a future where nature and technology dance in perfect balance...",travelText:"The Modal Motorcoach transforms into a solar-powered hovercraft, gliding silently through fields of solar flowers! ",date:"September 21-23, 2024",activities:[{id:"solarhack",name:"Solar Hackathon",description:"Build solar-powered gadgets and sustainable tech",rewards:["",""],points:{space:40,earth:30},story:["The solar lab hums with creative energy...","Your team combines salvaged tech with cutting-edge solar cells...","The prototype springs to life, powered by pure sunlight..."]},{id:"ecostage",name:"Eco-Stage Performance",description:"Experience music powered entirely by renewable energy",rewards:["",""],points:{earth:25,hand:35},story:["The stage's solar panels glisten in the setting sun...","Musicians create harmony with nature's own rhythms...","The crowd dances, powered by sustainable vibes..."]},{id:"futurefashion",name:"Future Fashion Show",description:"Showcase sustainable and tech-enhanced fashion",rewards:["",""],points:{hand:30,carbon:20},story:["Models wear clothing that generates its own energy...","Smart fabrics shimmer with collected solar power...","The future of fashion reveals itself: sustainable and stunning..."]}],quests:[{id:"solar-1",title:"Solar Innovation Challenge",description:"Create a solar-powered solution for daily life",points:{space:45,earth:35},completed:!1,rewards:["",""],story:"Your innovation could help bridge the gap between nature and technology...",milestones:["Design solar solution","Build prototype","Demonstrate impact"]}]},cryptofest:{id:"cryptofest",name:"Tulum Crypto Fest",description:"A fusion of ancient wisdom and future finance in the heart of the Mayan Riviera",image:"https://images.unsplash.com/photo-1509087859087-a384654eca4d?auto=format&fit=crop&q=80&w=1920",storyIntro:"Welcome to where ancient wisdom meets future finance. The jungle whispers secrets of sustainable innovation...",travelText:"The Modal Motorcoach transforms into a jungle cruiser as we venture into the mystical Mayan paradise! ",date:"December 12-15, 2024",activities:[{id:"beach-welcome",name:"Beach Welcome Day",description:"Join the opening ceremonies at Papaya Playa Project",rewards:["",""],points:{hand:30,earth:20},story:["The waves crash in rhythm with your heartbeat...","Connect with fellow regenerators on the pristine beach...","The welcome ceremony begins as the sun sets..."]},{id:"jungle-conference",name:"Jungle Conference",description:"Attend talks and workshops at KAN Tulum",rewards:["",""],points:{space:40,carbon:30},story:["Morning yoga and meditation center your spirit...","Breakthrough ideas emerge in the jungle setting...","The ancient and modern worlds merge in harmony..."]}],quests:[{id:"tulum-1",title:"Jungle Innovation",description:"Develop sustainable solutions inspired by nature",points:{earth:50,space:40},completed:!1,rewards:["",""],story:"Let the wisdom of the jungle guide your innovation...",milestones:["Morning meditation","Biomimicry workshop","Project presentation"]}]},devcon:{id:"devcon",name:"Devcon Bangkok",description:"The annual Ethereum family reunion in the vibrant heart of Thailand",image:"https://images.unsplash.com/photo-1583395838144-c94d7f5b0c6c?auto=format&fit=crop&q=80&w=1920",storyIntro:"Welcome to the bustling streets of Bangkok, where ancient temples meet cutting-edge blockchain innovation. The air is thick with possibility and the scent of street food...",travelText:"The Modal Motorcoach transforms into a tuk-tuk, weaving through the neon-lit streets of Bangkok! ",date:"October 15-18, 2024",activities:[{id:"morning-ceremony",name:"Temple Blessing",description:"Start your Devcon journey with a traditional Thai blessing",rewards:["",""],points:{hand:25,earth:20},story:["The morning mist parts as you approach the ancient temple...","Monks chant blessings for the future of technology...","The fusion of tradition and innovation fills you with purpose..."]},{id:"eth-scaling",name:"Scaling Summit",description:"Deep dive into Ethereum scaling solutions and Layer 2s",rewards:["",""],points:{space:45,carbon:25},story:["The conference hall buzzes with technical discussions...","Diagrams of rollups and zkproofs fill whiteboards...","A sustainable scaling future becomes clearer..."]},{id:"night-market",name:"Crypto Night Market",description:"Experience a traditional Thai night market with a Web3 twist",rewards:["",""],points:{hand:30,earth:15},story:["Lanterns illuminate the bustling market streets...","Local artisans showcase NFT-enhanced crafts...","The aroma of street food mingles with talks of tokenomics..."]}],quests:[{id:"devcon-1",title:"Bangkok Bridge Builder",description:"Connect traditional communities with Web3 solutions",points:{hand:40,space:35},completed:!1,rewards:["",""],story:"Bridge the gap between ancient wisdom and blockchain innovation...",milestones:["Learn local customs","Design inclusive solution","Present to community"]}]}},Lb=({locationId:t,travelText:e,onComplete:n})=>{var z,ee;const[r,i]=j.useState(0),[s,o]=j.useState(!1),[l,a]=j.useState(null),[c,u]=j.useState([]),[d,f]=j.useState(0),[p,m]=j.useState(!1),[v,x]=j.useState(0),{markActivityComplete:y,isActivityCompleted:g,addLog:w}=Ae(),k=Zo[t],S=(z=k==null?void 0:k.activities)==null?void 0:z.find(K=>K.id===l);j.useEffect(()=>{if(!s){const K=setInterval(()=>{i(le=>le>=100?(clearInterval(K),setTimeout(()=>o(!0),500),100):le+2)},50);return()=>clearInterval(K)}},[s]),j.useEffect(()=>{l&&S&&(u(S.story||[]),f(0),x(0))},[l,S]),j.useEffect(()=>{c.length>0&&x(d/c.length*100)},[d,c.length]);const b=K=>{if(g(t,K)){J.info("Already completed this activity!",{description:"Click the refresh icon to start again!"});return}a(K)},E=()=>{d<c.length-1?f(K=>K+1):l&&(y(t,l),m(!0))},T=()=>{S&&(J.success(h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{children:"Activity Complete! "}),h.jsxs("div",{className:"text-sm text-gray-400",children:[S.name," has been marked as completed"]})]})),w(`Completed ${S.name} at ${k.name}`)),m(!1),a(null),u([]),f(0)},I=K=>{a(K),x(0),f(0),J.success("Starting activity again! ")};return h.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]",children:h.jsx("div",{className:"bg-gradient-to-br from-emerald-900/90 to-purple-900/90 rounded-xl max-w-2xl w-full border border-emerald-500/20",children:s?p?h.jsx("div",{className:"p-8 space-y-6",children:h.jsxs("div",{className:"text-center",children:[h.jsx(jf,{size:48,className:"text-emerald-400 mx-auto mb-4 animate-bounce"}),h.jsx("h3",{className:"text-2xl font-bold text-emerald-400 mb-2",children:"Activity Complete! "}),h.jsx("p",{className:"text-gray-300 mb-6",children:"Would you like to mark this activity as completed?"}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:T,className:"action-button px-6 py-2 text-emerald-400 flex-1",children:"Complete Activity"}),h.jsx("button",{onClick:()=>{m(!1),a(null),u([]),f(0)},className:"px-6 py-2 text-gray-400 hover:text-emerald-400 transition-colors",children:"Skip"})]})]})}):l?h.jsxs("div",{className:"p-8 space-y-6",children:[h.jsxs("button",{onClick:()=>a(null),className:"flex items-center gap-2 text-gray-400 hover:text-emerald-400 transition-colors",children:[h.jsx(_k,{size:20}),"Back to activities"]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-2xl font-bold text-emerald-400",children:S==null?void 0:S.name}),h.jsx("div",{className:"h-2 bg-black/20 rounded-full overflow-hidden mb-4",children:h.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300",style:{width:`${v}%`}})}),h.jsx("div",{className:"bg-black/20 p-6 rounded-lg border border-emerald-500/10",children:h.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:c[d]})}),h.jsx("button",{onClick:E,className:"action-button px-6 py-2 text-emerald-400 w-full",children:d<c.length-1?"Continue... ":"Complete Activity "})]})]}):h.jsxs("div",{className:"p-8 space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h3",{className:"text-2xl font-bold text-emerald-400",children:"Available Activities"}),h.jsx("button",{onClick:n,className:"text-gray-400 hover:text-emerald-400 transition-colors",children:"Return to Base Camp"})]}),h.jsx("div",{className:"space-y-4",children:(ee=k.activities)==null?void 0:ee.map(K=>{const le=g(t,K.id);return h.jsxs("div",{className:`w-full text-left p-6 rounded-xl border transition-all duration-300 bg-black/20 border-emerald-500/20 hover:border-emerald-500/40 hover:shadow-lg hover:shadow-emerald-500/20 ${le?"opacity-75":""}`,children:[h.jsx("div",{className:"flex justify-between items-start mb-2",children:h.jsxs("h4",{className:"text-xl font-bold text-emerald-400 flex items-center gap-2",children:[K.name,le&&h.jsx($k,{size:20,className:"text-green-400"})]})}),h.jsx("p",{className:"text-gray-300 mb-4",children:K.description}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>b(K.id),className:`action-button px-6 py-2 font-medium flex-1 ${le?"text-gray-400":"text-emerald-400"}`,children:le?"Already completed!":"Let's get going!"}),le&&h.jsx("button",{onClick:()=>I(K.id),className:"action-button px-4 py-2 text-emerald-400",title:"Go again",children:h.jsx(Qk,{size:20})})]})]},K.id)})})]}):h.jsxs("div",{className:"p-8 space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[h.jsx(Pf,{className:"text-emerald-400",size:32}),h.jsxs("div",{children:[h.jsxs("h3",{className:"text-2xl font-bold text-emerald-400",children:["Traveling to ",k.name]}),h.jsx("p",{className:"text-gray-300",children:e})]})]}),h.jsx("div",{className:"h-2 bg-black/20 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300",style:{width:`${r}%`}})})]})})})},zb=()=>{const{currentLocation:t,setLocation:e}=Ae(),[n,r]=j.useState(!1),[i,s]=j.useState(null),o=c=>{if(c===t){s(c),r(!0);return}s(c),r(!0)},l=()=>{i&&i!==t&&e(i),r(!1),s(null)},a=Zo[t];return h.jsxs("div",{className:"space-y-12",children:[h.jsxs("section",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-emerald-700 mb-6",children:"Next Stops"}),h.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.values(Zo).map(c=>h.jsx(Db,{location:c,onSelect:()=>o(c.id)},c.id))})]}),h.jsxs("section",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-emerald-500/20",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[h.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-lg",children:h.jsx(Pf,{className:"text-emerald-400",size:24})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-emerald-400",children:a.name}),h.jsx("p",{className:"text-sm text-gray-400",children:"Current Location"})]})]}),a.storyIntro&&h.jsx("div",{className:"mb-6 bg-black/20 rounded-lg p-4 border border-emerald-500/10",children:h.jsx("p",{className:"text-lg text-gray-300 italic",children:a.storyIntro})}),h.jsx("div",{className:"bg-gray-900/50 rounded-lg p-4",children:h.jsx(Ib,{quests:a.quests})})]}),n&&i&&h.jsx(Lb,{locationId:i,travelText:Zo[i].travelText,onComplete:l})]})},Bb=[{id:"solar-synth",name:"Solar Synthesizer",description:"A sustainable synthesizer powered by solar energy",cost:100,type:"instrument",image:"https://images.unsplash.com/photo-1598653222000-6b7b7a552625?auto=format&fit=crop&q=80&w=1920",points:{earth:20,space:10},spaceRequired:50},{id:"bamboo-drum",name:"Bamboo Drum Set",description:"Eco-friendly percussion crafted from sustainable bamboo",cost:80,type:"instrument",image:"https://images.unsplash.com/photo-1519892300165-cb5542fb47c7?auto=format&fit=crop&q=80&w=1920",points:{earth:15,hand:15},spaceRequired:30},{id:"portable-panel",name:"Portable Solar Panel",description:"Compact solar panel for mobile power generation",cost:150,type:"solar",image:"https://images.unsplash.com/photo-1509391366360-2e959784a276?auto=format&fit=crop&q=80&w=1920",points:{carbon:25,space:15},spaceRequired:75},{id:"studio-mic",name:"Eco Studio Microphone",description:"Professional-grade microphone made from recycled materials",cost:120,type:"instrument",image:"https://images.unsplash.com/photo-1589003077984-894e133dabab?auto=format&fit=crop&q=80&w=1920",points:{space:20,hand:20},spaceRequired:60}],Fb=()=>{const{handBalance:t,purchaseItem:e,points:n}=Ae(),r=i=>{if(n.space<i.spaceRequired){J.error(h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("div",{children:"Not enough $SPACE tokens!"}),h.jsxs("div",{className:"flex items-center gap-2 text-sm bg-black/20 p-2 rounded-lg",children:[h.jsx(Dc,{className:"text-purple-400",size:16}),h.jsx("span",{children:"Tip: Visit Tom at NounSpace to get some n0gs and earn $SPACE tokens!"})]})]}));return}t.balance>=i.cost?(e(i),J.success(`Purchased ${i.name}!`,{description:`Added to your inventory. You earned ${Object.entries(i.points).map(([s,o])=>`${o} ${s}`).join(", ")}`})):J.error("Not enough HAND tokens!")};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-emerald-700 mb-2",children:"Regenerative Store"}),h.jsx("p",{className:"text-gray-400 mb-4",children:"Purchase sustainable items using your HAND tokens to earn points and support the regenerative economy."}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{className:"text-sm text-emerald-600",children:["Available: ",t.balance," "]}),h.jsxs("div",{className:"text-sm text-purple-400",children:["$SPACE: ",n.space]})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Bb.map(i=>h.jsxs("div",{className:"project-card p-4 hover:scale-105 transition-all duration-300",children:[h.jsx("img",{src:i.image,alt:i.name,className:"w-full h-48 object-cover rounded-lg mb-4"}),h.jsx("h3",{className:"font-bold text-lg text-emerald-400",children:i.name}),h.jsx("p",{className:"text-sm text-gray-400 mb-2",children:i.description}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsxs("span",{className:"text-lg font-medium text-emerald-300",children:[i.cost," "]}),h.jsxs("div",{className:"text-sm text-purple-400",children:["Required: ",i.spaceRequired," $SPACE"]})]}),h.jsx("button",{onClick:()=>r(i),className:"action-button px-4 py-2 text-emerald-400",children:"Purchase"})]})]},i.id))}),n.space===0&&h.jsxs("div",{className:"bg-black/20 rounded-xl p-6 border border-purple-500/20",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx(Dc,{size:24,className:"text-purple-400"}),h.jsx("h3",{className:"text-xl font-semibold text-purple-400",children:"Need $SPACE?"})]}),h.jsx("p",{className:"text-gray-300 mb-4",children:"Head over to NounSpace and chat with Tom! He'll hook you up with some n0gs and help you earn $SPACE tokens for the store."}),h.jsx("button",{className:"action-button px-6 py-2 text-purple-400 w-full group",children:h.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:["Visit NounSpace",h.jsx(Dc,{className:"group-hover:animate-bounce"})]})})]})]})},$b=()=>h.jsx(Fb,{}),_b=({x:t,y:e})=>{const[n,r]=j.useState([]);return j.useEffect(()=>{const s=Array.from({length:24},(l,a)=>({id:a,angle:a*360/24,scale:.5+Math.random()*.5}));r(s);const o=setTimeout(()=>r([]),1e3);return()=>clearTimeout(o)},[t,e]),h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 bg-blue-400/10 animate-ripple pointer-events-none"}),h.jsx("div",{className:"fixed inset-0 flex items-center justify-center pointer-events-none",children:h.jsxs("div",{className:"relative",children:[n.map(i=>h.jsx("div",{className:"absolute w-4 h-4 rounded-full bg-blue-400/80",style:{left:t,top:e,transform:`rotate(${i.angle}deg) translateY(-${50*i.scale}px) scale(${i.scale})`,animation:"water-splash 1s ease-out forwards"}},i.id)),h.jsx("div",{className:"absolute w-20 h-20 rounded-full",style:{left:t-40,top:e-40,background:"radial-gradient(circle, rgba(96, 165, 250, 0.4) 0%, transparent 70%)",animation:"ripple 1s ease-out forwards"}})]})})]})},Hb=({emoji:t,x:e,y:n,onComplete:r})=>{const[i,s]=j.useState([]);return j.useEffect(()=>{const l=Array.from({length:8},(c,u)=>({id:u,x:0,y:0,rotation:u*360/8,scale:.5+Math.random()*.5,opacity:1,emoji:t}));s(l);const a=setTimeout(()=>{s([]),r==null||r()},1e3);return()=>clearTimeout(a)},[t,r]),h.jsx("div",{className:"fixed pointer-events-none",style:{left:e,top:n},children:i.map(o=>h.jsx("div",{className:"absolute left-0 top-0 transform-gpu transition-all duration-1000",style:{transform:`
              rotate(${o.rotation}deg) 
              translate(${50*Math.cos(o.rotation*Math.PI/180)}px, 
                       ${50*Math.sin(o.rotation*Math.PI/180)}px) 
              scale(${o.scale})
            `,opacity:o.opacity,animation:"emoji-burst 1s ease-out forwards"},children:o.emoji},o.id))})},Vb=()=>{const{gardenPlots:t,plantSeed:e,waterPlant:n,handBalance:r,addHand:i}=Ae(),[s,o]=j.useState(null),[l,a]=j.useState(null),[c,u]=j.useState(!1),d=(p,m)=>{const v=t[p],x=m.currentTarget.getBoundingClientRect(),y=m.clientX,g=m.clientY;if(v.plant){if(r.balance<5){J.error("Not enough HAND tokens! Need 5  to water");return}o({x:m.clientX-x.left,y:m.clientY-x.top}),a({x:y,y:g,emoji:""}),setTimeout(()=>o(null),1e3),n(p),v.growth<1&&J.success("Plant watered! ",{description:`Growth: ${Math.round(v.growth*100)}%`})}else{if(r.balance<10){J.error("Not enough HAND tokens! Need 10  to plant");return}e(p),a({x:y,y:g,emoji:""}),J.success("Planted a new seed! ")}},f=async()=>{c||(u(!0),i(25),J.success("Received 25 HAND tokens! ",{description:"Use these to start planting and growing!"}),setTimeout(()=>u(!1),6e4))};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-emerald-700 mb-2",children:"Your Garden"}),h.jsx("p",{className:"text-gray-400 mb-4",children:"Plant seeds (10 ) and water your plants (5 ) to help them grow. Fully grown plants can be harvested for points!"}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{className:"text-sm text-gray-300",children:["Active Plants: ",t.filter(p=>p.plant).length,"/",t.length]}),h.jsx("button",{onClick:f,disabled:c,className:"action-button px-6 py-2 text-emerald-400 font-medium group disabled:opacity-50",children:h.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:c?h.jsxs(h.Fragment,{children:[h.jsx(Tp,{className:"animate-spin",size:18}),"Cooldown..."]}):h.jsxs(h.Fragment,{children:[h.jsx(Tp,{className:"group-hover:rotate-12 transition-transform",size:18}),"Get 25 HAND "]})})})]})]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:t.map((p,m)=>h.jsx("div",{onClick:v=>d(m,v),className:"eco-card aspect-square flex flex-col items-center justify-center p-4 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-emerald-500/20 relative group",children:p.plant?h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-4xl mb-2 transition-transform duration-300",style:{transform:`scale(${.5+p.growth*.5})`},children:p.plant.emoji}),h.jsx("div",{className:"text-sm font-medium text-emerald-400",children:p.plant.name}),h.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Growth: ",Math.round(p.growth*100),"%"]}),p.growth<1&&h.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx(by,{size:20,className:"text-blue-400 animate-bounce"})})]}):h.jsxs("div",{className:"text-center text-gray-400 hover:text-emerald-500 transition-colors group",children:[h.jsx(Pr,{size:32,className:"mx-auto group-hover:animate-bounce"}),h.jsx("div",{className:"text-sm mt-2",children:"Plant Seed"}),h.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"10 "})]})},m))}),s&&h.jsx(_b,{x:s.x,y:s.y}),l&&h.jsx(Hb,{x:l.x,y:l.y,emoji:l.emoji,onComplete:()=>a(null)})]})},Wb=()=>{const{skills:t,trainSkill:e,handBalance:n,addLog:r}=Ae(),[i,s]=j.useState({}),[o,l]=j.useState({}),[a,c]=j.useState({}),u=async f=>{const p=Dl.find(g=>g.id===f);if(!p)return;if(i[f]){J.error("This skill is currently in training!");return}if(o[f]&&o[f]>Date.now()){J.error("This skill is in cooldown!");return}if(n.balance<p.cost){J.error(`Not enough HAND tokens! Need ${p.cost} `);return}const m=t.find(g=>g.id===f);if((m==null?void 0:m.level)>=10){J.error("Skill already mastered!");return}s(g=>({...g,[f]:!0})),c(g=>({...g,[f]:!0}));const v=[`Beginning ${p.name} training session...`,`Focusing energy on ${p.name} principles...`,"Deepening understanding of regenerative practices...",`Mastering ${p.name} techniques...`,"Training session complete!"];for(const g of v)r(g),await new Promise(w=>setTimeout(w,1e3));e(f),s(g=>({...g,[f]:!1}));const x=Date.now()+3e4;l(g=>({...g,[f]:x})),setTimeout(()=>{c(g=>({...g,[f]:!1}))},1e3);const y=setInterval(()=>{Date.now()>=x&&(l(g=>({...g,[f]:0})),clearInterval(y))},1e3)},d=f=>{const p=o[f];return!p||p<=Date.now()?null:`${Math.ceil((p-Date.now())/1e3)}s`};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-2xl font-semibold text-emerald-400",children:"Training Dojo"}),h.jsxs("div",{className:"text-sm text-emerald-300",children:["Available HAND: ",n.balance," "]})]}),h.jsx("p",{className:"text-gray-400 mb-4",children:"Train your regenerative skills to earn points and level up. Each training session requires HAND tokens and has a cooldown period."})]}),h.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Dl.map(f=>{const p=t.find(g=>g.id===f.id)||{level:0,experience:0},m=p.experience/(p.level+1)*100||0,v=i[f.id],x=d(f.id),y=a[f.id];return h.jsxs("div",{className:`dojo-card group relative overflow-hidden transition-all duration-300 ${y?"animate-pulse ring-2 ring-emerald-400/50":""}`,children:[v&&h.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[h.jsx("div",{className:"absolute inset-0 bg-emerald-400/10 animate-pulse"}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx(eb,{className:"text-emerald-400 animate-spin",size:32})})]}),h.jsx("h3",{className:"text-xl font-semibold text-emerald-400 mb-2 group-hover:scale-105 transition-transform relative z-10",children:f.name}),h.jsx("p",{className:"text-gray-300 text-sm mb-4 relative z-10",children:f.description}),h.jsxs("div",{className:"flex justify-between text-sm text-gray-300 mb-2 relative z-10",children:[h.jsxs("span",{children:["Level ",p.level,"/10"]}),h.jsxs("span",{children:[Math.round(m),"%"]})]}),h.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden mb-4 relative z-10",children:h.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300",style:{width:`${m}%`}})}),h.jsx("button",{onClick:()=>u(f.id),disabled:v||!!x||n.balance<f.cost||p.level>=10,className:`glass-button w-full flex items-center justify-center gap-2 relative z-10 ${v?"bg-emerald-500/20 cursor-not-allowed":x?"bg-gray-500/20 cursor-not-allowed":n.balance<f.cost||p.level>=10?"opacity-50 cursor-not-allowed":"hover:bg-emerald-500/20 hover:scale-105"}`,children:v?h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(Al,{className:"animate-spin",size:16}),"Training..."]}):x?h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(Al,{size:16}),"Cooldown ",x]}):`Train (${f.cost} )`}),y&&h.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(5)].map((g,w)=>h.jsx("div",{className:"absolute w-2 h-2 bg-emerald-400 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animation:`particle-float-${w} 2s ease-in-out infinite`}},w))})]},f.id)})})]})},Ub=[{symbol:"USDGLO",name:"Global Impact Dollar",balance:1e3,price:1,change24h:.1},{symbol:"SHAND",name:"Staked HAND",balance:500,price:2.15,change24h:5.2,paired:"USDGLO"},{symbol:"CELO",name:"Celo",balance:250,price:12.5,change24h:3.8,paired:"USDGLO"},{symbol:"ETH",name:"Ethereum",balance:.5,price:4200,change24h:-2.1,paired:"USDGLO"},{symbol:"BTC",name:"Bitcoin",balance:.02,price:65e3,change24h:1.5,paired:"USDGLO"}],Kb=()=>{const{walletConnected:t}=Ae();if(!t)return h.jsxs("div",{className:"text-center py-12",children:[h.jsx("h2",{className:"text-2xl font-semibold text-emerald-400 mb-4",children:"Connect Your Wallet"}),h.jsx("p",{className:"text-gray-300",children:"Connect your wallet to access DeFi features"})]});const e={balance:1e6,locked:75e4};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-purple-900/40 rounded-xl p-6 border border-emerald-500/20",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h3",{className:"text-xl font-semibold text-emerald-400",children:"Treasury"}),h.jsx(qk,{className:"text-emerald-400"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[h.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Available"}),h.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:[e.balance.toLocaleString()," USDGLO"]})]}),h.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[h.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Locked"}),h.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[e.locked.toLocaleString()," USDGLO"]})]})]})]}),h.jsx("div",{className:"space-y-4",children:Ub.map(n=>h.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-emerald-500/10 hover:border-emerald-500/30 transition-all duration-300",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Hk,{className:"text-emerald-400",size:24}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium text-emerald-400",children:n.symbol}),h.jsx("div",{className:"text-sm text-gray-400",children:n.name})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"font-bold text-gray-200",children:[n.balance.toLocaleString()," ",n.symbol]}),h.jsxs("div",{className:"text-sm text-gray-400",children:[" $",(n.balance*n.price).toLocaleString()]})]})]}),h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsxs("div",{className:"text-gray-400",children:["$",n.price.toLocaleString()]}),h.jsxs("div",{className:`flex items-center gap-1 ${n.change24h>=0?"text-green-400":"text-red-400"}`,children:[n.change24h>=0?h.jsx(Bk,{size:16}):h.jsx(zk,{size:16}),Math.abs(n.change24h),"%"]})]}),n.paired&&h.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:h.jsxs("div",{className:"text-xs text-gray-400",children:["Paired with ",n.paired]})})]},n.symbol))})]})},qb=()=>{const{donateToProject:t,wallet:e,walletConnected:n,completeDonationRound:r}=Ae(),i=async(s,o)=>{if(!n){J.error("Please connect your wallet first");return}if(e.balances.USDGLO<o){J.error("Insufficient USDGLO balance");return}await t(s,o),r(),J.success(h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{children:"Donation Complete! "}),h.jsx("div",{className:"text-sm text-gray-400",children:"Check your HyperCerts in the CookieJar tab!"})]}))};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-emerald-400",children:"Featured Projects"}),h.jsx("p",{className:"text-gray-300 text-sm",children:"Support regenerative projects with USDGLO"})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"text-emerald-400 font-bold",children:[e.balances.USDGLO.toFixed(2)," USDGLO"]}),h.jsx("div",{className:"text-sm text-gray-400",children:"Available Balance"})]})]}),h.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Py.map(s=>h.jsxs("div",{className:"project-card",children:[h.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover rounded-t-xl"}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("h3",{className:"text-xl font-semibold text-emerald-400",children:s.name}),h.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-emerald-400",children:h.jsx(Sy,{size:20})})]}),h.jsx("p",{className:"text-gray-300 text-sm mb-4",children:s.description}),h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("div",{className:"text-sm text-gray-400",children:[h.jsxs("span",{className:"font-medium text-emerald-400",children:[s.raised," USDGLO"]})," raised"]}),h.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[h.jsx(Af,{size:16,className:"text-pink-400"}),s.supporters," supporters"]})]}),h.jsx("div",{className:"flex gap-2",children:[3,5,10].map(o=>h.jsx("button",{onClick:()=>i(s.id,o),className:"action-button flex-1 px-4 py-2 text-emerald-400 font-medium group",children:h.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[o," USDGLO",h.jsx(jf,{className:"group-hover:rotate-12 transition-transform",size:16})]})},o))})]})]},s.id))})]})},Rc=[{id:"ethcc",name:"ETHcc Paris",date:"July 8-10, 2024",description:"The largest annual European Ethereum event, focused on technology and community. Join workshops, hackathons, and connect with fellow builders in the heart of Paris.",image:"https://images.unsplash.com/photo-1502602898657-3e91760cbb34?auto=format&fit=crop&q=80&w=1920",attendees:324,location:"Paris, France",travelText:"Hopping on the Modal Motorcoach, cruising through the digital boulevards of Paris! ",link:"https://ethcc.io",schedule:[{time:"9:00 AM",activity:"Opening Ceremony"},{time:"10:00 AM",activity:"Regenerative Finance Panel"},{time:"2:00 PM",activity:"Sustainability Hackathon"},{time:"5:00 PM",activity:"Community Meetup"}]},{id:"cryptofest",name:"Tulum Crypto Fest",date:"December 12-15, 2024",description:"A unique fusion of ancient wisdom and future finance, featuring workshops on regenerative cities, decentralized protocols, and holistic lifestyle in the heart of the Mayan Riviera.",image:"https://images.unsplash.com/photo-1509087859087-a384654eca4d?auto=format&fit=crop&q=80&w=1920",attendees:256,location:"Tulum, Mexico",travelText:"The Modal Motorcoach transforms into a jungle cruiser as we venture into the mystical Mayan paradise! ",link:"https://tulumcryptofest.com",schedule:[{time:"Day 1",activity:"Beach Welcome @ Papaya Playa Project - Registration, Panels & Welcome Party"},{time:"Day 2",activity:"KAN Tulum - Morning Wellness, Conferences, VIP Dinner & Secret Party"},{time:"Day 3",activity:"Workshops, Full Moon Ceremony & Party at Secret Location"},{time:"Day 4",activity:"Whale Tank Contest, Closing Ceremony & Farewell Party"}]},{id:"permadao",name:"PermaDAO Summit",date:"August 15-17, 2024",description:"A gathering of regenerative finance pioneers and permaculture enthusiasts. Experience hands-on workshops, ecosystem restoration projects, and collaborative governance sessions.",image:"https://images.unsplash.com/photo-1518531933037-91b2f5f229cc?auto=format&fit=crop&q=80&w=1920",attendees:156,location:"Costa Rica",travelText:"The Modal Motorcoach transforms into a jungle cruiser as we head to the heart of regeneration! ",link:"https://permadao.com",schedule:[{time:"8:00 AM",activity:"Morning Meditation"},{time:"10:00 AM",activity:"Permaculture Workshop"},{time:"2:00 PM",activity:"DAO Governance Session"},{time:"4:00 PM",activity:"Community Garden Project"}]}],Jb=()=>{const{addPoints:t,addLog:e}=Ae(),[n,r]=j.useState(null),i=async o=>{const l=Rc.find(a=>a.id===o);l&&(J.success(`RSVP'd to ${l.name}!`,{description:"See you there, fellow regenerator! "}),t({hand:10,earth:5}),e(`RSVP'd to ${l.name}`),r(null))},s=Rc.find(o=>o.id===n);return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-emerald-400 mb-2",children:"Upcoming Events"}),h.jsx("p",{className:"text-gray-300",children:"Join the regenerative movement at these upcoming events!"})]}),h.jsx("div",{className:"grid gap-6",children:Rc.map(o=>h.jsxs("div",{className:"project-card overflow-hidden group",children:[h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:o.image,alt:o.name,className:"w-full h-48 object-cover transition-transform duration-500 group-hover:scale-110"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-900/90 to-transparent"}),h.jsxs("div",{className:"absolute bottom-0 p-4",children:[h.jsx("h3",{className:"text-xl font-bold text-emerald-400",children:o.name}),h.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[h.jsx(td,{size:16}),h.jsx("span",{children:o.date})]})]})]}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsx("p",{className:"text-gray-300",children:o.description}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[h.jsx(nd,{size:16}),h.jsxs("span",{children:[o.attendees," attending"]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>r(o.id),className:"action-button px-6 py-2 text-emerald-400 font-medium",children:"Details"}),h.jsx("button",{onClick:()=>i(o.id),className:"action-button px-6 py-2 text-emerald-400 font-medium",children:"RSVP"})]})]})]})]},o.id))}),n&&s&&h.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/90 to-purple-900/90 rounded-xl max-w-2xl w-full border border-emerald-500/20",children:[h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:s.image,alt:s.name,className:"w-full h-64 object-cover rounded-t-xl"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-900/90 to-transparent"}),h.jsx("button",{onClick:()=>r(null),className:"absolute top-4 right-4 p-2 rounded-full bg-black/20 text-white hover:bg-black/40 transition-colors",children:h.jsx(My,{size:20})})]}),h.jsxs("div",{className:"p-8 space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-emerald-400 mb-2",children:s.name}),h.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-300",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(td,{size:16}),h.jsx("span",{children:s.date})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Df,{size:16}),h.jsx("span",{children:s.location})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(nd,{size:16}),h.jsxs("span",{children:[s.attendees," attending"]})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:"text-gray-300 leading-relaxed",children:s.description}),s.schedule&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold text-emerald-400 mb-2",children:"Schedule"}),h.jsx("div",{className:"space-y-2",children:s.schedule.map((o,l)=>h.jsxs("div",{className:"flex gap-4 text-gray-300",children:[h.jsx(Al,{size:16,className:"shrink-0 mt-1"}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:o.time}),h.jsx("div",{className:"text-sm text-gray-400",children:o.activity})]})]},l))})]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>i(s.id),className:"action-button px-8 py-3 text-emerald-400 font-medium flex-1",children:"RSVP Now"}),s.link&&h.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"action-button px-4 py-3 text-emerald-400",children:h.jsx(Sy,{size:20})})]})]})]})})]})},Gb=()=>{const{wallet:t,addGloDollars:e,donationRound:n,completeDonationRound:r}=Ae(),[i,s]=j.useState(!1),o=async()=>{s(!0);const l=3+n*1;await new Promise(a=>setTimeout(a,1500)),e(l),J.success(h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{children:["Collected ",l," USDGLO! "]}),h.jsx("div",{className:"text-sm text-gray-400",children:"Head over to the Projects tab to make your impact!"})]})),s(!1)};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-purple-900/40 rounded-xl p-8 border border-emerald-500/20",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[h.jsx(Xo,{size:32,className:"text-emerald-400"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-emerald-400",children:"nCookieJar"}),h.jsx("p",{className:"text-gray-300",children:"Collect GLO to support regenerative projects"})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-black/20 rounded-lg p-6 border border-emerald-500/10",children:[h.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Current Round"}),h.jsxs("div",{className:"text-3xl font-bold text-emerald-400 mb-4",children:["Round ",n+1]}),h.jsxs("div",{className:"text-sm text-gray-300",children:["Collect ",3+n*1," USDGLO this round"]})]}),h.jsxs("div",{className:"bg-black/20 rounded-lg p-6 border border-emerald-500/10",children:[h.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Your USDGLO Balance"}),h.jsxs("div",{className:"text-3xl font-bold text-emerald-400 mb-4",children:[t.balances.USDGLO.toFixed(2)," USDGLO"]}),h.jsx("div",{className:"text-sm text-gray-300",children:"Ready to make an impact"})]})]}),h.jsxs("div",{className:"mt-8 space-y-4",children:[h.jsx("button",{onClick:o,disabled:i,className:"action-button w-full py-4 text-lg group disabled:opacity-50",children:h.jsx("span",{className:"relative z-10 flex items-center justify-center gap-3",children:i?h.jsxs(h.Fragment,{children:[h.jsx(Xo,{className:"animate-spin"}),"Collecting GLO..."]}):h.jsxs(h.Fragment,{children:["Collect GLO",h.jsx(Xo,{className:"group-hover:rotate-12 transition-transform"})]})})}),h.jsxs("div",{className:"flex items-center gap-4 text-gray-400 text-sm",children:[h.jsx(Tf,{size:16}),h.jsx("span",{children:"Collect GLO and donate to earn HyperCerts!"})]})]})]}),h.jsxs("div",{className:"bg-black/20 rounded-xl p-6 border border-purple-500/20",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx(jf,{className:"text-purple-400",size:24}),h.jsx("h3",{className:"text-xl font-semibold text-purple-400",children:"Your HyperCerts"})]}),h.jsx("div",{className:"space-y-4",children:Array.from({length:n}).map((l,a)=>h.jsxs("div",{className:"bg-purple-500/10 rounded-lg p-4 border border-purple-500/20",children:[h.jsxs("div",{className:"font-medium text-purple-400 mb-1",children:["Round ",a+1," Donation Complete"]}),h.jsx("div",{className:"text-sm text-gray-400",children:"Contributed to the regenerative economy"})]},a))})]})]})},Yb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function Qb(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=a=>a===null?null:JSON.parse(a,void 0),l=(s=n.getItem(i))!=null?s:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Fs=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Fs(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Fs(r)(n)}}}},Xb=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,y)=>({...y,...x}),...e},o=!1;const l=new Set,a=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...x)},r,i);const u=Fs(s.serialize),d=()=>{const x=s.partialize({...r()});let y;const g=u({state:x,version:s.version}).then(w=>c.setItem(s.name,w)).catch(w=>{y=w});if(y)throw y;return g},f=i.setState;i.setState=(x,y)=>{f(x,y),d()};const p=t((...x)=>{n(...x),d()},r,i);let m;const v=()=>{var x;if(!c)return;o=!1,l.forEach(g=>g(r()));const y=((x=s.onRehydrateStorage)==null?void 0:x.call(s,r()))||void 0;return Fs(c.getItem.bind(c))(s.name).then(g=>{if(g)return s.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==s.version){if(s.migrate)return s.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var w;return m=s.merge(g,(w=r())!=null?w:p),n(m,!0),d()}).then(()=>{y==null||y(m,void 0),o=!0,a.forEach(g=>g(m))}).catch(g=>{y==null||y(void 0,g)})};return i.persist={setOptions:x=>{s={...s,...x},x.getStorage&&(c=x.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:x=>(l.add(x),()=>{l.delete(x)}),onFinishHydration:x=>(a.add(x),()=>{a.delete(x)})},v(),m||p},Zb=(t,e)=>(n,r,i)=>{let s={storage:Qb(()=>localStorage),partialize:v=>v,version:0,merge:(v,x)=>({...x,...v}),...e},o=!1;const l=new Set,a=new Set;let c=s.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...v)},r,i);const u=()=>{const v=s.partialize({...r()});return c.setItem(s.name,{state:v,version:s.version})},d=i.setState;i.setState=(v,x)=>{d(v,x),u()};const f=t((...v)=>{n(...v),u()},r,i);i.getInitialState=()=>f;let p;const m=()=>{var v,x;if(!c)return;o=!1,l.forEach(g=>{var w;return g((w=r())!=null?w:f)});const y=((x=s.onRehydrateStorage)==null?void 0:x.call(s,(v=r())!=null?v:f))||void 0;return Fs(c.getItem.bind(c))(s.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==s.version){if(s.migrate)return[!0,s.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var w;const[k,S]=g;if(p=s.merge(S,(w=r())!=null?w:f),n(p,!0),k)return u()}).then(()=>{y==null||y(p,void 0),p=r(),o=!0,a.forEach(g=>g(p))}).catch(g=>{y==null||y(void 0,g)})};return i.persist={setOptions:v=>{s={...s,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(a.add(v),()=>{a.delete(v)})},s.skipHydration||m(),p||f},eS=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Yb?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Xb(t,e)):Zb(t,e),Ry=eS,Dp=[{id:"tale-1",title:"The First Green Pill",content:`<p>I remember the exact moment I took the green pill. It wasn't a physical pill, of course, but rather the moment I truly understood what regenerative systems could mean for our future.</p>
    <p>It happened at ETHDenver 2024, surrounded by builders and dreamers. Someone was presenting a project about tokenized carbon credits, but they weren't just talking about offsettingthey were describing an entire ecosystem where every transaction could help restore our planet.</p>
    <p>That's when it clicked. Web3 wasn't just about financial freedom; it could be the key to ecological regeneration.</p>`,authorId:"0x1234",createdAt:Date.now()-7*24*60*60*1e3,likes:42,featured:!0,tags:["green-pill","ethdenver","regeneration"],location:{x:30,y:40,name:"ETHDenver"}},{id:"tale-2",title:"The Bamboo DAO Experiment",content:`<p>Our local regenerative farming collective decided to experiment with DAOs in an unexpected way. We tokenized bamboo growth cycles, creating a unique alignment between DeFi yields and actual bamboo yields.</p>
    <p>Each token represented a bamboo plot, and holders could earn rewards based on both financial stakes and their contribution to bamboo cultivation knowledge. The fascinating part? The rapid growth of bamboo perfectly matched our token emission schedule!</p>
    <p>Six months in, we've not only created a sustainable funding model but also built an engaged community of regenerative farmers and crypto enthusiasts.</p>`,authorId:"0x5678",createdAt:Date.now()-3*24*60*60*1e3,likes:28,featured:!0,tags:["dao","farming","bamboo","defi"],location:{x:65,y:35,name:"Bamboo Valley"}},{id:"tale-3",title:"Solarpunk Dreams in Tulum",content:`<p>The Tulum Crypto Fest was unlike any other conference I'd attended. Instead of sterile conference rooms, we gathered in sustainable bamboo structures powered by solar panels.</p>
    <p>During a workshop on regenerative tokenomics, a sudden tropical rain began to fall. Rather than being an interruption, it became part of the experiencethe sound of rain on the bamboo roof creating a natural symphony as we discussed how to tokenize rainfall collection systems.</p>
    <p>This was where I learned that the future of crypto doesn't have to be about energy-intensive mining, but can instead power the regenerative revolution.</p>`,authorId:"0x9abc",createdAt:Date.now()-1*24*60*60*1e3,likes:35,featured:!0,tags:["solarpunk","tulum","sustainability"],location:{x:80,y:70,name:"Tulum"}}],tS=[{id:"prompt-1",title:"Your Green Pill Moment",description:"Share the moment you realized the potential of regenerative systems. What sparked your journey?",theme:"Origins",expiresAt:Date.now()+7*24*60*60*1e3,points:50},{id:"prompt-2",title:"Local Regeneration",description:"Tell us about a regenerative project in your local community. How is it making a difference?",theme:"Community",expiresAt:Date.now()+14*24*60*60*1e3,points:75}],to=If()(Ry((t,e)=>({stories:Dp,prompts:tS,userStories:{},featuredStories:Dp.filter(n=>n.featured).map(n=>n.id),addStory:n=>{const r={id:Math.random().toString(36).slice(2),createdAt:Date.now(),likes:0,featured:!1,...n};t(i=>({stories:[...i.stories,r],userStories:{...i.userStories,[n.authorId]:[...i.userStories[n.authorId]||[],r.id]}})),J.success("Story shared successfully!",{description:"Your tale has been added to the trail."})},likeStory:n=>{t(r=>({stories:r.stories.map(i=>i.id===n?{...i,likes:i.likes+1}:i)}))},featureStory:n=>{t(r=>({stories:r.stories.map(i=>i.id===n?{...i,featured:!0}:i),featuredStories:[...r.featuredStories,n]})),J.success("Story featured!",{description:"This tale will be highlighted on the trail."})},addPrompt:n=>{const r={id:Math.random().toString(36).slice(2),...n};t(i=>({prompts:[...i.prompts,r]}))},getUserStories:n=>{const r=e(),i=r.userStories[n]||[];return r.stories.filter(s=>i.includes(s.id))},getFeaturedStories:()=>e().stories.filter(r=>r.featured)}),{name:"regen-trail-stories",version:1}));function Pe(t){this.content=t}Pe.prototype={constructor:Pe,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Pe(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Pe(n)},addToStart:function(t,e){return new Pe([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Pe(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Pe(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Pe.from(t),t.size?new Pe(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Pe.from(t),t.size?new Pe(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Pe.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Pe.from=function(t){if(t instanceof Pe)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Pe(e)};function Iy(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=Iy(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function Ly(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let c=Ly(o.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class N{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new N(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new N(r,i)}cutByIndex(e,n){return e==n?N.empty:e==0&&n==this.content.length?this:new N(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new N(i,s)}addToStart(e){return new N([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new N(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Iy(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Ly(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Mo(0,e);if(e==this.size)return Mo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?Mo(r+1,o):Mo(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return N.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new N(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return N.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new N(n||e,r)}static from(e){if(!e)return N.empty;if(e instanceof N)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new N([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}N.empty=new N([],0);const Ic={index:0,offset:0};function Mo(t,e){return Ic.index=t,Ic.offset=e,Ic}function Pl(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Pl(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Pl(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ne=class rd{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Pl(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return rd.none;if(e instanceof rd)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ne.none=[];class Rl extends Error{}class P{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=By(this.content,e+this.openStart,n);return r&&new P(r,this.openStart,this.openEnd)}removeBetween(e,n){return new P(zy(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return P.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new P(N.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new P(e,r,i)}}P.empty=new P(N.empty,0,0);function zy(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(zy(s.content,e-i-1,n-i-1)))}function By(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=By(o.content,e-s-1,n);return l&&t.replaceChild(i,o.copy(l))}function nS(t,e,n){if(n.openStart>t.depth)throw new Rl("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Rl("Inconsistent open depths");return Fy(t,e,n,0)}function Fy(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=Fy(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return Sr(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=rS(n,t);return Sr(s,_y(t,o,l,e,r))}else return Sr(s,Il(t,e,r))}function $y(t,e){if(!e.type.compatibleContent(t.type))throw new Rl("Cannot join "+e.type.name+" onto "+t.type.name)}function id(t,e,n){let r=t.node(n);return $y(r,e.node(n)),r}function br(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ms(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(br(t.nodeAfter,r),s++));for(let l=s;l<o;l++)br(i.child(l),r);e&&e.depth==n&&e.textOffset&&br(e.nodeBefore,r)}function Sr(t,e){return t.type.checkContent(e),t.copy(e)}function _y(t,e,n,r,i){let s=t.depth>i&&id(t,e,i+1),o=r.depth>i&&id(n,r,i+1),l=[];return ms(null,t,i,l),s&&o&&e.index(i)==n.index(i)?($y(s,o),br(Sr(s,_y(t,e,n,r,i+1)),l)):(s&&br(Sr(s,Il(t,e,i+1)),l),ms(e,n,i,l),o&&br(Sr(o,Il(n,r,i+1)),l)),ms(r,null,i,l),new N(l)}function Il(t,e,n){let r=[];if(ms(null,t,n,r),t.depth>n){let i=id(t,e,n+1);br(Sr(i,Il(t,e,n+1)),r)}return ms(e,null,n,r),new N(r)}function rS(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(N.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class $s{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ne.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ll(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new $s(n,r,s)}static resolveCached(e,n){let r=Pp.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else Pp.set(e,r=new iS);let i=r.elts[r.i]=$s.resolve(e,n);return r.i=(r.i+1)%sS,i}}class iS{constructor(){this.elts=[],this.i=0}}const sS=12,Pp=new WeakMap;class Ll{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const oS=Object.create(null);let Nr=class sd{constructor(e,n,r,i=ne.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||N.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Pl(this.attrs,n||e.defaultAttrs||oS)&&ne.sameSet(this.marks,r||ne.none)}copy(e=null){return e==this.content?this:new sd(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new sd(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return P.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new P(c,i.depth-o,s.depth-o)}replace(e,n,r){return nS(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return $s.resolveCached(this,e)}resolveNoCache(e){return $s.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Hy(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=N.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ne.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ne.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=N.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Nr.prototype.text=void 0;class zl extends Nr{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Hy(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new zl(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new zl(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Hy(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Rr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new lS(e,n);if(r.next==null)return Rr.empty;let i=Vy(r);r.next&&r.err("Unexpected trailing text");let s=pS(hS(i));return mS(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return N.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,l.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Rr.empty=new Rr(!0);class lS{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Vy(t){let e=[];do e.push(aS(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function aS(t){let e=[];do e.push(cS(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function cS(t){let e=fS(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=uS(t,e);else break;return e}function Rp(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function uS(t,e){let n=Rp(t),r=n;return t.eat(",")&&(t.next!="}"?r=Rp(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function dS(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function fS(t){if(t.eat("(")){let e=Vy(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=dS(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function hS(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,a),u),a=u}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=n();r(a,u),i(s(o.expr,a),u),a=u}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Wy(t,e){return e-t}function Ip(t,e){let n=[];return r(e),n.sort(Wy);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function pS(t){let e=Object.create(null);return n(Ip(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);Ip(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Rr(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(Wy);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function mS(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Uy(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Ky(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function qy(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Jy(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new yS(t,r,e[r]);return n}let Lp=class Gy{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Jy(e,r.attrs),this.defaultAttrs=Uy(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Rr.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ky(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Nr(this,this.computeAttrs(e),N.from(n),ne.setFrom(r))}createChecked(e=null,n,r){return n=N.from(n),this.checkContent(n),new Nr(this,this.computeAttrs(e),n,ne.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=N.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(N.empty,!0);return s?new Nr(this,e,n.append(s),ne.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){qy(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ne.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new Gy(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function gS(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class yS{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?gS(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class _a{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Jy(e,i.attrs),this.excluded=null;let s=Uy(this.attrs);this.instance=s?new ne(this,s):null}create(e=null){return!e&&this.instance?this.instance:new ne(this,Ky(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new _a(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){qy(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Yy{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Pe.from(e.nodes),n.marks=Pe.from(e.marks||{}),this.nodes=Lp.compile(this.spec.nodes,this),this.marks=_a.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Rr.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?zp(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:zp(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Lp){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new zl(r,r.defaultAttrs,e,ne.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Nr.fromJSON(this,e)}markFromJSON(e){return ne.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function zp(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function vS(t){return t.tag!=null}function xS(t){return t.style!=null}class Gn{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(vS(i))this.tags.push(i);else if(xS(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new Fp(this,n,!1);return r.addAll(e,ne.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Fp(this,n,!0);return r.addAll(e,ne.none,n.from,n.to),P.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(bS(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=$p(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=$p(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Gn(e,Gn.schemaRules(e)))}}const Qy={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wS={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Xy={ol:!0,ul:!0},Bl=1,Fl=2,gs=4;function Bp(t,e,n){return e!=null?(e?Bl:0)|(e==="full"?Fl:0):t&&t.whitespace=="pre"?Bl|Fl:n&~gs}class To{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ne.none,this.match=s||(o&gs?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(N.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Bl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=N.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(N.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Qy.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Fp{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=Bp(null,n.preserveWhitespace,0)|(r?gs:0);i?s=new To(i.type,i.attrs,ne.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new To(null,null,ne.none,!0,null,o):s=new To(e.schema.topNodeType,null,ne.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top;if(i.options&Fl||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&Bl)i.options&Fl?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],o=e.previousSibling;(!s||o&&o.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=e.nodeName.toLowerCase(),s;Xy.hasOwnProperty(i)&&this.parser.normalizeLists&&kS(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));if(o?o.ignore:wS.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let l,a=this.top,c=this.needsBlock;if(Qy.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);return}let u=o&&o.skip?n:this.readStyles(e,n);u&&this.addAll(e,u),l&&this.sync(a),this.needsBlock=c}else{let l=this.readStyles(e,n);l&&this.addElementByRule(e,o,l,o.consuming===!1?s:void 0)}}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n){let r,i;for(let s=this.open;s>=0;s--){let o=this.nodes[s],l=o.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=o,!l.length)||o.solid)break}if(!r)return null;this.sync(i);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=ne.none;for(let o of r.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):_p(o.type,e.type))&&(s=o.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Bp(e,s,o.options);o.options&gs&&o.content.length==0&&(l|=gs);let a=ne.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):_p(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new To(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function kS(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Xy.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function bS(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function $p(t){let e={};for(let n in t)e[n]=t[n];return e}function _p(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class $r{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Lc(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=el(Lc(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&el(Lc(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return el(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new $r(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Hp(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Hp(e.marks)}}function Hp(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Lc(t){return t.document||window.document}const Vp=new WeakMap;function SS(t){let e=Vp.get(t);return e===void 0&&Vp.set(t,e=NS(t)),e}function NS(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function el(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=SS(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:p,contentDOM:m}=el(t,f,n,r);if(a.appendChild(p),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:a,contentDOM:l}}const Zy=65535,e1=Math.pow(2,16);function CS(t,e){return t+e*e1}function Wp(t){return t&Zy}function ES(t){return(t-(t&Zy))/e1}const t1=1,n1=2,tl=4,r1=8;class od{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&r1)>0}get deletedBefore(){return(this.delInfo&(t1|tl))>0}get deletedAfter(){return(this.delInfo&(n1|tl))>0}get deletedAcross(){return(this.delInfo&tl)>0}}class pt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&pt.empty)return pt.empty}recover(e){let n=0,r=Wp(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+ES(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],u=this.ranges[l+o],d=a+c;if(e<=d){let f=c?e==a?-1:e==d?1:n:n,p=a+i+(f<0?0:u);if(r)return p;let m=e==(n<0?a:d)?null:CS(l/3,e-a),v=e==a?n1:e==d?t1:tl;return(n<0?e!=a:e!=d)&&(v|=r1),new od(p,v,m)}i+=u-c}return r?e+i:new od(e+i,0,null)}touches(e,n){let r=0,i=Wp(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),s+=u-c}}invert(){return new pt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?pt.empty:new pt(e<0?[0,-e,0]:[0,0,e])}}pt.empty=new pt([]);class gi{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new gi(this.maps,this.mirror,e,n)}copy(){return new gi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new gi;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new od(e,i,null)}}const zc=Object.create(null);class Je{getMap(){return pt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=zc[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in zc)throw new RangeError("Duplicate use of step JSON ID "+e);return zc[e]=n,n.prototype.jsonID=e,n}}class we{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new we(e,null)}static fail(e){return new we(null,e)}static fromReplace(e,n,r,i){try{return we.ok(e.replace(n,r,i))}catch(s){if(s instanceof Rl)return we.fail(s.message);throw s}}}function Lf(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Lf(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return N.fromArray(r)}class Bn extends Je{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new P(Lf(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return we.fromReplace(e,this.from,this.to,s)}invert(){return new tn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Bn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Bn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Bn(n.from,n.to,e.markFromJSON(n.mark))}}Je.jsonID("addMark",Bn);class tn extends Je{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new P(Lf(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return we.fromReplace(e,this.from,this.to,r)}invert(){return new Bn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new tn(n.pos,r.pos,this.mark)}merge(e){return e instanceof tn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new tn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new tn(n.from,n.to,e.markFromJSON(n.mark))}}Je.jsonID("removeMark",tn);class Fn extends Je{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return we.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return we.fromReplace(e,this.pos,this.pos+1,new P(N.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Fn(this.pos,n.marks[i]);return new Fn(this.pos,this.mark)}}return new Ti(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Fn(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Fn(n.pos,e.markFromJSON(n.mark))}}Je.jsonID("addNodeMark",Fn);class Ti extends Je{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return we.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return we.fromReplace(e,this.pos,this.pos+1,new P(N.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Fn(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ti(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ti(n.pos,e.markFromJSON(n.mark))}}Je.jsonID("removeNodeMark",Ti);class Ee extends Je{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&ld(e,this.from,this.to)?we.fail("Structure replace would overwrite content"):we.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new pt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ee(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ee(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ee)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?P.empty:new P(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ee(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?P.empty:new P(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ee(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ee(n.from,n.to,P.fromJSON(e,n.slice),!!n.structure)}}Je.jsonID("replace",Ee);class Te extends Je{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(ld(e,this.from,this.gapFrom)||ld(e,this.gapTo,this.to)))return we.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return we.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?we.fromReplace(e,this.from,this.to,r):we.fail("Content does not fit in gap")}getMap(){return new pt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Te(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Te(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Te(n.from,n.to,n.gapFrom,n.gapTo,P.fromJSON(e,n.slice),n.insert,!!n.structure)}}Je.jsonID("replaceAround",Te);function ld(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function MS(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+a.nodeSize,n),m=r.addToSet(d);for(let v=0;v<d.length;v++)d[v].isInSet(m)||(o&&o.to==f&&o.mark.eq(d[v])?o.to=p:i.push(o=new tn(f,p,d[v])));l&&l.to==f?l.to=p:s.push(l=new Bn(f,p,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function TS(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof _a){let c=o.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&d.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:d,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>t.step(new tn(o.from,o.to,o.style)))}function zf(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let c=s.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Ee(l,u,P.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new tn(l,u,c.marks[f]));if(i&&c.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new P(N.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Ee(l+f.index,l+f.index+f[0].length,m))}}l=u}if(!r.validEnd){let a=r.fillBefore(N.empty,!0);t.replace(l,l,new P(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function OS(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function zi(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!OS(i,s,o))break}return null}function jS(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,u=N.empty,d=0;for(let m=s,v=!1;m>n;m--)v||r.index(m)>0?(v=!0,u=N.from(r.node(m).copy(u)),d++):a--;let f=N.empty,p=0;for(let m=s,v=!1;m>n;m--)v||i.after(m+1)<i.end(m)?(v=!0,f=N.from(i.node(m).copy(f)),p++):c++;t.step(new Te(a,c,o,l,new P(u.append(f),d,p),u.size-d,!0))}function Bf(t,e,n=null,r=t){let i=AS(t,e),s=i&&DS(r,e);return s?i.map(Up).concat({type:e,attrs:n}).concat(s.map(Up)):null}function Up(t){return{type:t,attrs:null}}function AS(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function DS(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:o}function PS(t,e,n){let r=N.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=N.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Te(i,s,i,s,new P(r,0,0),n.length,!0))}function RS(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&IS(t.doc,t.mapping.slice(s).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&s1(t,o,l,s),zf(t,t.mapping.slice(s).map(l,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(l,1),f=u.map(l+o.nodeSize,1);return t.step(new Te(d,f,d+1,f-1,new P(N.from(r.create(a,null,o.marks)),0,0),1,!0)),c===!0&&i1(t,o,l,s),!1}})}function i1(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function s1(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function IS(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function LS(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Te(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new P(N.from(o),0,0),1,!0))}function yi(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),m=r&&r[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let v=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!v.type.validContent(p))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function zS(t,e,n=1,r){let i=t.doc.resolve(e),s=N.empty,o=N.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){s=N.from(i.node(l).copy(s));let u=r&&r[c];o=N.from(u?u.type.create(u.attrs,o):i.node(l).copy(o))}t.step(new Ee(e,e,new P(s.append(o),n,n),!0))}function sr(t,e){let n=t.resolve(e),r=n.index();return o1(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function BS(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function o1(t,e){return!!(t&&e&&!t.isLeaf&&BS(t,e))}function Ha(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&o1(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function FS(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);s1(t,u.node(),u.before(),l)}o.inlineContent&&zf(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Ee(c,a.map(e+n,-1),P.empty,!0)),r===!0){let u=t.doc.resolve(c);i1(t,u.node(),u.before(),t.steps.length)}return t}function $S(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function l1(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(a,a,i);else{let d=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Va(t,e,n=e,r=P.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return a1(i,s,r)?new Ee(e,n,r):new _S(i,s,r).fit()}function a1(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class _S{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=N.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=N.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new P(s,o,l);return e>-1?new Te(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Ee(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Bc(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(N.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Bc(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new P(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Bc(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new P(ns(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new P(ns(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let v=0;v<s.length;v++)this.openFrontierNode(s[v]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let v=0;v<i.childCount;v++)u.push(i.child(v));d=d.matchFragment(i)}let p=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let v=l.child(c),x=d.matchType(v.type);if(!x)break;c++,(c>1||a==0||v.content.size)&&(d=x,u.push(c1(v.mark(f.allowedMarks(v.marks)),c==1?a:0,c==l.childCount?p:-1)))}let m=c==l.childCount;m||(p=-1),this.placed=rs(this.placed,n,N.from(u)),this.frontier[n].match=d,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,x=l;v<p;v++){let y=x.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),x=y.content}this.unplaced=m?e==0?P.empty:new P(ns(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new P(ns(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Fc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Fc(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=Fc(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=rs(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=rs(this.placed,this.depth,N.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(N.empty,!0);n.childCount&&(this.placed=rs(this.placed,this.frontier.length,n))}}function ns(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ns(t.firstChild.content,e-1,n)))}function rs(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(rs(t.lastChild.content,e-1,n)))}function Bc(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function c1(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,c1(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(N.empty,!0)))),t.copy(r)}function Fc(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!HS(n,s.content,o)?l:null}function HS(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function VS(t){return t.spec.defining||t.spec.definingForContent}function WS(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(a1(i,s,r))return t.step(new Ee(e,n,r));let o=d1(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?l=f:i.before(f)==p&&o.splice(1,0,-f)}let a=o.indexOf(l),c=[],u=r.openStart;for(let f=r.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==r.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let p=c[f],m=VS(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(l)-1)))u=f;else if(m||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+u+1)%(r.openStart+1),m=c[p];if(m)for(let v=0;v<o.length;v++){let x=o[(v+a)%o.length],y=!0;x<0&&(y=!1,x=-x);let g=i.node(x-1),w=i.index(x-1);if(g.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(x),y?s.after(x):n,new P(u1(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=o[f];p<0||(e=i.before(p),n=s.after(p))}}function u1(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(u1(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(N.empty,!0))}return t}function US(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=$S(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new P(N.from(r),0,0))}function KS(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=d1(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function d1(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class vi extends Je{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return we.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return we.fromReplace(e,this.pos,this.pos+1,new P(N.from(i),0,n.isLeaf?0:1))}getMap(){return pt.empty}invert(e){return new vi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new vi(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new vi(n.pos,n.attr,n.value)}}Je.jsonID("attr",vi);class _s extends Je{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return we.ok(r)}getMap(){return pt.empty}invert(e){return new _s(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new _s(n.attr,n.value)}}Je.jsonID("docAttr",_s);let Oi=class extends Error{};Oi=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Oi.prototype=Object.create(Error.prototype);Oi.prototype.constructor=Oi;Oi.prototype.name="TransformError";class f1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new gi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Oi(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=P.empty){let i=Va(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new P(N.from(r),0,0))}delete(e,n){return this.replace(e,n,P.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return WS(this,e,n,r),this}replaceRangeWith(e,n,r){return US(this,e,n,r),this}deleteRange(e,n){return KS(this,e,n),this}lift(e,n){return jS(this,e,n),this}join(e,n=1){return FS(this,e,n),this}wrap(e,n){return PS(this,e,n),this}setBlockType(e,n=e,r,i=null){return RS(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return LS(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new vi(e,n,r)),this}setDocAttribute(e,n){return this.step(new _s(e,n)),this}addNodeMark(e,n){return this.step(new Fn(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ne)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Ti(e,n)),this}split(e,n=1,r){return zS(this,e,n,r),this}addMark(e,n,r){return MS(this,e,n,r),this}removeMark(e,n,r){return TS(this,e,n,r),this}clearIncompatible(e,n,r){return zf(this,e,n,r),this}}const $c=Object.create(null);class W{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new qS(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=P.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(s);e.replaceRange(u.map(a.pos),u.map(c.pos),l?P.empty:n),l==0&&Jp(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),u=a.map(l.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),Jp(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new _(e):qr(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?qr(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):qr(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Wt(e.node(0))}static atStart(e){return qr(e,e,0,0,1)||new Wt(e)}static atEnd(e){return qr(e,e,e.content.size,e.childCount,-1)||new Wt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=$c[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in $c)throw new RangeError("Duplicate use of selection JSON ID "+e);return $c[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _.between(this.$anchor,this.$head).getBookmark()}}W.prototype.visible=!0;class qS{constructor(e,n){this.$from=e,this.$to=n}}let Kp=!1;function qp(t){!Kp&&!t.parent.inlineContent&&(Kp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class _ extends W{constructor(e,n=e){qp(e),qp(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return W.near(r);let i=e.resolve(n.map(this.anchor));return new _(i.parent.inlineContent?i:r,r)}replace(e,n=P.empty){if(super.replace(e,n),n==P.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof _&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Wa(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=W.findFrom(n,r,!0)||W.findFrom(n,-r,!0);if(s)n=s.$head;else return W.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(W.findFrom(e,-r,!0)||W.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new _(e,n)}}W.jsonID("text",_);class Wa{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Wa(e.map(this.anchor),e.map(this.head))}resolve(e){return _.between(e.resolve(this.anchor),e.resolve(this.head))}}class F extends W{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?W.near(s):new F(s)}content(){return new P(N.from(this.node),0,0)}eq(e){return e instanceof F&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ff(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new F(e.resolve(n.anchor))}static create(e,n){return new F(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}F.prototype.visible=!1;W.jsonID("node",F);class Ff{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Wa(r,r):new Ff(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&F.isSelectable(r)?new F(n):W.near(n)}}class Wt extends W{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=P.empty){if(n==P.empty){e.delete(0,e.doc.content.size);let r=W.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Wt(e)}map(e){return new Wt(e)}eq(e){return e instanceof Wt}getBookmark(){return JS}}W.jsonID("all",Wt);const JS={map(){return this},resolve(t){return new Wt(t)}};function qr(t,e,n,r,i,s=!1){if(e.inlineContent)return _.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&F.isSelectable(l))return F.create(t,n-(i<0?l.nodeSize:0))}else{let a=qr(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function Jp(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ee||i instanceof Te))return;let s=t.mapping.maps[r],o;s.forEach((l,a,c,u)=>{o==null&&(o=u)}),t.setSelection(W.near(t.doc.resolve(o),n))}const Gp=1,Oo=2,Yp=4;class GS extends f1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Gp)&~Oo,this.storedMarks=null,this}get selectionSet(){return(this.updated&Gp)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Oo,this}ensureMarks(e){return ne.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Oo)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Oo,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ne.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(W.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Yp,this}get scrolledIntoView(){return(this.updated&Yp)>0}}function Qp(t,e){return!e||!t?t:t.bind(e)}class is{constructor(e,n,r){this.name=e,this.init=Qp(n.init,r),this.apply=Qp(n.apply,r)}}const YS=[new is("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new is("selection",{init(t,e){return t.selection||W.atStart(e.doc)},apply(t){return t.selection}}),new is("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new is("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class _c{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=YS.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new is(r.key,r.spec.state,r))})}}class ai{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ai(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new GS(this)}static create(e){let n=new _c(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ai(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new _c(this.schema,e.plugins),r=n.fields,i=new ai(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new _c(e.schema,e.plugins),s=new ai(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Nr.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=W.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=c.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function h1(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=h1(i,e,{})),n[r]=i}return n}class $e{constructor(e){this.spec=e,this.props={},e.props&&h1(e.props,this,this.props),this.key=e.key?e.key.key:p1("plugin")}getState(e){return e[this.key]}}const Hc=Object.create(null);function p1(t){return t in Hc?t+"$"+ ++Hc[t]:(Hc[t]=0,t+"$")}class wt{constructor(e="key"){this.key=p1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Re=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Hs=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let ad=null;const dn=function(t,e,n){let r=ad||(ad=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},QS=function(){ad=null},Ir=function(t,e,n,r){return n&&(Xp(t,e,n,r,-1)||Xp(t,e,n,r,1))},XS=/^(img|br|input|textarea|hr)$/i;function Xp(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Tt(t))){let s=t.parentNode;if(!s||s.nodeType!=1||no(t)||XS.test(t.nodeName)||t.contentEditable=="false")return!1;e=Re(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Tt(t):0}else return!1}}function Tt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ZS(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Tt(t)}else if(t.parentNode&&!no(t))e=Re(t),t=t.parentNode;else return null}}function e2(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!no(t))e=Re(t)+1,t=t.parentNode;else return null}}function t2(t,e,n){for(let r=e==0,i=e==Tt(t);r||i;){if(t==n)return!0;let s=Re(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Tt(t)}}function no(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ua=function(t){return t.focusNode&&Ir(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function dr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function n2(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function r2(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Tt(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Tt(r.startContainer),r.startOffset)}}}const sn=typeof navigator<"u"?navigator:null,Zp=typeof document<"u"?document:null,or=sn&&sn.userAgent||"",cd=/Edge\/(\d+)/.exec(or),m1=/MSIE \d/.exec(or),ud=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(or),ut=!!(m1||ud||cd),Yn=m1?document.documentMode:ud?+ud[1]:cd?+cd[1]:0,Kt=!ut&&/gecko\/(\d+)/i.test(or);Kt&&+(/Firefox\/(\d+)/.exec(or)||[0,0])[1];const dd=!ut&&/Chrome\/(\d+)/.exec(or),Ke=!!dd,g1=dd?+dd[1]:0,Xe=!ut&&!!sn&&/Apple Computer/.test(sn.vendor),ji=Xe&&(/Mobile\/\w+/.test(or)||!!sn&&sn.maxTouchPoints>2),Ct=ji||(sn?/Mac/.test(sn.platform):!1),i2=sn?/Win/.test(sn.platform):!1,$t=/Android \d/.test(or),ro=!!Zp&&"webkitFontSmoothing"in Zp.documentElement.style,s2=ro?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function o2(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function an(t,e){return typeof t=="number"?t:t[e]}function l2(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function em(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Hs(o)){if(o.nodeType!=1)continue;let l=o,a=l==s.body,c=a?o2(s):l2(l),u=0,d=0;if(e.top<c.top+an(r,"top")?d=-(c.top-e.top+an(i,"top")):e.bottom>c.bottom-an(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+an(i,"top")-c.top:e.bottom-c.bottom+an(i,"bottom")),e.left<c.left+an(r,"left")?u=-(c.left-e.left+an(i,"left")):e.right>c.right-an(r,"right")&&(u=e.right-c.right+an(i,"right")),u||d)if(a)s.defaultView.scrollBy(u,d);else{let f=l.scrollLeft,p=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let m=l.scrollLeft-f,v=l.scrollTop-p;e={left:e.left-m,top:e.top-v,right:e.right-m,bottom:e.bottom-v}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function a2(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:y1(t.dom)}}function y1(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Hs(r));return e}function c2({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;v1(n,r==0?0:r-e)}function v1(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Wr=null;function u2(t){if(t.setActive)return t.setActive();if(Wr)return t.focus(Wr);let e=y1(t);t.focus(Wr==null?{get preventScroll(){return Wr={preventScroll:!0},!0}}:void 0),Wr||(Wr=!1,v1(e,0))}function x1(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=dn(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=l){o=Math.max(m.bottom,o),l=Math.min(m.top,l);let v=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(v<r){n=u,r=v,i=v&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&v&&(s=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!a&&m.left<=e.left&&m.right>=e.left&&(a=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=d+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?d2(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:x1(n,i)}function d2(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=En(r,1);if(s.top!=s.bottom&&$f(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function $f(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function f2(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function h2(t,e,n){let{node:r,offset:i}=x1(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function p2(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function w1(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if($f(e,c))return w1(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function m2(t,e){let n=t.dom.ownerDocument,r,i=0,s=r2(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!$f(e,c)||(o=w1(t.dom,e,c),!o))return null}if(Xe)for(let c=o;r&&c;c=Hs(c))c.draggable&&(r=void 0);if(o=f2(o,e),r){if(Kt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;ro&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=p2(t,r,i,e))}l==null&&(l=h2(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function tm(t){return t.top<t.bottom||t.left<t.right}function En(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(tm(r))return r}return Array.prototype.find.call(n,tm)||t.getBoundingClientRect()}const g2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function k1(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=ro||Kt;if(r.nodeType==3)if(o&&(g2.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=En(dn(r,i,i),n);if(Kt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=En(dn(r,i-1,i-1),-1);if(c.top==a.top){let u=En(dn(r,i,i+1),-1);if(u.top!=a.top)return Gi(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,Gi(En(dn(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Tt(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Vc(a.getBoundingClientRect(),!1)}if(s==null&&i<Tt(r)){let a=r.childNodes[i];if(a.nodeType==1)return Vc(a.getBoundingClientRect(),!0)}return Vc(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Tt(r))){let a=r.childNodes[i-1],c=a.nodeType==3?dn(a,Tt(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return Gi(En(c,1),!1)}if(s==null&&i<Tt(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?dn(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return Gi(En(c,-1),!0)}return Gi(En(r.nodeType==3?dn(r):r,-n),n>=0)}function Gi(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Vc(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function b1(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function y2(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return b1(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=k1(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=dn(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const v2=/[\u0590-\u08ac]/;function x2(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!v2.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:b1(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:v}=t.domSelectionRange(),x=m&&!p.contains(m.nodeType==1?m:m.parentNode)||a==m&&c==v;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return f!=null&&(l.caretBidiLevel=f),x}):r.pos==r.start()||r.pos==r.end()}let nm=null,rm=null,im=!1;function w2(t,e,n){return nm==e&&rm==n?im:(nm=e,rm=n,im=n=="up"||n=="down"?y2(t,e,n):x2(t,e,n))}const Dt=0,sm=1,gr=2,on=3;class io{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Dt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Re(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof N1){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof S1&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Re(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Re(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let u=o+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=o;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Re(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Re(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let m=this.children[f],v=p+m.size;if(s>p&&o<v)return m.setSelection(e-p-m.border,n-p-m.border,r,i);p=v}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((Kt||Xe)&&e==n){let{node:f,offset:p}=l;if(f.nodeType==3){if(u=!!(p&&f.nodeValue[p-1]==`
`),u&&p==f.nodeValue.length)for(let m=f,v;m;m=m.parentNode){if(v=m.nextSibling){v.nodeName=="BR"&&(l=a={node:v.parentNode,offset:Re(v)+1});break}let x=m.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let m=f.childNodes[p-1];u=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Kt&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||u&&Xe)&&Ir(l.node,l.offset,c.anchorNode,c.anchorOffset)&&Ir(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),d=!0}catch{}}if(!d){if(e>n){let p=l;l=a,a=p}let f=document.createRange();f.setEnd(a.node,a.offset),f.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?gr:sm,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=on:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?gr:on}r=o}this.dirty=gr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?gr:sm;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class S1 extends io{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Dt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class k2 extends io{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Lr extends io{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=$r.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Lr(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&on||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=on&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Dt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Dt}}slice(e,n,r){let i=Lr.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=hd(s,n,o,r)),e>0&&(s=hd(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Qn extends io{constructor(e,n,r,i,s,o,l,a,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,c=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=$r.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=M1(u,r,n),c?a=new b2(e,n,r,i,u,d||null,f,c,s,o+1):n.isText?new Ka(e,n,r,i,u,f,s):new Qn(e,n,r,i,u,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>N.empty)}return e}matchesNode(e,n,r){return this.dirty==Dt&&e.eq(this.node)&&$l(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new N2(this,o&&o.node,e);M2(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?ne.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,d,f)=>{a.syncToMarks(c.marks,r,e);let p;a.findNodeMatch(c,u,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,u,d,p,e)||a.updateNextNode(c,u,d,e,f,i)||a.addNode(c,u,d,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==gr)&&(o&&this.protectLocalComposition(e,o),C1(this.contentDOM,this.children,e),ji&&T2(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof _)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=O2(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new k2(this,s,n,i);e.input.compositionNodes.push(o),this.children=hd(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==on||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Dt}updateOuterDeco(e){if($l(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=E1(this.dom,this.nodeDOM,fd(this.outerDeco,this.node,n),fd(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function om(t,e,n,r,i){M1(r,e,t);let s=new Qn(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Ka extends Qn{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==on||this.dirty!=Dt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Dt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Dt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Ka(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=on)}get domAtom(){return!1}isText(e){return this.node.text==e}}class N1 extends io{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Dt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class b2 extends Qn{constructor(e,n,r,i,s,o,l,a,c,u){super(e,n,r,i,s,o,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==on)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function C1(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=lm(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof Lr){let a=r?r.previousSibling:t.lastChild;C1(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=lm(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ys=function(t){t&&(this.nodeName=t)};ys.prototype=Object.create(null);const yr=[new ys];function fd(t,e,n){if(t.length==0)return yr;let r=n?yr[0]:new ys,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new ys(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new ys(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function E1(t,e,n,r){if(n==yr&&r==yr)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=yr[0]),i=a}S2(i,l||yr[0],o)}return i}function S2(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function M1(t,e,n){return E1(t,t,yr,fd(e,n,t.nodeType!=1))}function $l(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function lm(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class N2{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=C2(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Dt,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=Lr.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==on&&o.dom==o.contentDOM&&(o.dirty=gr),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Qn){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;let u=a.dom,d,f=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=on&&$l(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=gr,d.updateChildren(i,o+1),d.dirty=Dt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!$l(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Qn.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=Qn.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new S1(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Lr;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Ka)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Xe||Ke)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new N1(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function C2(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof Lr)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function E2(t,e){return t.type.side-e.type.side}function M2(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let x=i[o++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(E2);for(let x=0;x<d.length;x++)n(d[x],c,!!a)}else n(u,c,!!a);let f,p;if(a)p=-1,f=a,a=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let x=0;x<l.length;x++)l[x].to<=s&&l.splice(x--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let x=m;o<i.length&&i[o].from<x&&(x=i[o].from);for(let y=0;y<l.length;y++)l[y].to<x&&(x=l[y].to);x<m&&(a=f.cut(x-s),f=f.cut(0,x-s),m=x,p=-1)}else for(;o<i.length&&i[o].to<m;)o++;let v=f.isInline&&!f.isLeaf?l.filter(x=>!x.inline):l.slice();r(f,v,e.forChild(s,f),p),s=m}}function T2(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function O2(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=n){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function hd(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],c=l,u=l+=a.size;c>=n||u<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(a.slice(n-c,a.size,r)))}return s}function _f(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(Ua(n)){for(a=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&F.isSelectable(d)&&i.parent&&!(d.isInline&&t2(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new F(o==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[a,o]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;c=Hf(t,u,l,d)}return c}function T1(t){return t.editable?t.hasFocus():j1(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function gn(t,e=!1){let n=t.state.selection;if(O1(t,n),!!T1(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ke){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ir(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)A2(t);else{let{anchor:r,head:i}=n,s,o;am&&!(n instanceof _)&&(n.$from.parent.inlineContent||(s=cm(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=cm(t,n.to))),t.docView.setSelection(r,i,t.root,e),am&&(s&&um(s),o&&um(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&j2(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const am=Xe||Ke&&g1<63;function cm(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Xe&&i&&i.contentEditable=="false")return Wc(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Wc(i);if(s)return Wc(s)}}function Wc(t){return t.contentEditable="true",Xe&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function um(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function j2(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!T1(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function A2(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Re(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&ut&&Yn<=11&&(r.disabled=!0,r.disabled=!1)}function O1(t,e){if(e instanceof F){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(dm(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else dm(t)}function dm(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Hf(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||_.between(e,n,r)}function fm(t){return t.editable&&!t.hasFocus()?!1:j1(t)}function j1(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function D2(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ir(e.node,e.offset,n.anchorNode,n.anchorOffset)}function pd(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&W.findFrom(s,e)}function On(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function hm(t,e,n){let r=t.state.selection;if(r instanceof _)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return On(t,new _(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=pd(t.state,e);return i&&i instanceof F?On(t,i):!1}else if(!(Ct&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?F.isSelectable(s)?On(t,new F(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):ro?On(t,new _(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof F&&r.node.isInline)return On(t,new _(e>0?r.$to:r.$from));{let i=pd(t.state,e);return i?On(t,i):!1}}}function _l(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function vs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ur(t,e){return e<0?P2(t):R2(t)}function P2(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Kt&&n.nodeType==1&&r<_l(n)&&vs(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(vs(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(A1(n))break;{let l=n.previousSibling;for(;l&&vs(l,-1);)i=n.parentNode,s=Re(l),l=l.previousSibling;if(l)n=l,r=_l(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?md(t,n,r):i&&md(t,i,s)}function R2(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=_l(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(vs(l,1))s=n,o=++r;else break}else{if(A1(n))break;{let l=n.nextSibling;for(;l&&vs(l,1);)s=l.parentNode,o=Re(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=_l(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&md(t,s,o)}function A1(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function I2(t,e){for(;t&&e==t.childNodes.length&&!no(t);)e=Re(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function L2(t,e){for(;t&&!e&&!no(t);)e=Re(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function md(t,e,n){if(e.nodeType!=3){let s,o;(o=I2(e,n))?(e=o,n=0):(s=L2(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ua(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&gn(t)},50)}function pm(t,e){let n=t.state.doc.resolve(e);if(!(Ke||i2)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function mm(t,e,n){let r=t.state.selection;if(r instanceof _&&!r.empty||n.indexOf("s")>-1||Ct&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=pd(t.state,e);if(o&&o instanceof F)return On(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof Wt?W.near(o,e):W.findFrom(o,e);return l?On(t,l):!1}return!1}function gm(t,e){if(!(t.state.selection instanceof _))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function ym(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function z2(t){if(!Xe||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ym(t,r,"true"),setTimeout(()=>ym(t,r,"false"),20)}return!1}function B2(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function F2(t,e){let n=e.keyCode,r=B2(e);if(n==8||Ct&&n==72&&r=="c")return gm(t,-1)||Ur(t,-1);if(n==46&&!e.shiftKey||Ct&&n==68&&r=="c")return gm(t,1)||Ur(t,1);if(n==13||n==27)return!0;if(n==37||Ct&&n==66&&r=="c"){let i=n==37?pm(t,t.state.selection.from)=="ltr"?-1:1:-1;return hm(t,i,r)||Ur(t,i)}else if(n==39||Ct&&n==70&&r=="c"){let i=n==39?pm(t,t.state.selection.from)=="ltr"?1:-1:1;return hm(t,i,r)||Ur(t,i)}else{if(n==38||Ct&&n==80&&r=="c")return mm(t,-1,r)||Ur(t,-1);if(n==40||Ct&&n==78&&r=="c")return z2(t)||mm(t,1,r)||Ur(t,1);if(r==(Ct?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function D1(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=t.someProp("clipboardSerializer")||$r.fromSchema(t.state.schema),l=B1(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=z1[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=l.createElement(u[p]);for(;a.firstChild;)m.appendChild(a.firstChild);a.appendChild(m),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function P1(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new P(N.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):P.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:p}=t.state,m=$r.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(v=>{let x=o.appendChild(document.createElement("p"));v&&x.appendChild(m.serializeNode(p.text(v,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=V2(n),ro&&W2(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Gn.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!$2.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)l=U2(vm(l,+u[1],+u[2]),u[4]);else if(l=P.maxOpen(_2(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let p=l.content.firstChild;d<l.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=l.content.lastChild;f<l.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);l=vm(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const $2=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function _2(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&I1(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=L1(o[o.length-1],s.length));let u=R1(l,a);o.push(u),i=i.matchType(u.type),s=a}}),o)return N.from(o)}return t}function R1(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,N.from(t));return t}function I1(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=I1(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(N.from(R1(n,t,i+1))))}}function L1(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,L1(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(N.empty,!0);return t.copy(n.append(r))}function gd(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=gd(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(N.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function vm(t,e,n){return e<t.openStart&&(t=new P(gd(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new P(gd(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const z1={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let xm=null;function B1(){return xm||(xm=document.implementation.createHTMLDocument("title"))}let Uc=null;function H2(t){let e=window.trustedTypes;return e?(Uc||(Uc=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Uc.createHTML(t)):t}function V2(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=B1().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&z1[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=H2(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function W2(t){let e=t.querySelectorAll(Ke?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function U2(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=N.from(a.create(r[l+1],i)),s++,o++}return new P(i,s,o)}const Ze={},et={},K2={touchstart:!0,touchmove:!0};class q2{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function J2(t){for(let e in Ze){let n=Ze[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Y2(t,r)&&!Vf(t,r)&&(t.editable||!(r.type in et))&&n(t,r)},K2[e]?{passive:!0}:void 0)}Xe&&t.dom.addEventListener("input",()=>null),yd(t)}function $n(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function G2(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function yd(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Vf(t,r))})}function Vf(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Y2(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Q2(t,e){!Vf(t,e)&&Ze[e.type]&&(t.editable||!(e.type in et))&&Ze[e.type](t,e)}et.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!$1(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!($t&&Ke&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ji&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,dr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||F2(t,n)?n.preventDefault():$n(t,"key")};et.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};et.keypress=(t,e)=>{let n=e;if($1(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ct&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof _)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function qa(t){return{left:t.clientX,top:t.clientY}}function X2(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Wf(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function xi(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Z2(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&F.isSelectable(r)?(xi(t,new F(n)),!0):!1}function eN(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof F&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(F.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(xi(t,F.create(t.state.doc,i)),!0):!1}function tN(t,e,n,r,i){return Wf(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?eN(t,n):Z2(t,n))}function nN(t,e,n,r){return Wf(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function rN(t,e,n,r){return Wf(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||iN(t,n,r)}function iN(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(xi(t,_.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)xi(t,_.create(r,l+1,l+1+o.content.size));else if(F.isSelectable(o))xi(t,F.create(r,l));else continue;return!0}}function Uf(t){return Hl(t)}const F1=Ct?"metaKey":"ctrlKey";Ze.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Uf(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&X2(n,t.input.lastClick)&&!n[F1]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(qa(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new sN(t,o,n,!!r)):(s=="doubleClick"?nN:rN)(t,o.pos,o.inside,n)?n.preventDefault():$n(t,"pointer"))};class sN{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[F1],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof F&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Kt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),$n(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>gn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(qa(e))),this.updateAllowDefault(e),this.allowDefault||!n?$n(this.view,"pointer"):tN(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Xe&&this.mightDrag&&!this.mightDrag.node.isAtom||Ke&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(xi(this.view,W.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):$n(this.view,"pointer")}move(e){this.updateAllowDefault(e),$n(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ze.touchstart=t=>{t.input.lastTouch=Date.now(),Uf(t),$n(t,"pointer")};Ze.touchmove=t=>{t.input.lastTouch=Date.now(),$n(t,"pointer")};Ze.contextmenu=t=>Uf(t);function $1(t,e){return t.composing?!0:Xe&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const oN=$t?5e3:-1;et.compositionstart=et.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof _&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Hl(t,!0),t.markCursor=null;else if(Hl(t,!e.selection.empty),Kt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}_1(t,oN)};et.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,_1(t,20))};function _1(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Hl(t),e))}function H1(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=aN());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function lN(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=ZS(e.focusNode,e.focusOffset),r=e2(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function aN(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Hl(t,e=!1){if(!($t&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),H1(t),e||t.docView&&t.docView.dirty){let n=_f(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function cN(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Vs=ut&&Yn<15||ji&&s2<604;Ze.copy=et.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Vs?null:n.clipboardData,o=r.content(),{dom:l,text:a}=D1(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):cN(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function uN(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function dN(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ws(t,r.value,null,i,e):Ws(t,r.textContent,r.innerHTML,i,e)},50)}function Ws(t,e,n,r,i){let s=P1(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||P.empty)))return!0;if(!s)return!1;let o=uN(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function V1(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}et.paste=(t,e)=>{let n=e;if(t.composing&&!$t)return;let r=Vs?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ws(t,V1(r),r.getData("text/html"),i,n)?n.preventDefault():dN(t,n)};class W1{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const U1=Ct?"altKey":"ctrlKey";Ze.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(qa(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof F?i.to-1:i.to))){if(r&&r.mightDrag)o=F.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=F.create(t.state.doc,d.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:c,slice:u}=D1(t,l);(!n.dataTransfer.files.length||!Ke||g1>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Vs?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Vs||n.dataTransfer.setData("text/plain",c),t.dragging=new W1(u,!n[U1],o)};Ze.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};et.dragover=et.dragenter=(t,e)=>e.preventDefault();et.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(qa(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",m=>{o=m(o,t)}):o=P1(t,V1(n.dataTransfer),Vs?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&!n[U1]);if(t.someProp("handleDrop",m=>m(t,n,o||P.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let a=o?l1(t.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let c=t.state.tr;if(l){let{node:m}=r;m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(a),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let p=c.doc.resolve(u);if(d&&F.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new F(p));else{let m=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((v,x,y,g)=>m=g),c.setSelection(Hf(t,p,c.doc.resolve(m)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Ze.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&gn(t)},20))};Ze.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ze.beforeinput=(t,e)=>{if(Ke&&$t&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,dr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in et)Ze[t]=et[t];function Us(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Vl{constructor(e,n){this.toDOM=e,this.spec=n||Cr,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new jt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Vl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Us(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Xn{constructor(e,n){this.attrs=e,this.spec=n||Cr}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new jt(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Xn&&Us(this.attrs,e.attrs)&&Us(this.spec,e.spec)}static is(e){return e.type instanceof Xn}destroy(){}}class Kf{constructor(e,n){this.attrs=e,this.spec=n||Cr}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new jt(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Kf&&Us(this.attrs,e.attrs)&&Us(this.spec,e.spec)}destroy(){}}class jt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new jt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new jt(e,e,new Vl(n,r))}static inline(e,n,r,i){return new jt(e,n,new Xn(r,i))}static node(e,n,r,i){return new jt(e,n,new Kf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xn}get widget(){return this.type instanceof Vl}}const Jr=[],Cr={};class be{constructor(e,n){this.local=e.length?e:Jr,this.children=n.length?n:Jr}static create(e,n){return n.length?Wl(n,e,0,Cr):We}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==We||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Cr)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?fN(this.children,o||[],e,n,r,i,s):o?new be(o.sort(Er),Jr):We}add(e,n){return n.length?this==We?be.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,u;if(u=q1(n,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,u,c+1):i.splice(s,0,a,a+l.nodeSize,Wl(u,l,c+1,Cr)),s+=3}});let o=K1(s?J1(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new be(o.length?this.local.concat(o).sort(Er):this.local,i||this.children)}remove(e){return e.length==0||this==We?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=We?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new be(i,r):We}forChild(e,n){if(this==We)return this;if(n.isLeaf)return be.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof Xn){let c=Math.max(s,a.from)-s,u=Math.min(o,a.to)-s;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new be(i.sort(Er),Jr);return r?new Rn([l,r]):l}return r||We}eq(e){if(this==e)return!0;if(!(e instanceof be)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return qf(this.localsInner(e))}localsInner(e){if(this==We)return Jr;if(e.inlineContent||!this.local.some(Xn.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Xn||n.push(this.local[r]);return n}forEachSet(e){e(this)}}be.empty=new be([],[]);be.removeOverlap=qf;const We=be.empty;class Rn{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Cr));return Rn.from(r)}forChild(e,n){if(n.isLeaf)return be.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=We&&(s instanceof Rn?r=r.concat(s.members):r.push(s))}return Rn.from(r)}eq(e){if(!(e instanceof Rn)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?qf(r?n:n.sort(Er)):Jr}static from(e){switch(e.length){case 0:return We;case 1:return e[0];default:return new Rn(e.every(n=>n instanceof be)?e:e.reduce((n,r)=>n.concat(r instanceof be?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function fN(t,e,n,r,i,s,o){let l=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,p,m,v)=>{let x=v-m-(p-f);for(let y=0;y<l.length;y+=3){let g=l[y+1];if(g<0||f>g+u-d)continue;let w=l[y]+u-d;p>=w?l[y+1]=f<=w?-2:-1:f>=u&&x&&(l[y]+=x,l[y+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[c+1]+s,-1),p=f-i,{index:m,offset:v}=r.content.findIndex(d),x=r.maybeChild(m);if(x&&v==d&&v+x.nodeSize==p){let y=l[c+2].mapInner(n,x,u+1,t[c]+s+1,o);y!=We?(l[c]=d,l[c+1]=p,l[c+2]=y):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=hN(l,t,e,n,i,s,o),u=Wl(c,r,0,o);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let p=u.children[d];for(;f<l.length&&l[f]<p;)f+=3;l.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new be(e.sort(Er),l)}function K1(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new jt(i.from+e,i.to+e,i.type))}return n}function hN(t,e,n,r,i,s,o){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function q1(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function J1(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Wl(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let c=q1(t,l,a+n);if(c){s=!0;let u=Wl(c,l,n+a+1,r);u!=We&&i.push(a,a+l.nodeSize,u)}});let o=K1(s?J1(t):t,-n).sort(Er);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new be(o,i):We}function Er(t,e){return t.from-e.from||t.to-e.to}function qf(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),wm(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),wm(e,i,r.copy(s.from,r.to)));break}}}return e}function wm(t,e,n){for(;e<t.length&&Er(n,t[e])>0;)e++;t.splice(e,0,n)}function Kc(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=We&&e.push(r)}),t.cursorWrapper&&e.push(be.create(t.state.doc,[t.cursorWrapper.deco])),Rn.from(e)}const pN={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mN=ut&&Yn<=11;class gN{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class yN{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gN,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ut&&Yn<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),mN&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,pN)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(fm(this.view)){if(this.suppressingSelectionUpdates)return gn(this.view);if(ut&&Yn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ir(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Hs(s))n.add(s);for(let s=e.anchorNode;s;s=Hs(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&fm(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(l=!0))}if(Kt&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let p=f.parentNode;p&&p.nodeName=="LI"&&(!d||wN(e,d)!=p)&&f.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ua(r)&&(c=_f(e))&&c.eq(W.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,gn(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),vN(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||gn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ut&&Yn<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Re(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?Re(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let km=new WeakMap,bm=!1;function vN(t){if(!km.has(t)&&(km.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Kt,bm)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),bm=!0}}function Sm(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Ir(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function xN(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Sm(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Sm(t,n):null}function wN(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function kN(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Ua(a)||c.push({node:a.focusNode,offset:a.focusOffset})),Ke&&t.input.lastKeyCode===8)for(let x=s;x>i;x--){let y=r.childNodes[x-1],g=y.pmViewDesc;if(y.nodeName=="BR"&&!g){s=x;break}if(!g||g.size)break}let d=t.state.doc,f=t.someProp("domParser")||Gn.fromSchema(t.state.schema),p=d.resolve(o),m=null,v=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:bN,context:p});if(c&&c[0].pos!=null){let x=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=x),m={anchor:x+o,head:y+o}}return{doc:v,sel:m,from:o,to:l}}function bN(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Xe&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Xe&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const SN=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function NN(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let I=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,z=_f(t,I);if(z&&!t.state.selection.eq(z)){if(Ke&&$t&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",K=>K(t,dr(13,"Enter"))))return;let ee=t.state.tr.setSelection(z);I=="pointer"?ee.setMeta("pointer",!0):I=="key"&&ee.scrollIntoView(),s&&ee.setMeta("composition",s),t.dispatch(ee)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=kN(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=MN(d.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(ji&&t.input.lastIOSEnter>Date.now()-225||$t)&&i.some(I=>I.nodeType==1&&!SN.test(I.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",I=>I(t,dr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&a instanceof _&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let I=Nm(t,t.state.doc,c.sel);if(I&&!I.eq(t.state.selection)){let z=t.state.tr.setSelection(I);s&&z.setMeta("composition",s),t.dispatch(z)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof _&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ut&&Yn<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let v=c.doc.resolveNoCache(m.start-c.from),x=c.doc.resolveNoCache(m.endB-c.from),y=u.resolve(m.start),g=v.sameParent(x)&&v.parent.inlineContent&&y.end()>=m.endA,w;if((ji&&t.input.lastIOSEnter>Date.now()-225&&(!g||i.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!g&&v.pos<c.doc.content.size&&!v.sameParent(x)&&(w=W.findFrom(c.doc.resolve(v.pos+1),1,!0))&&w.head==x.pos)&&t.someProp("handleKeyDown",I=>I(t,dr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&EN(u,m.start,m.endA,v,x)&&t.someProp("handleKeyDown",I=>I(t,dr(8,"Backspace")))){$t&&Ke&&t.domObserver.suppressSelectionUpdates();return}Ke&&$t&&m.endB==m.start&&(t.input.lastAndroidDelete=Date.now()),$t&&!g&&v.start()!=x.start()&&x.parentOffset==0&&v.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,x=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(I){return I(t,dr(13,"Enter"))})},20));let k=m.start,S=m.endA,b,E,T;if(g){if(v.pos==x.pos)ut&&Yn<=11&&v.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>gn(t),20)),b=t.state.tr.delete(k,S),E=u.resolve(m.start).marksAcross(u.resolve(m.endA));else if(m.endA==m.endB&&(T=CN(v.parent.content.cut(v.parentOffset,x.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start()))))b=t.state.tr,T.type=="add"?b.addMark(k,S,T.mark):b.removeMark(k,S,T.mark);else if(v.parent.child(v.index()).isText&&v.index()==x.index()-(x.textOffset?0:1)){let I=v.parent.textBetween(v.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",z=>z(t,k,S,I)))return;b=t.state.tr.insertText(I,k,S)}}if(b||(b=t.state.tr.replace(k,S,c.doc.slice(m.start-c.from,m.endB-c.from))),c.sel){let I=Nm(t,b.doc,c.sel);I&&!(Ke&&$t&&t.composing&&I.empty&&(m.start!=m.endB||t.input.lastAndroidDelete<Date.now()-100)&&(I.head==k||I.head==b.mapping.map(S)-1)||ut&&I.empty&&I.head==k)&&b.setSelection(I)}E&&b.ensureMarks(E),s&&b.setMeta("composition",s),t.dispatch(b.scrollIntoView())}function Nm(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Hf(t,e.resolve(n.anchor),e.resolve(n.head))}function CN(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(N.from(c).eq(t))return{mark:l,type:o}}function EN(t,e,n,r,i){if(n-e<=i.pos-r.pos||qc(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(qc(s,!0,!0));return!o.parent.isTextblock||o.pos>n||qc(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function qc(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function MN(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&Cm(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<t.size&&Cm(t.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function Cm(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class TN{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new q2,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(jm),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Tm(this),Mm(this),this.nodeViews=Om(this),this.docView=om(this.state.doc,Em(this),Kc(this),this.dom,this),this.domObserver=new yN(this,(r,i,s,o)=>NN(this,r,i,s,o)),this.domObserver.start(),J2(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&yd(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(jm),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(H1(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=Om(this);jN(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&yd(this),this.editable=Tm(this),Mm(this);let a=Kc(this),c=Em(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(i.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&a2(this);if(o){this.domObserver.stop();let p=d&&(ut||Ke)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&ON(i.selection,e.selection);if(d){let m=Ke?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=lN(this)),(s||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=om(e.doc,c,a,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&D2(this))?gn(this,p):(O1(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&c2(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof F){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&em(this,n.getBoundingClientRect(),e)}else em(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new W1(e.slice,e.move,i<0?void 0:F.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(ut){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&u2(this.dom),gn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return m2(this,e)}coordsAtPos(e,n=1){return k1(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return w2(this,n||this.state,e)}pasteHTML(e,n){return Ws(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ws(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(G2(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Kc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,QS())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Q2(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Xe&&this.root.nodeType===11&&n2(this.dom.ownerDocument)==this.dom&&xN(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Em(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[jt.node(0,t.state.doc.content.size,e)]}function Mm(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:jt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Tm(t){return!t.someProp("editable",e=>e(t.state)===!1)}function ON(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Om(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function jN(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function jm(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var tr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ul={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},AN=typeof navigator<"u"&&/Mac/.test(navigator.platform),DN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ie=0;Ie<10;Ie++)tr[48+Ie]=tr[96+Ie]=String(Ie);for(var Ie=1;Ie<=24;Ie++)tr[Ie+111]="F"+Ie;for(var Ie=65;Ie<=90;Ie++)tr[Ie]=String.fromCharCode(Ie+32),Ul[Ie]=String.fromCharCode(Ie);for(var Jc in tr)Ul.hasOwnProperty(Jc)||(Ul[Jc]=tr[Jc]);function PN(t){var e=AN&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||DN&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ul:tr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const RN=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function IN(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))RN?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function LN(t){let e=Object.create(null);for(let n in t)e[IN(n)]=t[n];return e}function Gc(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function zN(t){return new $e({props:{handleKeyDown:G1(t)}})}function G1(t){let e=LN(t);return function(n,r){let i=PN(r),s,o=e[Gc(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Gc(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=tr[r.keyCode])&&s!=i){let l=e[Gc(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const BN=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Y1(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const FN=(t,e,n)=>{let r=Y1(t,n);if(!r)return!1;let i=Jf(r);if(!i){let o=r.blockRange(),l=o&&zi(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(ev(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Ai(s,"end")||F.isSelectable(s)))for(let o=r.depth;;o--){let l=Va(t.doc,r.before(o),r.after(o),P.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(Ai(s,"end")?W.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):F.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},$N=(t,e,n)=>{let r=Y1(t,n);if(!r)return!1;let i=Jf(r);return i?Q1(t,i,e):!1},_N=(t,e,n)=>{let r=X1(t,n);if(!r)return!1;let i=Gf(r);return i?Q1(t,i,e):!1};function Q1(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=Va(t.doc,s,a,P.empty);if(!c||c.from!=s||c instanceof Ee&&c.slice.size>=a-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(_.create(u.doc,s)),n(u.scrollIntoView())}return!0}function Ai(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const HN=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Jf(r)}let o=s&&s.nodeBefore;return!o||!F.isSelectable(o)?!1:(e&&e(t.tr.setSelection(F.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Jf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function X1(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const VN=(t,e,n)=>{let r=X1(t,n);if(!r)return!1;let i=Gf(r);if(!i)return!1;let s=i.nodeAfter;if(ev(t,i,e,1))return!0;if(r.parent.content.size==0&&(Ai(s,"start")||F.isSelectable(s))){let o=Va(t.doc,r.before(),r.after(),P.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(Ai(s,"start")?W.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):F.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},WN=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Gf(r)}let o=s&&s.nodeAfter;return!o||!F.isSelectable(o)?!1:(e&&e(t.tr.setSelection(F.create(t.doc,s.pos)).scrollIntoView()),!0)};function Gf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const UN=(t,e)=>{let n=t.selection,r=n instanceof F,i;if(r){if(n.node.isTextblock||!sr(t.doc,n.from))return!1;i=n.from}else if(i=Ha(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(F.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},KN=(t,e)=>{let n=t.selection,r;if(n instanceof F){if(n.node.isTextblock||!sr(t.doc,n.to))return!1;r=n.to}else if(r=Ha(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},qN=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&zi(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},JN=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Z1(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const GN=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Z1(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(W.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},YN=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Wt||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Z1(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(_.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},QN=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(yi(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&zi(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},XN=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(F.create(t.doc,i))),!0)};function ZN(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||sr(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function ev(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&ZN(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let p=e.pos+s.nodeSize,m=N.empty;for(let y=o.length-1;y>=0;y--)m=N.from(o[y].create(null,m));m=N.from(i.copy(m));let v=t.tr.step(new Te(e.pos-1,p,e.pos,p,new P(m,1,0),o.length,!0)),x=v.doc.resolve(p+2*o.length);x.nodeAfter&&x.nodeAfter.type==i.type&&sr(v.doc,x.pos)&&v.join(x.pos),n(v.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&a?null:W.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&zi(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&Ai(s,"start",!0)&&Ai(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let v=s,x=1;for(;!v.isTextblock;v=v.firstChild)x++;if(p.canReplace(p.childCount,p.childCount,v.content)){if(n){let y=N.empty;for(let w=m.length-1;w>=0;w--)y=N.from(m[w].copy(y));let g=t.tr.step(new Te(e.pos-m.length,e.pos+s.nodeSize,e.pos+x,e.pos+s.nodeSize-x,new P(y,m.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function tv(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(_.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const eC=tv(-1),tC=tv(1);function nC(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&Bf(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Am(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function rC(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=!1,a=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);a=new Ll(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new Ll(i,n.doc.resolve(s.end(o.depth)),o.depth)),l=!0}let c=Bf(a,t,e,o);return c?(r&&r(iC(n.tr,o,c,l,t).scrollIntoView()),!0):!1}}function iC(t,e,n,r,i){let s=N.empty;for(let u=n.length-1;u>=0;u--)s=N.from(n[u].type.create(n[u].attrs,s));t.step(new Te(e.start-(r?2:0),e.end,e.start,e.end,new P(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let l=n.length-o,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&yi(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function sC(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?oC(e,n,t,s):lC(e,n,s):!0:!1}}function oC(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Te(s-1,o,s,o,new P(N.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ll(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=zi(r);if(l==null)return!1;i.lift(r,l);let a=i.mapping.map(s,-1)-1;return sr(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function lC(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,m=n.endIndex-1,v=n.startIndex;m>v;m--)p-=i.child(m).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?N.empty:N.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new Te(d-(l?1:0),f+(a?1:0),d+1,f-1,new P((l?N.empty:N.from(i.copy(N.empty))).append(a?N.empty:N.from(i.copy(N.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function aC(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=N.from(c?t.create():null),d=new P(N.from(t.create(null,N.from(l.type.create(null,u)))),c?3:1,0),f=s.start,p=s.end;n(e.tr.step(new Te(f-(c?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}function Ja(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class Ga{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const d=a(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],a=!!e,c=e||s.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,p])=>[f,(...v)=>{const x=this.buildProps(c,n),y=p(...v)(x);return l.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l={tr:e,editor:i,view:o,state:Ja({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class cC{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function L(t,e,n){return t.config[e]===void 0&&t.parent?L(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?L(t.parent,e,n):null}):t.config[e]}function Ya(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function nv(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ya(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},a=L(o,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,p])=>{e.push({type:d,name:f,attribute:{...s,...p}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=L(o,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,d])=>{const f={...s,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function je(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Fe(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?s.split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),l.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function vd(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Fe(n,r),{})}function rv(t){return typeof t=="function"}function q(t,e=void 0,...n){return rv(t)?e?t.bind(e)(...n):t(...n):t}function uC(t={}){return Object.keys(t).length===0&&t.constructor===Object}function dC(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Dm(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):dC(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function Pm(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&uC(n)?!1:n!=null))}function fC(t,e){var n;const r=nv(t),{nodeExtensions:i,markExtensions:s}=Ya(t),o=(n=i.find(c=>L(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,g)=>{const w=L(g,"extendNodeSchema",d);return{...y,...w?w(c):{}}},{}),p=Pm({...f,content:q(L(c,"content",d)),marks:q(L(c,"marks",d)),group:q(L(c,"group",d)),inline:q(L(c,"inline",d)),atom:q(L(c,"atom",d)),selectable:q(L(c,"selectable",d)),draggable:q(L(c,"draggable",d)),code:q(L(c,"code",d)),whitespace:q(L(c,"whitespace",d)),defining:q(L(c,"defining",d)),isolating:q(L(c,"isolating",d)),attrs:Object.fromEntries(u.map(y=>{var g;return[y.name,{default:(g=y==null?void 0:y.attribute)===null||g===void 0?void 0:g.default}]}))}),m=q(L(c,"parseHTML",d));m&&(p.parseDOM=m.map(y=>Dm(y,u)));const v=L(c,"renderHTML",d);v&&(p.toDOM=y=>v({node:y,HTMLAttributes:vd(y,u)}));const x=L(c,"renderText",d);return x&&(p.toText=x),[c.name,p]})),a=Object.fromEntries(s.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((x,y)=>{const g=L(y,"extendMarkSchema",d);return{...x,...g?g(c):{}}},{}),p=Pm({...f,inclusive:q(L(c,"inclusive",d)),excludes:q(L(c,"excludes",d)),group:q(L(c,"group",d)),spanning:q(L(c,"spanning",d)),code:q(L(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var y;return[x.name,{default:(y=x==null?void 0:x.attribute)===null||y===void 0?void 0:y.default}]}))}),m=q(L(c,"parseHTML",d));m&&(p.parseDOM=m.map(x=>Dm(x,u)));const v=L(c,"renderHTML",d);return v&&(p.toDOM=x=>v({mark:x,HTMLAttributes:vd(x,u)})),[c.name,p]}));return new Yy({topNode:o,nodes:l,marks:a})}function Yc(t,e){return e.nodes[t]||e.marks[t]||null}function Rm(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const hC=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function Yf(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Qa{constructor(e){this.find=e.find,this.handler=e.handler}}const pC=(t,e)=>{if(Yf(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function jo(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=hC(c)+s;return o.forEach(f=>{if(u)return;const p=pC(d,f.find);if(!p)return;const m=a.state.tr,v=Ja({state:a.state,transaction:m}),x={from:r-(p[0].length-s.length),to:i},{commands:y,chain:g,can:w}=new Ga({editor:n,state:v});f.handler({state:v,range:x,match:p,commands:y,chain:g,can:w})===null||!m.steps.length||(m.setMeta(l,{transform:m,from:r,to:i,text:s}),a.dispatch(m),u=!0)}),u}function mC(t){const{editor:e,rules:n}=t,r=new $e({state:{init(){return null},apply(i,s){const o=i.getMeta(r);if(o)return o;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{const{from:c,text:u}=l,d=c+u.length;jo({editor:e,from:c,to:d,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return jo({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&jo({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?jo({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function gC(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ao(t){return gC(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Xa(t,e){const n={...t};return Ao(t)&&Ao(e)&&Object.keys(e).forEach(r=>{Ao(e[r])&&Ao(t[r])?n[r]=Xa(t[r],e[r]):n[r]=e[r]}),n}class kn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=q(L(this,"addOptions",{name:this.name}))),this.storage=q(L(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new kn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Xa(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new kn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=q(L(n,"addOptions",{name:n.name})),n.storage=q(L(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=o.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function yC(t){return typeof t=="number"}class vC{constructor(e){this.find=e.find,this.handler=e.handler}}const xC=(t,e,n)=>{if(Yf(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function wC(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:a,chain:c,can:u}=new Ga({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(p,m)=>{if(!p.isTextblock||p.type.spec.code)return;const v=Math.max(r,m),x=Math.min(i,m+p.content.size),y=p.textBetween(v-m,x-m,void 0,"");xC(y,s.find,o).forEach(w=>{if(w.index===void 0)return;const k=v+w.index+1,S=k+w[0].length,b={from:n.tr.mapping.map(k),to:n.tr.mapping.map(S)},E=s.handler({state:n,range:b,match:w,commands:a,chain:c,can:u,pasteEvent:o,dropEvent:l});d.push(E)})}),d.every(p=>p!==null)}const kC=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function bC(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l=typeof DragEvent<"u"?new DragEvent("drop"):null;const a=({state:u,from:d,to:f,rule:p,pasteEvt:m})=>{const v=u.tr,x=Ja({state:u,transaction:v});if(!(!wC({editor:e,state:x,from:Math.max(d-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:l})||!v.steps.length))return l=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v};return n.map(u=>new $e({view(d){const f=p=>{var m;r=!((m=d.dom.parentElement)===null||m===void 0)&&m.contains(p.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(d,f)=>(s=r===d.dom.parentElement,l=f,!1),paste:(d,f)=>{var p;const m=(p=f.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,p)=>{const m=d[0],v=m.getMeta("uiEvent")==="paste"&&!i,x=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),g=!!y;if(!v&&!x&&!g)return;if(g){const{from:S,text:b}=y,E=S+b.length,T=kC(b);return a({rule:u,state:p,from:S,to:{b:E},pasteEvt:T})}const w=f.doc.content.findDiffStart(p.doc.content),k=f.doc.content.findDiffEnd(p.doc.content);if(!(!yC(w)||!k||w===k.b))return a({rule:u,state:p,from:w,to:k,pasteEvt:o})}}))}function SC(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class ci{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=ci.resolve(e),this.schema=fC(this.extensions,n),this.setupExtensions()}static resolve(e){const n=ci.sort(ci.flatten(e)),r=SC(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=L(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=L(r,"priority")||100,o=L(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Yc(n.name,this.schema)},i=L(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=ci.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:Yc(o.name,this.schema)},a=[],c=L(o,"addKeyboardShortcuts",l);let u={};if(o.type==="mark"&&L(o,"exitable",l)&&(u.ArrowRight=()=>kn.handleExit({editor:e,mark:o})),c){const v=Object.fromEntries(Object.entries(c()).map(([x,y])=>[x,()=>y({editor:e})]));u={...u,...v}}const d=zN(u);a.push(d);const f=L(o,"addInputRules",l);Rm(o,e.options.enableInputRules)&&f&&r.push(...f());const p=L(o,"addPasteRules",l);Rm(o,e.options.enablePasteRules)&&p&&i.push(...p());const m=L(o,"addProseMirrorPlugins",l);if(m){const v=m();a.push(...v)}return a}).flat();return[mC({editor:e,rules:r}),...bC({editor:e,rules:i}),...s]}get attributes(){return nv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Ya(this.extensions);return Object.fromEntries(n.filter(r=>!!L(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:je(r.name,this.schema)},o=L(r,"addNodeView",s);if(!o)return[];const l=(a,c,u,d,f)=>{const p=vd(a,i);return o()({node:a,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:p})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Yc(e.name,this.schema)};e.type==="mark"&&(!((n=q(L(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=L(e,"onBeforeCreate",r),s=L(e,"onCreate",r),o=L(e,"onUpdate",r),l=L(e,"onSelectionUpdate",r),a=L(e,"onTransaction",r),c=L(e,"onFocus",r),u=L(e,"onBlur",r),d=L(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class tt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=q(L(this,"addOptions",{name:this.name}))),this.storage=q(L(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Xa(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new tt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=q(L(n,"addOptions",{name:n.name})),n.storage=q(L(n,"addStorage",{name:n.name,options:n.options})),n}}function iv(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,d)=>{var f;a.isBlock&&c>r&&(l+=s);const p=o==null?void 0:o[a.type.name];if(p)return u&&(l+=p({node:a,pos:c,parent:u,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,i-c))}),l}function sv(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const NC=tt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new $e({key:new wt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),l=Math.max(...s.map(u=>u.$to.pos)),a=sv(n);return iv(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),CC=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),EC=(t=!1)=>({commands:e})=>e.setContent("",t),MC=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(a)),f=c.resolve(u.map(a+l.nodeSize)),p=d.blockRange(f);if(!p)return;const m=zi(p);if(l.type.isTextblock){const{defaultType:v}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,v)}(m||m===0)&&e.lift(p,m)})}),!0},TC=t=>e=>t(e),OC=()=>({state:t,dispatch:e})=>YN(t,e),jC=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new _(r.doc.resolve(o-1))),!0},AC=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),a=i.after(s);t.delete(l,a).scrollIntoView()}return!0}return!1},DC=t=>({tr:e,state:n,dispatch:r})=>{const i=je(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const a=s.before(o),c=s.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1},PC=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},RC=()=>({state:t,dispatch:e})=>BN(t,e),IC=()=>({commands:t})=>t.keyboardShortcut("Enter"),LC=()=>({state:t,dispatch:e})=>GN(t,e);function Kl(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Yf(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function xd(t,e,n={}){return t.find(r=>r.type===e&&Kl(r.attrs,n))}function zC(t,e,n={}){return!!xd(t,e,n)}function Qf(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if((!r.node||!r.node.marks.some(c=>c.type===e))&&(r=t.parent.childBefore(t.parentOffset)),!r.node||!r.node.marks.some(c=>c.type===e))return;const i=xd([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,l=s+1,a=o+r.node.nodeSize;for(xd([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&zC([...t.parent.child(l).marks],e,n);)a+=t.parent.child(l).nodeSize,l+=1;return{from:o,to:a}}function lr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const BC=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=lr(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const d=Qf(a,s,e);if(d&&d.from<=c&&d.to>=u){const f=_.create(o,d.from,d.to);n.setSelection(f)}}return!0},FC=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function ov(t){return t instanceof _}function vr(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function lv(t,e=null){if(!e)return null;const n=W.atStart(t),r=W.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?_.create(t,vr(0,i,s),vr(t.content.size,i,s)):_.create(t,vr(e,i,s),vr(e,i,s))}function Xf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const $C=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{Xf()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!ov(n.state.selection))return o(),!0;const l=lv(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},_C=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),HC=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),av=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&av(r)}return t};function Do(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return av(n)}function ql(t,e,n){n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return N.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),ql("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const a=new Yy({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Gn.fromSchema(a).parseSlice(Do(t),n.parseOptions):Gn.fromSchema(a).parse(Do(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Gn.fromSchema(e);return n.slice?s.parseSlice(Do(t),n.parseOptions).content:s.parse(Do(t),n.parseOptions)}return ql("",e,n)}function VC(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ee||i instanceof Te))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,a,c,u)=>{o===0&&(o=u)}),t.setSelection(W.near(t.doc.resolve(o),n))}const WC=t=>!("type"in t),UC=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=ql(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(m){return s.emit("contentError",{editor:s,error:m,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((WC(l)?l:[l]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,d=d?m.isBlock:!1}),a===c&&d){const{parent:m}=r.doc.resolve(a);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(a-=1,c+=1)}let p;u?(Array.isArray(e)?p=e.map(m=>m.text||"").join(""):typeof e=="object"&&e&&e.text?p=e.text:p=e,r.insertText(p,a,c)):(p=l,r.replaceWith(a,c,p)),n.updateSelection&&VC(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:p})}return!0},KC=()=>({state:t,dispatch:e})=>UN(t,e),qC=()=>({state:t,dispatch:e})=>KN(t,e),JC=()=>({state:t,dispatch:e})=>FN(t,e),GC=()=>({state:t,dispatch:e})=>VN(t,e),YC=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ha(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},QC=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ha(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},XC=()=>({state:t,dispatch:e})=>$N(t,e),ZC=()=>({state:t,dispatch:e})=>_N(t,e);function cv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function eE(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))Xf()||cv()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const tE=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=eE(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Ks(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?je(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const p=Math.max(r,f),m=Math.min(i,f+d.nodeSize);l.push({node:d,from:p,to:m})});const a=i-r,c=l.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Kl(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=a}const nE=(t,e={})=>({state:n,dispatch:r})=>{const i=je(t,n.schema);return Ks(n,i,e)?qN(n,r):!1},rE=()=>({state:t,dispatch:e})=>QN(t,e),iE=t=>({state:e,dispatch:n})=>{const r=je(t,e.schema);return sC(r)(e,n)},sE=()=>({state:t,dispatch:e})=>JN(t,e);function Za(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Im(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const oE=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Za(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=je(t,r.schema)),l==="mark"&&(o=lr(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,Im(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(Im(d.attrs,e)))})})}),!0):!1},lE=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),aE=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),cE=()=>({state:t,dispatch:e})=>HN(t,e),uE=()=>({state:t,dispatch:e})=>WN(t,e),dE=()=>({state:t,dispatch:e})=>XN(t,e),fE=()=>({state:t,dispatch:e})=>tC(t,e),hE=()=>({state:t,dispatch:e})=>eC(t,e);function wd(t,e,n={},r={}){return ql(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const pE=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{var a,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=wd(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function uv(t,e){const n=lr(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function mE(t,e){const n=new f1(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function gE(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function yE(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function vE(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Zf(t){return e=>vE(e.$from,t)}function xE(t,e){const n=$r.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function wE(t,e){const n={from:0,to:t.content.size};return iv(t,n,e)}function kE(t,e){const n=je(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function dv(t,e){const n=Za(typeof e=="string"?e:e.name,t.schema);return n==="node"?kE(t,e):n==="mark"?uv(t,e):{}}function bE(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function SE(t){const e=bE(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function NE(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,a)=>{o.push({from:l,to:a})});else{const{from:l,to:a}=n[s];if(l===void 0||a===void 0)return;o.push({from:l,to:a})}o.forEach(({from:l,to:a})=>{const c=e.slice(s).map(l,-1),u=e.slice(s).map(a),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),SE(r)}function eh(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=Qf(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function nl(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function kd(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?lr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Kl(d.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const p=d.pos,m=f.pos;t.doc.nodesBetween(p,m,(v,x)=>{if(!v.isText&&!v.marks.length)return;const y=Math.max(p,x),g=Math.min(m,x+v.nodeSize),w=g-y;o+=w,l.push(...v.marks.map(k=>({mark:k,from:y,to:g})))})}),o===0)return!1;const a=l.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Kl(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=l.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+c:a)>=o}function CE(t,e,n={}){if(!e)return Ks(t,null,n)||kd(t,null,n);const r=Za(e,t.schema);return r==="node"?Ks(t,e,n):r==="mark"?kd(t,e,n):!1}function Lm(t,e){const{nodeExtensions:n}=Ya(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=q(L(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function th(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(th(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function EE(t){return t instanceof F}function ME(t,e,n){var r;const{selection:i}=e;let s=null;if(ov(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const p=!f||f.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(v=>v.type.excludes(n));c=p&&m}return!c}),c})}const TE=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,a=lr(t,r.schema);if(i)if(o){const c=uv(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,p)=>{const m=Math.max(p,u),v=Math.min(p+f.nodeSize,d);f.marks.find(y=>y.type===a)?f.marks.forEach(y=>{a===y.type&&n.addMark(m,v,a.create({...y.attrs,...e}))}):n.addMark(m,v,a.create(e))})});return ME(r,n,a)},OE=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),jE=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=je(t,n.schema);return s.isTextblock?i().command(({commands:o})=>Am(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>Am(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},AE=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=vr(t,0,r.content.size),s=F.create(r,i);e.setSelection(s)}return!0},DE=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=_.atStart(r).from,l=_.atEnd(r).to,a=vr(i,o,l),c=vr(s,o,l),u=_.create(r,a,c);e.setSelection(u)}return!0},PE=t=>({state:e,dispatch:n})=>{const r=je(t,e.schema);return aC(r)(e,n)};function zm(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const RE=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:a}=s,c=i.extensionManager.attributes,u=nl(c,l.node().type.name,l.node().attrs);if(s instanceof F&&s.node.isBlock)return!l.parentOffset||!yi(o,l.pos)?!1:(r&&(t&&zm(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:gE(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=d&&f?[{type:f,attrs:u}]:void 0,m=yi(e.doc,e.mapping.map(l.pos),1,p);if(!p&&!m&&yi(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:u}]:void 0),r){if(m&&(s instanceof _&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,p),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const v=e.mapping.map(l.before()),x=e.doc.resolve(v);l.node(-1).canReplaceWith(x.index(),x.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&zm(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},IE=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=je(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let y=N.empty;const g=a.index(-1)?1:a.index(-2)?2:3;for(let T=a.depth-g;T>=a.depth-3;T-=1)y=N.from(a.node(T).copy(y));const w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,k={...nl(f,a.node().type.name,a.node().attrs),...e},S=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(k))||void 0;y=y.append(N.from(l.createAndFill(null,S)||void 0));const b=a.before(a.depth-(g-1));n.replace(b,a.after(-w),new P(y,4-g,0));let E=-1;n.doc.nodesBetween(b,n.doc.content.size,(T,I)=>{if(E>-1)return!1;T.isTextblock&&T.content.size===0&&(E=I+1)}),E>-1&&n.setSelection(_.near(n.doc.resolve(E))),n.scrollIntoView()}return!0}const p=c.pos===a.end()?d.contentMatchAt(0).defaultType:null,m={...nl(f,d.type.name,d.attrs),...e},v={...nl(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const x=p?[{type:l,attrs:m},{type:p,attrs:v}]:[{type:l,attrs:m}];if(!yi(n.doc,a.pos,2))return!1;if(i){const{selection:y,storedMarks:g}=r,{splittableMarks:w}=s.extensionManager,k=g||y.$to.parentOffset&&y.$from.marks();if(n.split(a.pos,2,x).scrollIntoView(),!k||!i)return!0;const S=k.filter(b=>w.includes(b.type.name));n.ensureMarks(S)}return!0},Qc=(t,e)=>{const n=Zf(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&sr(t.doc,n.pos)&&t.join(n.pos),!0},Xc=(t,e)=>{const n=Zf(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&sr(t.doc,r)&&t.join(r),!0},LE=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,p=je(t,o.schema),m=je(e,o.schema),{selection:v,storedMarks:x}=o,{$from:y,$to:g}=v,w=y.blockRange(g),k=x||v.$to.parentOffset&&v.$from.marks();if(!w)return!1;const S=Zf(b=>Lm(b.type.name,d))(v);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if(Lm(S.node.type.name,d)&&p.validContent(S.node.content)&&l)return a().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>Qc(s,p)).command(()=>Xc(s,p)).run()}return!n||!k||!l?a().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Qc(s,p)).command(()=>Xc(s,p)).run():a().command(()=>{const b=u().wrapInList(p,r),E=k.filter(T=>f.includes(T.type.name));return s.ensureMarks(E),b?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Qc(s,p)).command(()=>Xc(s,p)).run()},zE=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=lr(t,r.schema);return kd(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},BE=(t,e,n={})=>({state:r,commands:i})=>{const s=je(t,r.schema),o=je(e,r.schema),l=Ks(r,s,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(o,a):i.setNode(s,{...a,...n})},FE=(t,e={})=>({state:n,commands:r})=>{const i=je(t,n.schema);return Ks(n,i,e)?r.lift(i):r.wrapIn(i,e)},$E=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){const a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},_E=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},HE=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=lr(t,r.schema),{$from:c,empty:u,ranges:d}=l;if(!i)return!0;if(u&&o){let{from:f,to:p}=l;const m=(s=c.marks().find(x=>x.type===a))===null||s===void 0?void 0:s.attrs,v=Qf(c,a,m);v&&(f=v.from,p=v.to),n.removeMark(f,p,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},VE=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Za(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=je(t,r.schema)),l==="mark"&&(o=lr(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(p=>{if(o===p.type){const m=Math.max(f,c),v=Math.min(f+d.nodeSize,u);n.addMark(m,v,o.create({...p.attrs,...e}))}})})}),!0):!1},WE=(t,e={})=>({state:n,dispatch:r})=>{const i=je(t,n.schema);return nC(i,e)(n,r)},UE=(t,e={})=>({state:n,dispatch:r})=>{const i=je(t,n.schema);return rC(i,e)(n,r)};var KE=Object.freeze({__proto__:null,blur:CC,clearContent:EC,clearNodes:MC,command:TC,createParagraphNear:OC,cut:jC,deleteCurrentNode:AC,deleteNode:DC,deleteRange:PC,deleteSelection:RC,enter:IC,exitCode:LC,extendMarkRange:BC,first:FC,focus:$C,forEach:_C,insertContent:HC,insertContentAt:UC,joinBackward:JC,joinDown:qC,joinForward:GC,joinItemBackward:YC,joinItemForward:QC,joinTextblockBackward:XC,joinTextblockForward:ZC,joinUp:KC,keyboardShortcut:tE,lift:nE,liftEmptyBlock:rE,liftListItem:iE,newlineInCode:sE,resetAttributes:oE,scrollIntoView:lE,selectAll:aE,selectNodeBackward:cE,selectNodeForward:uE,selectParentNode:dE,selectTextblockEnd:fE,selectTextblockStart:hE,setContent:pE,setMark:TE,setMeta:OE,setNode:jE,setNodeSelection:AE,setTextSelection:DE,sinkListItem:PE,splitBlock:RE,splitListItem:IE,toggleList:LE,toggleMark:zE,toggleNode:BE,toggleWrap:FE,undoInputRule:$E,unsetAllMarks:_E,unsetMark:HE,updateAttributes:VE,wrapIn:WE,wrapInList:UE});const qE=tt.create({name:"commands",addCommands(){return{...KE}}}),JE=tt.create({name:"drop",addProseMirrorPlugins(){return[new $e({key:new wt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),GE=tt.create({name:"editable",addProseMirrorPlugins(){return[new $e({key:new wt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),YE=tt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new $e({key:new wt("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),QE=tt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:d}=a,{pos:f,parent:p}=d,m=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,v=m.parent.type.spec.isolating,x=d.pos-d.parentOffset,y=v&&m.parent.childCount===1?x===d.pos:W.atStart(c).from===f;return!u||!p.type.isTextblock||p.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Xf()||cv()?s:i},addProseMirrorPlugins(){return[new $e({key:new wt("clearDocument"),appendTransaction:(t,e,n)=>{const r=t.some(v=>v.docChanged)&&!e.doc.eq(n.doc),i=t.some(v=>v.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,a=W.atStart(e.doc).from,c=W.atEnd(e.doc).to;if(s||!(o===a&&l===c)||!th(n.doc))return;const f=n.tr,p=Ja({state:n,transaction:f}),{commands:m}=new Ga({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),XE=tt.create({name:"paste",addProseMirrorPlugins(){return[new $e({key:new wt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),ZE=tt.create({name:"tabindex",addProseMirrorPlugins(){return[new $e({key:new wt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class fr{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new fr(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new fr(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new fr(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1),l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const a=new fr(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new fr(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const a=o[l];if(s[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(a=>n[a]===o.node.attrs[a])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const eM=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function tM(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class nM extends cC{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=tM(eM,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=rv(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=n.filter(l=>!l.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[GE,NC.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),qE,YE,QE,ZE,JE,XE].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new ci(i,this)}createCommandManager(){this.commandManager=new Ga({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=wd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(o=>o.name!=="collaboration"),this.createExtensionManager()}}),e=wd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=lv(e,this.options.autofocus);this.view=new TN(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:ai.create({doc:e,selection:n||void 0})}),this.view.dom.setAttribute("role","textbox"),this.view.dom.getAttribute("aria-label")||this.view.dom.setAttribute("aria-label","Rich-Text Editor");const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return dv(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return CE(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return xE(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return wE(this.state.doc,{blockSeparator:n,textSerializers:{...sv(this.schema),...r}})}get isEmpty(){return th(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new fr(n,this)}get $doc(){return this.$pos(0)}}function Di(t){return new Qa({find:t.find,handler:({state:e,range:n,match:r})=>{const i=q(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const a=l.search(/\S/),c=n.from+l.indexOf(o),u=c+o.length;if(eh(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===t.type&&v!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+a,c);const f=n.from+a+o.length;s.addMark(n.from+a,f,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function rM(t){return new Qa({find:t.find,handler:({state:e,range:n,match:r})=>{const i=q(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>l?u=l:l=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function bd(t){return new Qa({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=q(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function qs(t){return new Qa({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=q(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),c=a&&Bf(a,t.type,s);if(!c)return null;if(o.wrap(a,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||d.$to.parentOffset&&d.$from.marks();if(m){const v=m.filter(x=>p.includes(x.type.name));o.ensureMarks(v)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&sr(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class dt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=q(L(this,"addOptions",{name:this.name}))),this.storage=q(L(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new dt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Xa(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new dt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=q(L(n,"addOptions",{name:n.name})),n.storage=q(L(n,"addStorage",{name:n.name,options:n.options})),n}}function zr(t){return new vC({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=q(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(eh(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(x=>x===t.type&&x!==m.mark.type)).filter(m=>m.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+l.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function iM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fv={exports:{}},Zc={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function sM(){if(Bm)return Zc;Bm=1;var t=C;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(d,f){var p=f(),m=r({inst:{value:p,getSnapshot:f}}),v=m[0].inst,x=m[1];return s(function(){v.value=p,v.getSnapshot=f,a(v)&&x({inst:v})},[d,p,f]),i(function(){return a(v)&&x({inst:v}),d(function(){a(v)&&x({inst:v})})},[d]),o(p),p}function a(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!n(d,p)}catch{return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return Zc.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Zc}fv.exports=sM();var nh=fv.exports;const oM=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},lM=({contentComponent:t})=>{const e=nh.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return C.createElement(C.Fragment,null,Object.values(e))};function aM(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:xy.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class cM extends C.Component{constructor(e){var n;super(e),this.editorContentRef=C.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=aM(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return C.createElement(C.Fragment,null,C.createElement("div",{ref:oM(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&C.createElement(lM,{contentComponent:e.contentComponent}))}}const uM=j.forwardRef((t,e)=>{const n=C.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return C.createElement(cM,{key:n,innerRef:e,...t})}),dM=C.memo(uM);var fM=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},hM=iM(fM),hv={exports:{}},eu={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function pM(){if(Fm)return eu;Fm=1;var t=C,e=nh;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,a=t.useDebugValue;return eu.useSyncExternalStoreWithSelector=function(c,u,d,f,p){var m=s(null);if(m.current===null){var v={hasValue:!1,value:null};m.current=v}else v=m.current;m=l(function(){function y(b){if(!g){if(g=!0,w=b,b=f(b),p!==void 0&&v.hasValue){var E=v.value;if(p(E,b))return k=E}return k=b}if(E=k,r(w,b))return E;var T=f(b);return p!==void 0&&p(E,T)?E:(w=b,k=T)}var g=!1,w,k,S=d===void 0?null:d;return[function(){return y(u())},S===null?void 0:function(){return y(S())}]},[u,d,f,p]);var x=i(c,m[0],m[1]);return o(function(){v.hasValue=!0,v.value=x},[x]),a(x),x},eu}hv.exports=pM();var mM=hv.exports;class gM{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function yM(t){var e;const[n]=j.useState(()=>new gM(t.editor)),r=mM.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:hM);return j.useEffect(()=>n.watch(t.editor),[t.editor,n]),j.useDebugValue(r),r}const vM=!1,Sd=typeof window>"u",xM=Sd||!!(typeof window<"u"&&window.next);class wM{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Sd||xM?null:this.createEditor();if(this.options.current.immediatelyRender&&Sd&&vM)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new nM(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function kM(t={},e=[]){const n=j.useRef(t);n.current=t;const[r]=j.useState(()=>new wM(n)),i=nh.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return j.useDebugValue(i),j.useEffect(r.onRender(e)),yM({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const bM=j.createContext({editor:null});bM.Consumer;const SM=j.createContext({onDragStart:void 0}),NM=()=>j.useContext(SM);C.forwardRef((t,e)=>{const{onDragStart:n}=NM(),r=t.as||"div";return C.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const CM=/^\s*>\s$/,EM=dt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Fe(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[qs({find:CM,type:this.type})]}}),MM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,TM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,OM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,jM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,AM=kn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Fe(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Di({find:MM,type:this.type}),Di({find:OM,type:this.type})]},addPasteRules(){return[zr({find:TM,type:this.type}),zr({find:jM,type:this.type})]}}),DM="listItem",$m="textStyle",_m=/^\s*([-+*])\s$/,PM=dt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Fe(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(DM,this.editor.getAttributes($m)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=qs({find:_m,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=qs({find:_m,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes($m),editor:this.editor})),[t]}}),RM=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,IM=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,LM=kn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Fe(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Di({find:RM,type:this.type})]},addPasteRules(){return[zr({find:IM,type:this.type})]}}),zM=/^```([a-z]+)?[\s\n]$/,BM=/^~~~([a-z]+)?[\s\n]$/,FM=dt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Fe(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(W.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[bd({find:zM,type:this.type,getAttributes:t=>({language:t[1]})}),bd({find:BM,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new $e({key:new wt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(_.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),$M=dt.create({name:"doc",topNode:!0,content:"block+"});function _M(t={}){return new $e({view(e){return new HM(e,t)}})}class HM{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=l?u.bottom:u.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let l=i.getBoundingClientRect();s=l.left-i.scrollLeft,o=l.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=l1(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const VM=tt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_M(this.options)]}});class ge extends W{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ge.valid(r)?new ge(r):W.near(r)}content(){return P.empty}eq(e){return e instanceof ge&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ge(e.resolve(n.pos))}getBookmark(){return new rh(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!WM(e)||!UM(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ge.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(ge.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!F.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(ge.valid(l))return l}return null}}}ge.prototype.visible=!1;ge.findFrom=ge.findGapCursorFrom;W.jsonID("gapcursor",ge);class rh{constructor(e){this.pos=e}map(e){return new rh(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ge.valid(n)?new ge(n):W.near(n)}}function WM(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function UM(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function KM(){return new $e({props:{decorations:YM,createSelectionBetween(t,e,n){return e.pos==n.pos&&ge.valid(n)?new ge(n):null},handleClick:JM,handleKeyDown:qM,handleDOMEvents:{beforeinput:GM}}})}const qM=G1({ArrowLeft:Po("horiz",-1),ArrowRight:Po("horiz",1),ArrowUp:Po("vert",-1),ArrowDown:Po("vert",1)});function Po(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof _){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=ge.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new ge(c))),!0):!1}}function JM(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ge.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&F.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ge(r))),!0)}function GM(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ge))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=N.empty;for(let o=r.length-1;o>=0;o--)i=N.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new P(i,0,0));return s.setSelection(_.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function YM(t){if(!(t.selection instanceof ge))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",be.create(t.doc,[jt.widget(t.selection.head,e,{key:"gapcursor"})])}const QM=tt.create({name:"gapCursor",addProseMirrorPlugins(){return[KM()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=q(L(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),XM=dt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Fe(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&o){const d=a.filter(f=>l.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ZM=dt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Fe(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>bd({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Jl=200,Oe=function(){};Oe.prototype.append=function(e){return e.length?(e=Oe.from(e),!this.length&&e||e.length<Jl&&this.leafAppend(e)||this.length<Jl&&e.leafPrepend(this)||this.appendInner(e)):this};Oe.prototype.prepend=function(e){return e.length?Oe.from(e).append(this):this};Oe.prototype.appendInner=function(e){return new eT(this,e)};Oe.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Oe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Oe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Oe.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Oe.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Oe.from=function(e){return e instanceof Oe?e:e&&e.length?new pv(e):Oe.empty};var pv=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Jl)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Jl)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Oe);Oe.empty=new pv([]);var eT=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Oe);const tT=500;class _t{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new Yt(d.map));let p=d.step.map(i.slice(s)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Yt(m,void 0,void 0,c.length+u.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(s)):d.selection,a=new _t(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Yt(e.mapping.maps[u],d,n),p;(p=a&&a.merge(f))&&(f=p,u?s.pop():l=l.slice(0,l.length-1)),s.push(f),n&&(o++,n=void 0),i||(a=f)}let c=o-r.depth;return c>rT&&(l=nT(l,c),o-=c),new _t(l.append(s),o)}remapping(e,n){let r=new gi;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new _t(this.items.append(e.map(n=>new Yt(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let p=s.getMirror(--a);if(p==null)return;o=Math.min(o,p);let m=s.maps[p];if(f.step){let v=e.steps[p].invert(e.docs[p]),x=f.selection&&f.selection.map(s.slice(a+1,p));x&&l++,r.push(new Yt(m,v,x))}else r.push(new Yt(m))},i);let c=[];for(let f=n;f<o;f++)c.push(new Yt(s.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new _t(u,l);return d.emptyItemCount()>tT&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new Yt(c.invert(),a,u),f,p=i.length-1;(f=i.length&&i[p].merge(d))?i[p]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new _t(Oe.from(i.reverse()),s)}}_t.empty=new _t(Oe.empty,0);function nT(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Yt{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Yt(n.getMap().invert(),n,this.selection)}}}class jn{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const rT=20;function iT(t,e,n,r){let i=n.getMeta(Mr),s;if(i)return i.historyState;n.getMeta(lT)&&(t=new jn(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Mr))return o.getMeta(Mr).redo?new jn(t.done.addTransform(n,void 0,r,rl(e)),t.undone,Hm(n.mapping.maps),t.prevTime,t.prevComposition):new jn(t.done,t.undone.addTransform(n,void 0,r,rl(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!sT(n,t.prevRanges)),c=o?tu(t.prevRanges,n.mapping):Hm(n.mapping.maps);return new jn(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,rl(e)),_t.empty,c,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new jn(t.done.rebased(n,s),t.undone.rebased(n,s),tu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new jn(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),tu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function sT(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function Hm(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function tu(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function oT(t,e,n){let r=rl(e),i=Mr.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new jn(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Mr,{redo:n,historyState:a})}let nu=!1,Vm=null;function rl(t){let e=t.plugins;if(Vm!=e){nu=!1,Vm=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){nu=!0;break}}return nu}const Mr=new wt("history"),lT=new wt("closeHistory");function aT(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new $e({key:Mr,state:{init(){return new jn(_t.empty,_t.empty,null,0,-1)},apply(e,n,r){return iT(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?gv:r=="historyRedo"?yv:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function mv(t,e){return(n,r)=>{let i=Mr.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=oT(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const gv=mv(!1,!0),yv=mv(!0,!0),cT=tt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>gv(t,e),redo:()=>({state:t,dispatch:e})=>yv(t,e)}},addProseMirrorPlugins(){return[aT(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),uT=dt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Fe(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):EE(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:l})=>{var a;if(l){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(_.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(F.create(o.doc,c.pos)):o.setSelection(_.create(o.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(o.insert(u,d),o.setSelection(_.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[rM({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),dT=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,fT=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,hT=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,pT=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,mT=kn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Fe(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Di({find:dT,type:this.type}),Di({find:hT,type:this.type})]},addPasteRules(){return[zr({find:fT,type:this.type}),zr({find:pT,type:this.type})]}}),gT=dt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Fe(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),yT="listItem",Wm="textStyle",Um=/^(\d+)\.\s$/,vT=dt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Fe(this.options.HTMLAttributes,n),0]:["ol",Fe(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(yT,this.editor.getAttributes(Wm)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=qs({find:Um,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=qs({find:Um,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Wm)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),xT=dt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Fe(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),wT=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,kT=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,bT=kn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Fe(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Di({find:wT,type:this.type})]},addPasteRules(){return[zr({find:kT,type:this.type})]}}),ST=dt.create({name:"text",group:"inline"}),NT=tt.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,l,a,c,u,d,f,p,m,v,x,y;const g=[];return this.options.bold!==!1&&g.push(AM.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&g.push(EM.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&g.push(PM.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&g.push(LM.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&g.push(FM.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&g.push($M.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&g.push(VM.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&g.push(QM.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&g.push(XM.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&g.push(ZM.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&g.push(cT.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&g.push(uT.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&g.push(mT.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&g.push(gT.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&g.push(vT.configure((m=this.options)===null||m===void 0?void 0:m.orderedList)),this.options.paragraph!==!1&&g.push(xT.configure((v=this.options)===null||v===void 0?void 0:v.paragraph)),this.options.strike!==!1&&g.push(bT.configure((x=this.options)===null||x===void 0?void 0:x.strike)),this.options.text!==!1&&g.push(ST.configure((y=this.options)===null||y===void 0?void 0:y.text)),g}}),CT="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",ET="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Pi=(t,e)=>{for(const n in e)t[n]=e[n];return t},Nd="numeric",Cd="ascii",Ed="alpha",il="asciinumeric",Ro="alphanumeric",Md="domain",vv="emoji",MT="scheme",TT="slashscheme",Km="whitespace";function OT(t,e){return t in e||(e[t]=[]),e[t]}function xr(t,e,n){e[Nd]&&(e[il]=!0,e[Ro]=!0),e[Cd]&&(e[il]=!0,e[Ed]=!0),e[il]&&(e[Ro]=!0),e[Ed]&&(e[Ro]=!0),e[Ro]&&(e[Md]=!0),e[vv]&&(e[Md]=!0);for(const r in e){const i=OT(r,n);i.indexOf(t)<0&&i.push(t)}}function jT(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function st(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}st.groups={};st.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e){return e===void 0&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||st.groups;let i;return e&&e.j?i=e:(i=new st(e),n&&r&&xr(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||st.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new st,Pi(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new st,s){if(r)if(o.t&&typeof o.t=="string"){const a=Pi(jT(o.t,r),n);xr(s,a,r)}else n&&xr(s,n,r);o.t=s}return i.j[t]=o,o}};const U=(t,e,n,r,i)=>t.ta(e,n,r,i),St=(t,e,n,r,i)=>t.tr(e,n,r,i),qm=(t,e,n,r,i)=>t.ts(e,n,r,i),O=(t,e,n,r,i)=>t.tt(e,n,r,i),cn="WORD",Td="UWORD",Js="LOCALHOST",Od="TLD",jd="UTLD",sl="SCHEME",Gr="SLASH_SCHEME",ih="NUM",xv="WS",sh="NL",xs="OPENBRACE",ws="CLOSEBRACE",Gl="OPENBRACKET",Yl="CLOSEBRACKET",Ql="OPENPAREN",Xl="CLOSEPAREN",Zl="OPENANGLEBRACKET",ea="CLOSEANGLEBRACKET",ta="FULLWIDTHLEFTPAREN",na="FULLWIDTHRIGHTPAREN",ra="LEFTCORNERBRACKET",ia="RIGHTCORNERBRACKET",sa="LEFTWHITECORNERBRACKET",oa="RIGHTWHITECORNERBRACKET",la="FULLWIDTHLESSTHAN",aa="FULLWIDTHGREATERTHAN",ca="AMPERSAND",ua="APOSTROPHE",da="ASTERISK",An="AT",fa="BACKSLASH",ha="BACKTICK",pa="CARET",In="COLON",oh="COMMA",ma="DOLLAR",Qt="DOT",ga="EQUALS",lh="EXCLAMATION",Xt="HYPHEN",ya="PERCENT",va="PIPE",xa="PLUS",wa="POUND",ka="QUERY",ah="QUOTE",ch="SEMI",Zt="SLASH",ks="TILDE",ba="UNDERSCORE",wv="EMOJI",Sa="SYM";var kv=Object.freeze({__proto__:null,WORD:cn,UWORD:Td,LOCALHOST:Js,TLD:Od,UTLD:jd,SCHEME:sl,SLASH_SCHEME:Gr,NUM:ih,WS:xv,NL:sh,OPENBRACE:xs,CLOSEBRACE:ws,OPENBRACKET:Gl,CLOSEBRACKET:Yl,OPENPAREN:Ql,CLOSEPAREN:Xl,OPENANGLEBRACKET:Zl,CLOSEANGLEBRACKET:ea,FULLWIDTHLEFTPAREN:ta,FULLWIDTHRIGHTPAREN:na,LEFTCORNERBRACKET:ra,RIGHTCORNERBRACKET:ia,LEFTWHITECORNERBRACKET:sa,RIGHTWHITECORNERBRACKET:oa,FULLWIDTHLESSTHAN:la,FULLWIDTHGREATERTHAN:aa,AMPERSAND:ca,APOSTROPHE:ua,ASTERISK:da,AT:An,BACKSLASH:fa,BACKTICK:ha,CARET:pa,COLON:In,COMMA:oh,DOLLAR:ma,DOT:Qt,EQUALS:ga,EXCLAMATION:lh,HYPHEN:Xt,PERCENT:ya,PIPE:va,PLUS:xa,POUND:wa,QUERY:ka,QUOTE:ah,SEMI:ch,SLASH:Zt,TILDE:ks,UNDERSCORE:ba,EMOJI:wv,SYM:Sa});const Kr=/[a-z]/,ru=new RegExp("\\p{L}","u"),iu=new RegExp("\\p{Emoji}","u"),su=/\d/,Jm=/\s/,Gm=`
`,AT="",DT="";let Io=null,Lo=null;function PT(t){t===void 0&&(t=[]);const e={};st.groups=e;const n=new st;Io==null&&(Io=Ym(CT)),Lo==null&&(Lo=Ym(ET)),O(n,"'",ua),O(n,"{",xs),O(n,"}",ws),O(n,"[",Gl),O(n,"]",Yl),O(n,"(",Ql),O(n,")",Xl),O(n,"<",Zl),O(n,">",ea),O(n,"",ta),O(n,"",na),O(n,"",ra),O(n,"",ia),O(n,"",sa),O(n,"",oa),O(n,"",la),O(n,"",aa),O(n,"&",ca),O(n,"*",da),O(n,"@",An),O(n,"`",ha),O(n,"^",pa),O(n,":",In),O(n,",",oh),O(n,"$",ma),O(n,".",Qt),O(n,"=",ga),O(n,"!",lh),O(n,"-",Xt),O(n,"%",ya),O(n,"|",va),O(n,"+",xa),O(n,"#",wa),O(n,"?",ka),O(n,'"',ah),O(n,"/",Zt),O(n,";",ch),O(n,"~",ks),O(n,"_",ba),O(n,"\\",fa);const r=St(n,su,ih,{[Nd]:!0});St(r,su,r);const i=St(n,Kr,cn,{[Cd]:!0});St(i,Kr,i);const s=St(n,ru,Td,{[Ed]:!0});St(s,Kr),St(s,ru,s);const o=St(n,Jm,xv,{[Km]:!0});O(n,Gm,sh,{[Km]:!0}),O(o,Gm),St(o,Jm,o);const l=St(n,iu,wv,{[vv]:!0});St(l,iu,l),O(l,AT,l);const a=O(l,DT);St(a,iu,l);const c=[[Kr,i]],u=[[Kr,null],[ru,s]];for(let d=0;d<Io.length;d++)Cn(n,Io[d],Od,cn,c);for(let d=0;d<Lo.length;d++)Cn(n,Lo[d],jd,Td,u);xr(Od,{tld:!0,ascii:!0},e),xr(jd,{utld:!0,alpha:!0},e),Cn(n,"file",sl,cn,c),Cn(n,"mailto",sl,cn,c),Cn(n,"http",Gr,cn,c),Cn(n,"https",Gr,cn,c),Cn(n,"ftp",Gr,cn,c),Cn(n,"ftps",Gr,cn,c),xr(sl,{scheme:!0,ascii:!0},e),xr(Gr,{slashscheme:!0,ascii:!0},e),t=t.sort((d,f)=>d[0]>f[0]?1:-1);for(let d=0;d<t.length;d++){const f=t[d][0],m=t[d][1]?{[MT]:!0}:{[TT]:!0};f.indexOf("-")>=0?m[Md]=!0:Kr.test(f)?su.test(f)?m[il]=!0:m[Cd]=!0:m[Nd]=!0,qm(n,f,f,m)}return qm(n,"localhost",Js,{ascii:!0}),n.jd=new st(Sa),{start:n,tokens:Pi({groups:e},kv)}}function RT(t,e){const n=IT(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=t,a=null,c=0,u=null,d=-1,f=-1;for(;o<r&&(a=l.go(n[o]));)l=a,l.accepts()?(d=0,f=0,u=l):d>=0&&(d+=n[o].length,f++),c+=n[o].length,s+=n[o].length,o++;s-=d,o-=f,c-=d,i.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function IT(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Cn(t,e,n,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const a=e[l];t.j[a]?s=t.j[a]:(s=new st(r),s.jr=i.slice(),t.j[a]=s),t=s}return s=new st(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function Ym(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Gs={defaultProtocol:"http",events:null,format:Qm,formatHref:Qm,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function uh(t,e){e===void 0&&(e=null);let n=Pi({},Gs);t&&(n=Pi(n,t instanceof uh?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}uh.prototype={o:Gs,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Gs[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Qm(t){return t}function bv(t,e){this.t="token",this.v=t,this.tk=e}bv.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return t===void 0&&(t=Gs.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},l=t.get("className",n,e),a=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),a&&(o.target=a),c&&(o.rel=c),u&&Pi(o,u),{tagName:i,attributes:o,content:s,eventListeners:d}}};function ec(t,e){class n extends bv{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Xm=ec("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Zm=ec("text"),LT=ec("nl"),zo=ec("url",{isLink:!0,toHref(t){return t===void 0&&(t=Gs.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Js&&t[1].t===In}}),Nt=t=>new st(t);function zT(t){let{groups:e}=t;const n=e.domain.concat([ca,da,An,fa,ha,pa,ma,ga,Xt,ih,ya,va,xa,wa,Zt,Sa,ks,ba]),r=[ua,In,oh,Qt,lh,ka,ah,ch,Zl,ea,xs,ws,Yl,Gl,Ql,Xl,ta,na,ra,ia,sa,oa,la,aa],i=[ca,ua,da,fa,ha,pa,ma,ga,Xt,xs,ws,ya,va,xa,wa,ka,Zt,Sa,ks,ba],s=Nt(),o=O(s,ks);U(o,i,o),U(o,e.domain,o);const l=Nt(),a=Nt(),c=Nt();U(s,e.domain,l),U(s,e.scheme,a),U(s,e.slashscheme,c),U(l,i,o),U(l,e.domain,l);const u=O(l,An);O(o,An,u),O(a,An,u),O(c,An,u);const d=O(o,Qt);U(d,i,o),U(d,e.domain,o);const f=Nt();U(u,e.domain,f),U(f,e.domain,f);const p=O(f,Qt);U(p,e.domain,f);const m=Nt(Xm);U(p,e.tld,m),U(p,e.utld,m),O(u,Js,m);const v=O(f,Xt);U(v,e.domain,f),U(m,e.domain,f),O(m,Qt,p),O(m,Xt,v);const x=O(m,In);U(x,e.numeric,Xm);const y=O(l,Xt),g=O(l,Qt);U(y,e.domain,l),U(g,i,o),U(g,e.domain,l);const w=Nt(zo);U(g,e.tld,w),U(g,e.utld,w),U(w,e.domain,l),U(w,i,o),O(w,Qt,g),O(w,Xt,y),O(w,An,u);const k=O(w,In),S=Nt(zo);U(k,e.numeric,S);const b=Nt(zo),E=Nt();U(b,n,b),U(b,r,E),U(E,n,b),U(E,r,E),O(w,Zt,b),O(S,Zt,b);const T=O(a,In),I=O(c,In),z=O(I,Zt),ee=O(z,Zt);U(a,e.domain,l),O(a,Qt,g),O(a,Xt,y),U(c,e.domain,l),O(c,Qt,g),O(c,Xt,y),U(T,e.domain,b),O(T,Zt,b),U(ee,e.domain,b),U(ee,n,b),O(ee,Zt,b);const K=[[xs,ws],[Gl,Yl],[Ql,Xl],[Zl,ea],[ta,na],[ra,ia],[sa,oa],[la,aa]];for(let le=0;le<K.length;le++){const[kt,ln]=K[le],_e=O(b,kt);O(E,kt,_e),O(_e,ln,b);const ve=Nt(zo);U(_e,n,ve);const D=Nt();U(_e,r),U(ve,n,ve),U(ve,r,D),U(D,n,ve),U(D,r,D),O(ve,ln,b),O(D,ln,b)}return O(s,Js,w),O(s,sh,LT),{start:s,tokens:kv}}function BT(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=t,a=null,c=null,u=0,d=null,f=-1;for(;i<r&&!(a=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(c=a||l.go(n[i].t));)a=null,l=c,l.accepts()?(f=0,d=l):f>=0&&f++,i++,u++;if(f<0)i-=u,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(ou(Zm,e,o)),o=[]),i-=f,u-=f;const p=d.t,m=n.slice(i-u,i);s.push(ou(p,e,m))}}return o.length>0&&s.push(ou(Zm,e,o)),s}function ou(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const FT=typeof console<"u"&&console&&console.warn||(()=>{}),$T="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",de={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function _T(){st.groups={},de.scanner=null,de.parser=null,de.tokenQueue=[],de.pluginQueue=[],de.customSchemes=[],de.initialized=!1}function e0(t,e){if(e===void 0&&(e=!1),de.initialized&&FT(`linkifyjs: already initialized - will not register custom scheme "${t}" ${$T}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);de.customSchemes.push([t,e])}function HT(){de.scanner=PT(de.customSchemes);for(let t=0;t<de.tokenQueue.length;t++)de.tokenQueue[t][1]({scanner:de.scanner});de.parser=zT(de.scanner.tokens);for(let t=0;t<de.pluginQueue.length;t++)de.pluginQueue[t][1]({scanner:de.scanner,parser:de.parser});de.initialized=!0}function Sv(t){return de.initialized||HT(),BT(de.parser.start,t,RT(de.scanner.start,t))}function Nv(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new uh(n),i=Sv(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}function VT(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function WT(t){return new $e({key:new wt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=mE(n.doc,[...e]);if(NE(l).forEach(({newRange:c})=>{const u=yE(r.doc,c,p=>p.isTextblock);let d,f;if(u.length>1?(d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")),d&&f){const p=f.split(" ").filter(y=>y!=="");if(p.length<=0)return!1;const m=p[p.length-1],v=d.pos+f.lastIndexOf(m);if(!m)return!1;const x=Sv(m).map(y=>y.toObject(t.defaultProtocol));if(!VT(x))return!1;x.filter(y=>y.isLink).map(y=>({...y,from:v+y.start+1,to:v+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).forEach(y=>{eh(y.from,y.to,r.doc).some(g=>g.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function UT(t){return new $e({key:new wt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=r.target;const l=[];for(;o.nodeName!=="DIV";)l.push(o),o=o.parentNode;if(!l.find(f=>f.nodeName==="A"))return!1;const a=dv(e.state,t.type.name),c=r.target,u=(i=c==null?void 0:c.href)!==null&&i!==void 0?i:a.href,d=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:a.target;return c&&u?(window.open(u,d),!0):!1}}})}function KT(t){return new $e({key:new wt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const a=Nv(l,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!a?!1:(t.editor.commands.setMark(t.type,{href:a.href}),!0)}}})}const qT=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function t0(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(qT,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const JT=kn.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(t=>{if(typeof t=="string"){e0(t);return}e0(t.scheme,t.optionalSlashes)})},onDestroy(){_T()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!t0(e,this.options.protocols)?!1:null}}]},renderHTML({HTMLAttributes:t}){return t0(t.href,this.options.protocols)?["a",Fe(this.options.HTMLAttributes,t),0]:["a",Fe(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[zr({find:t=>{const e=[];if(t){const{validate:n}=this.options,r=Nv(t).filter(i=>i.isLink&&n(i.value));r.length&&r.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(WT({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&t.push(UT({type:this.type})),this.options.linkOnPaste&&t.push(KT({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),GT=()=>{const[t,e]=j.useState(""),[n,r]=j.useState([]),[i,s]=j.useState(""),{addStory:o}=to(),{walletAddress:l}=Ae(),a=kM({extensions:[NT,JT.configure({openOnClick:!1})],content:""}),c=()=>{!a||!t.trim()||(o({title:t,content:a.getHTML(),authorId:l,tags:n}),e(""),a.commands.setContent(""),r([]))},u=()=>{i.trim()&&!n.includes(i.trim())&&(r([...n,i.trim()]),s(""))};return h.jsxs("div",{className:"space-y-6 bg-black/20 rounded-xl p-6 border border-emerald-500/20",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("input",{type:"text",value:t,onChange:d=>e(d.target.value),placeholder:"Your tale's title...",className:"w-full px-4 py-2 bg-black/20 rounded-lg border border-emerald-500/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"}),h.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.map(d=>h.jsxs("span",{className:"px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-400 text-sm",children:["#",d]},d)),h.jsx("input",{type:"text",value:i,onChange:d=>s(d.target.value),onKeyPress:d=>d.key==="Enter"&&u(),placeholder:"Add tags...",className:"px-3 py-1 bg-black/20 rounded-full border border-emerald-500/20 text-white placeholder-gray-400 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),h.jsx("div",{className:"border-b border-emerald-500/20 pb-2 mb-4",children:h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>a==null?void 0:a.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-emerald-500/10 ${a!=null&&a.isActive("bold")?"text-emerald-400":"text-gray-400"}`,children:h.jsx(Fk,{size:18})}),h.jsx("button",{onClick:()=>a==null?void 0:a.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-emerald-500/10 ${a!=null&&a.isActive("italic")?"text-emerald-400":"text-gray-400"}`,children:h.jsx(Uk,{size:18})}),h.jsx("button",{onClick:()=>{const d=window.prompt("Enter URL");d&&(a==null||a.chain().focus().setLink({href:d}).run())},className:`p-2 rounded hover:bg-emerald-500/10 ${a!=null&&a.isActive("link")?"text-emerald-400":"text-gray-400"}`,children:h.jsx(Kk,{size:18})})]})}),h.jsx(dM,{editor:a,className:"prose prose-invert prose-emerald max-w-none min-h-[200px]"})]}),h.jsx("button",{onClick:c,disabled:!t.trim()||!(a!=null&&a.getText().trim()),className:"action-button w-full py-3 text-emerald-400 font-medium disabled:opacity-50",children:h.jsxs("span",{className:"flex items-center justify-center gap-2",children:[h.jsx(Cy,{size:18}),"Share Your Tale"]})})]})};function Le(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function YT(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const Bo=43200,n0=1440;let QT={};function XT(){return QT}function r0(t){const e=Le(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ol(t,e){const n=Le(t),r=Le(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function ZT(t){return YT(t,Date.now())}function e4(t,e){const n=Le(t),r=Le(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function t4(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function n4(t,e){return+Le(t)-+Le(e)}function r4(t){const e=Le(t);return e.setHours(23,59,59,999),e}function i4(t){const e=Le(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function s4(t){const e=Le(t);return+r4(e)==+i4(e)}function o4(t,e){const n=Le(t),r=Le(e),i=ol(n,r),s=Math.abs(e4(n,r));let o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let l=ol(n,r)===-i;s4(Le(t))&&s===1&&ol(t,r)===1&&(l=!1),o=i*(s-Number(l))}return o===0?0:o}function l4(t,e,n){const r=n4(t,e)/1e3;return t4(n==null?void 0:n.roundingMethod)(r)}const a4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},c4=(t,e,n)=>{let r;const i=a4[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function lu(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const u4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},d4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},f4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},h4={date:lu({formats:u4,defaultWidth:"full"}),time:lu({formats:d4,defaultWidth:"full"}),dateTime:lu({formats:f4,defaultWidth:"full"})},p4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},m4=(t,e,n,r)=>p4[t];function Yi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const g4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},y4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},v4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},x4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},w4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},k4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},b4=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},S4={ordinalNumber:b4,era:Yi({values:g4,defaultWidth:"wide"}),quarter:Yi({values:y4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yi({values:v4,defaultWidth:"wide"}),day:Yi({values:x4,defaultWidth:"wide"}),dayPeriod:Yi({values:w4,defaultWidth:"wide",formattingValues:k4,defaultFormattingWidth:"wide"})};function Qi(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],a=Array.isArray(l)?C4(l,d=>d.test(o)):N4(l,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(a):a,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function N4(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function C4(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function E4(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const M4=/^(\d+)(th|st|nd|rd)?/i,T4=/\d+/i,O4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},j4={any:[/^b/i,/^(a|c)/i]},A4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},D4={any:[/1/i,/2/i,/3/i,/4/i]},P4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},R4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},I4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},z4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},B4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},F4={ordinalNumber:E4({matchPattern:M4,parsePattern:T4,valueCallback:t=>parseInt(t,10)}),era:Qi({matchPatterns:O4,defaultMatchWidth:"wide",parsePatterns:j4,defaultParseWidth:"any"}),quarter:Qi({matchPatterns:A4,defaultMatchWidth:"wide",parsePatterns:D4,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qi({matchPatterns:P4,defaultMatchWidth:"wide",parsePatterns:R4,defaultParseWidth:"any"}),day:Qi({matchPatterns:I4,defaultMatchWidth:"wide",parsePatterns:L4,defaultParseWidth:"any"}),dayPeriod:Qi({matchPatterns:z4,defaultMatchWidth:"any",parsePatterns:B4,defaultParseWidth:"any"})},$4={code:"en-US",formatDistance:c4,formatLong:h4,formatRelative:m4,localize:S4,match:F4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _4(t,e,n){const r=XT(),i=(n==null?void 0:n.locale)??r.locale??$4,s=2520,o=ol(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let a,c;o>0?(a=Le(e),c=Le(t)):(a=Le(t),c=Le(e));const u=l4(c,a),d=(r0(c)-r0(a))/1e3,f=Math.round((u-d)/60);let p;if(f<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,l):u<10?i.formatDistance("lessThanXSeconds",10,l):u<20?i.formatDistance("lessThanXSeconds",20,l):u<40?i.formatDistance("halfAMinute",0,l):u<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):f===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",f,l);if(f<45)return i.formatDistance("xMinutes",f,l);if(f<90)return i.formatDistance("aboutXHours",1,l);if(f<n0){const m=Math.round(f/60);return i.formatDistance("aboutXHours",m,l)}else{if(f<s)return i.formatDistance("xDays",1,l);if(f<Bo){const m=Math.round(f/n0);return i.formatDistance("xDays",m,l)}else if(f<Bo*2)return p=Math.round(f/Bo),i.formatDistance("aboutXMonths",p,l)}if(p=o4(c,a),p<12){const m=Math.round(f/Bo);return i.formatDistance("xMonths",m,l)}else{const m=p%12,v=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",v,l):m<9?i.formatDistance("overXYears",v,l):i.formatDistance("almostXYears",v+1,l)}}function Cv(t,e){return _4(t,ZT(t),e)}const H4=({stories:t})=>{const{likeStory:e}=to(),n=async r=>{try{await navigator.share({title:r.title,text:r.content.slice(0,100)+"...",url:window.location.href})}catch{J.info("Share URL copied to clipboard!")}};return h.jsxs("div",{className:"space-y-6",children:[t.map(r=>h.jsxs("div",{className:"bg-black/20 rounded-xl p-6 border border-emerald-500/20 space-y-4 hover:border-emerald-500/40 transition-all duration-300",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold text-emerald-400 mb-1",children:r.title}),h.jsx("div",{className:"text-sm text-gray-400",children:Cv(r.createdAt,{addSuffix:!0})})]}),r.featured&&h.jsx(Of,{className:"text-yellow-400",size:20})]}),h.jsx("div",{className:"text-gray-300 prose prose-invert prose-emerald max-w-none",dangerouslySetInnerHTML:{__html:r.content}}),h.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(i=>h.jsxs("span",{className:"px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-400 text-sm",children:["#",i]},i))}),h.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-emerald-500/10",children:[h.jsxs("button",{onClick:()=>e(r.id),className:"flex items-center gap-2 text-gray-400 hover:text-emerald-400 transition-colors",children:[h.jsx(Af,{size:18}),h.jsx("span",{children:r.likes})]}),h.jsxs("button",{onClick:()=>n(r),className:"flex items-center gap-2 text-gray-400 hover:text-emerald-400 transition-colors",children:[h.jsx(Zk,{size:18}),h.jsx("span",{children:"Share"})]})]})]},r.id)),t.length===0&&h.jsxs("div",{className:"text-center py-12 text-gray-400",children:[h.jsx("p",{className:"text-lg",children:"No tales to show yet."}),h.jsx("p",{className:"text-sm",children:"Be the first to share your regenerative story!"})]})]})},V4=()=>{const{stories:t}=to(),[e,n]=j.useState(null),[r,i]=j.useState(!1),s=o=>{if(!r)return;const l=o.currentTarget.getBoundingClientRect(),a=(o.clientX-l.left)/l.width*100,c=(o.clientY-l.top)/l.height*100;console.log(`Placed at: ${a}%, ${c}%`),i(!1)};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h3",{className:"text-xl font-semibold text-emerald-400",children:"Tale Map"}),h.jsxs("button",{onClick:()=>i(!r),className:`glass-button flex items-center gap-2 ${r?"bg-emerald-500/20 border-emerald-500/30":""}`,children:[h.jsx(Yk,{size:18}),h.jsx("span",{children:"Place Tale"})]})]}),h.jsxs("div",{className:"relative aspect-[16/9] bg-black/20 rounded-xl border border-emerald-500/20 overflow-hidden cursor-pointer",onClick:s,children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-900/40 to-purple-900/40"}),t.filter(o=>o.location).map(o=>{var l,a;return h.jsxs("button",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 group",style:{left:`${(l=o.location)==null?void 0:l.x}%`,top:`${(a=o.location)==null?void 0:a.y}%`},onClick:c=>{c.stopPropagation(),n(o)},children:[h.jsx(Df,{size:24,className:"text-emerald-400 group-hover:text-emerald-300 transition-colors"}),h.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 whitespace-nowrap bg-black/80 px-3 py-1 rounded-full text-sm opacity-0 group-hover:opacity-100 transition-opacity",children:o.title})]},o.id)}),r&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"text-emerald-400 animate-pulse",children:"Click anywhere on the map to place your tale"})})]}),e&&h.jsxs("div",{className:"bg-black/20 rounded-xl p-6 border border-emerald-500/20",children:[h.jsx("h4",{className:"text-lg font-semibold text-emerald-400 mb-2",children:e.title}),h.jsx("div",{className:"text-gray-300 prose prose-invert prose-emerald max-w-none",dangerouslySetInnerHTML:{__html:e.content}}),h.jsx("button",{onClick:()=>n(null),className:"mt-4 text-gray-400 hover:text-emerald-400 transition-colors",children:"Close Preview"})]})]})},W4=()=>{const{prompts:t}=to();return h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:t.map(e=>{const n=e.expiresAt<Date.now();return h.jsxs("div",{className:`bg-black/20 rounded-xl p-6 border border-emerald-500/20 space-y-4 ${n?"opacity-50":"hover:border-emerald-500/40"} transition-all duration-300`,children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-emerald-400",children:e.title}),h.jsxs("div",{className:"text-sm text-gray-400",children:["Theme: ",e.theme]})]}),h.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[h.jsx(Of,{size:18}),h.jsxs("span",{children:[e.points," points"]})]})]}),h.jsx("p",{className:"text-gray-300",children:e.description}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(Al,{size:16,className:"text-gray-400"}),h.jsx("span",{className:n?"text-red-400":"text-gray-400",children:n?"Expired":Cv(e.expiresAt,{addSuffix:!0})})]}),h.jsx("button",{disabled:n,className:"action-button w-full py-2 text-emerald-400 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Prompt Ended":"Write Tale"})]},e.id)})}),t.length===0&&h.jsxs("div",{className:"text-center py-12 text-gray-400",children:[h.jsx("p",{className:"text-lg",children:"No active prompts at the moment."}),h.jsx("p",{className:"text-sm",children:"Check back soon for new writing challenges!"})]})]})},U4=()=>{const[t,e]=j.useState("read"),{walletConnected:n}=Ae(),{getFeaturedStories:r}=to(),i=r();return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-semibold text-emerald-400 mb-2",children:"Trail Tales"}),h.jsx("p",{className:"text-gray-300",children:"Share and discover stories from the regenerative trail"})]}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-2",children:[h.jsxs("button",{onClick:()=>e("read"),className:`glass-button flex items-center gap-2 ${t==="read"?"bg-emerald-500/20 border-emerald-500/30":""}`,children:[h.jsx(ky,{size:18}),h.jsx("span",{children:"Read Tales"})]}),h.jsxs("button",{onClick:()=>e("write"),disabled:!n,className:`glass-button flex items-center gap-2 ${t==="write"?"bg-emerald-500/20 border-emerald-500/30":""} ${n?"":"opacity-50 cursor-not-allowed"}`,children:[h.jsx(Cy,{size:18}),h.jsx("span",{children:"Share Tale"})]}),h.jsxs("button",{onClick:()=>e("map"),className:`glass-button flex items-center gap-2 ${t==="map"?"bg-emerald-500/20 border-emerald-500/30":""}`,children:[h.jsx(Df,{size:18}),h.jsx("span",{children:"Tale Map"})]}),h.jsxs("button",{onClick:()=>e("prompts"),className:`glass-button flex items-center gap-2 ${t==="prompts"?"bg-emerald-500/20 border-emerald-500/30":""}`,children:[h.jsx(Of,{size:18}),h.jsx("span",{children:"Prompts"})]})]}),t==="read"&&h.jsx(H4,{stories:i}),t==="write"&&h.jsx(GT,{}),t==="map"&&h.jsx(V4,{}),t==="prompts"&&h.jsx(W4,{})]})},K4=({logs:t,onProposalClick:e})=>{const n=j.useRef(null),[r,i]=C.useState(!1),s=j.useRef(t.length),[o,l]=C.useState(null);return j.useEffect(()=>{if(n.current&&(n.current.scrollTop=n.current.scrollHeight),t.length>s.current){i(!0),setTimeout(()=>i(!1),1e3);const a=t[t.length-1];a.includes("KarmaGap")&&(l(a),setTimeout(()=>l(null),3e3))}s.current=t.length},[t]),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:`bg-gray-800 rounded-lg overflow-hidden border border-gray-700 transition-shadow duration-300 ${r?"shadow-lg shadow-emerald-500/20":""}`,children:[h.jsxs("div",{className:"px-4 py-2 bg-gray-900 flex items-center gap-2 border-b border-gray-700",children:[h.jsx(nb,{size:16,className:"text-emerald-400"}),h.jsx("span",{className:"text-sm text-gray-300",children:"Adventure Log"})]}),h.jsx("div",{ref:n,className:"p-4 h-48 overflow-y-auto font-mono text-sm space-y-2",children:t.map((a,c)=>h.jsxs("div",{className:"text-emerald-400",children:[h.jsx("span",{className:"text-gray-500",children:">"})," ",a]},c))})]}),h.jsxs("div",{className:"bg-gray-800/80 rounded-lg overflow-hidden border border-purple-700/30 backdrop-blur-sm",children:[h.jsxs("div",{className:"px-4 py-2 bg-purple-900/50 flex items-center gap-2 border-b border-purple-700/30",children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsx("span",{className:"text-sm text-purple-200",children:"DAO Governance"})]}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx("span",{className:"text-purple-200",children:"Active Proposals"}),h.jsx("span",{className:"text-purple-400",children:"3"})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx("span",{className:"text-purple-200",children:"Your Voting Power"}),h.jsx("span",{className:"text-purple-400",children:"1.5x"})]})]}),h.jsxs("div",{className:"border-t border-purple-700/30 pt-4",children:[h.jsx("div",{className:"text-sm text-purple-200 mb-2",children:"KarmaGap Submissions"}),o?h.jsx("div",{className:"bg-purple-500/20 p-3 rounded-lg text-sm text-purple-200 animate-pulse",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Tf,{size:16,className:"text-purple-400"}),o]})}):h.jsx("div",{className:"text-sm text-purple-400/60 italic",children:"Awaiting next submission..."})]}),h.jsx("button",{onClick:e,className:"glass-button w-full border-purple-500/20 hover:bg-purple-500/20 text-purple-200",children:"View Proposals"})]})]})]})},q4=()=>{const t=Ae(n=>n.points),e=[{name:"earth",icon:Pr,value:t.earth,color:"emerald",bgColor:"from-emerald-500/20 to-emerald-600/20"},{name:"space",icon:Xk,value:t.space,color:"blue",bgColor:"from-blue-500/20 to-blue-600/20"},{name:"hand",icon:nd,value:t.hand,color:"purple",bgColor:"from-purple-500/20 to-purple-600/20"},{name:"carbon",icon:Ny,value:t.carbon,color:"green",bgColor:"from-green-500/20 to-green-600/20"}];return h.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.map(({name:n,icon:r,value:i,color:s,bgColor:o})=>h.jsxs("div",{className:`p-4 rounded-xl bg-gradient-to-br ${o} border border-${s}-400/30 backdrop-blur-sm relative overflow-hidden group`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(r,{className:`text-${s}-400`,size:20}),h.jsx("span",{className:"font-medium capitalize text-gray-100",children:n})]}),h.jsx("div",{className:`text-2xl font-bold text-${s}-400 mt-1 transition-transform group-hover:scale-110`,children:i}),h.jsx("div",{className:"points-particles absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100"})]},n))})},J4=()=>{const{handBalance:t,donateHand:e,addHand:n}=Ae(),r=()=>{const s=Math.min(50,t.balance);s>0?(e(s),J.success(`Lent ${s} !`,{description:`Thank you for supporting the regenerative economy! You earned ${Math.floor(s/10)} impact points.`})):J.error("Not enough HAND tokens!")},i=()=>{n(1),J.success("+1 ",{description:"Keep contributing to earn more HAND tokens!"})};return h.jsxs("div",{className:"text-center",children:[h.jsx(Wk,{size:48,className:"mx-auto text-emerald-400 cursor-pointer hover:text-emerald-500 transition-transform hover:scale-110 animate-pulse",onClick:i}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:[t.balance," "]}),h.jsxs("div",{className:"text-sm text-gray-400",children:["Lent: ",t.donated," "]}),h.jsx("button",{onClick:r,className:"action-button mt-2 px-6 py-2 text-emerald-400 font-medium group",children:h.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:["Lend a Hand",h.jsx("span",{className:"text-xl group-hover:animate-bounce",children:""})]})})]})]})},G4=()=>{const{connectWallet:t,walletConnected:e,walletAddress:n}=Ae();return h.jsxs("button",{onClick:t,className:`action-button px-6 py-2 flex items-center gap-2 group ${e?"bg-emerald-600/20 border-emerald-500/30":""}`,children:[h.jsx(Rf,{size:18,className:`${e?"text-emerald-400":""} group-hover:rotate-12 transition-transform`}),e?h.jsx("span",{className:"text-emerald-400",children:"Connected"}):h.jsx("span",{children:"Connect Wallet"})]})},Y4=()=>{const[t,e]=j.useState([]),n=()=>{const r={id:Math.random(),x:Math.random()*window.innerWidth,y:window.innerHeight,size:Math.random()*20+10,speed:Math.random()*2+1,opacity:1};e(i=>[...i,r])};return j.useEffect(()=>{const r=i=>{const{amount:s}=i.detail,o=Math.min(50,s);for(let l=0;l<o;l++)setTimeout(()=>{n()},l*50)};return window.addEventListener("donation",r),()=>window.removeEventListener("donation",r)},[]),j.useEffect(()=>{const r=requestAnimationFrame(()=>{e(i=>i.map(s=>({...s,y:s.y-s.speed,opacity:s.opacity-.01})).filter(s=>s.opacity>0))});return()=>cancelAnimationFrame(r)},[t]),h.jsx("div",{className:"fixed inset-0 pointer-events-none",children:t.map(r=>h.jsx("div",{className:"absolute rounded-full bg-emerald-400",style:{left:r.x,top:r.y,width:r.size,height:r.size,opacity:r.opacity,transform:`scale(${r.opacity})`,transition:"transform 0.3s ease-out"}},r.id))})},Q4=({onStart:t})=>{const[e,n]=j.useState(!1);return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 to-purple-900 flex items-center justify-center p-4 relative overflow-hidden",children:[h.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[h.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-500/20 rounded-full blur-3xl animate-pulse"}),h.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-1000"})]}),h.jsx("div",{className:"max-w-2xl text-center space-y-8 relative",children:e?h.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[h.jsxs("div",{className:"flex justify-center gap-8",children:[h.jsx(Ey,{size:32,className:"text-emerald-400 animate-bounce"}),h.jsx(Pr,{size:32,className:"text-emerald-400 animate-bounce delay-100"}),h.jsx(by,{size:32,className:"text-emerald-400 animate-bounce delay-200"})]}),h.jsxs("div",{className:"space-y-6 text-left bg-black/20 p-8 rounded-xl border border-emerald-500/20",children:[h.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Welcome to the Regen Traila journey through the regenerative web3 ecosystem. Here, your actions ripple through digital forests, impact real communities, and shape the future of our planet."}),h.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"From ETHDenver's snow-capped peaks to the vibrant halls of ETHcc Paris, you'll explore a world where technology meets ecology. Fund impactful projects, grow your own digital garden, and join a global community of regenerators."}),h.jsx("p",{className:"text-lg text-emerald-400 font-medium",children:"Are you ready to make your mark on the regenerative future?"})]}),h.jsx("button",{onClick:t,className:"action-button px-8 py-4 text-lg group",children:h.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-3",children:["Begin Your Journey",h.jsx(Pr,{className:"group-hover:animate-bounce"})]})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative",children:[h.jsx(Gk,{size:64,className:"text-emerald-400 mx-auto animate-pulse",style:{filter:"drop-shadow(0 0 20px rgba(16, 185, 129, 0.5))"}}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-500/20 to-transparent blur-xl"})]}),h.jsx("h1",{className:"text-5xl font-bold text-emerald-400 title-effect",children:"Ready to go full Regen?"}),h.jsx("p",{className:"text-xl text-gray-300 leading-relaxed",children:"The world stands at a crossroads. Will you take the green pill and join the regenerative revolution? "}),h.jsx("button",{onClick:()=>n(!0),className:"glass-button px-8 py-4 text-lg group hover:bg-emerald-600/20 hover:scale-110 transition-all duration-500",children:h.jsx("span",{className:"group-hover:animate-pulse",children:"Take the Green Pill"})})]})})]})},Ev=If()(Ry((t,e)=>({users:[],currentUser:null,addUser:n=>{const r={id:Math.random().toString(36).slice(2),username:n,points:{earth:0,space:0,hand:0,carbon:0},createdAt:Date.now()};return t(i=>({users:[...i.users,r],currentUser:r})),r},updateUserPoints:(n,r)=>{t(i=>{var s;return{users:i.users.map(o=>o.id===n?{...o,points:{...o.points,...Object.entries(r).reduce((l,[a,c])=>({...l,[a]:(o.points[a]||0)+(c||0)}),{})}}:o),currentUser:((s=i.currentUser)==null?void 0:s.id)===n?{...i.currentUser,points:{...i.currentUser.points,...Object.entries(r).reduce((o,[l,a])=>({...o,[l]:(i.currentUser.points[l]||0)+(a||0)}),{})}}:i.currentUser}})},getLeaderboard:()=>[...e().users].sort((r,i)=>{const s=Object.values(r.points).reduce((l,a)=>l+a,0);return Object.values(i.points).reduce((l,a)=>l+a,0)-s})}),{name:"regen-trail-storage"})),X4=()=>{const{getLeaderboard:t,currentUser:e}=Ev(),n=t(),r=j.useRef(null);return j.useEffect(()=>{if(r.current&&n.length>3){let i=0;const s=r.current.scrollHeight-r.current.clientHeight,l=setInterval(()=>{r.current&&(i=(i+1)%(s+100),r.current.scrollTop=i,i>=s&&setTimeout(()=>{r.current&&(r.current.scrollTop=0,i=0)},1e3))},50);return()=>clearInterval(l)}},[n.length]),h.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-emerald-500/20",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(rb,{className:"text-emerald-400",size:20}),h.jsx("h3",{className:"text-lg font-semibold text-emerald-400",children:"Top Regenerators"})]}),h.jsx("div",{ref:r,className:"space-y-2 max-h-[120px] overflow-hidden",children:n.map((i,s)=>{const o=Object.values(i.points).reduce((a,c)=>a+c,0),l=i.id===(e==null?void 0:e.id);return h.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg ${l?"bg-emerald-500/20":"bg-black/20"}`,children:[h.jsx("div",{className:"w-5 text-center font-bold text-emerald-400",children:s+1}),h.jsx("div",{className:"flex-1 truncate",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ib,{size:14,className:"text-emerald-400 shrink-0"}),h.jsx("span",{className:`font-medium truncate ${l?"text-emerald-400":"text-gray-300"}`,children:i.username||"Anonymous Regenerator"})]})}),h.jsx("div",{className:"text-right shrink-0",children:h.jsx("div",{className:"font-bold text-emerald-400",children:o})})]},i.id)})})]})};/*! js-cookie v3.0.5 | MIT */function Fo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Z4={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Ad(t,e){function n(i,s,o){if(!(typeof document>"u")){o=Fo({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var a in o)o[a]&&(l+="; "+a,o[a]!==!0&&(l+="="+o[a].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+l}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},l=0;l<s.length;l++){var a=s[l].split("="),c=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(o[u]=t.read(c,u),i===u)break}catch{}}return i?o[i]:o}}return Object.create({set:n,get:r,remove:function(i,s){n(i,"",Fo({},s,{expires:-1}))},withAttributes:function(i){return Ad(this.converter,Fo({},this.attributes,i))},withConverter:function(i){return Ad(Fo({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var i0=Ad(Z4,{path:"/"});const e3=({onComplete:t})=>{const[e,n]=j.useState(""),[r,i]=j.useState(!1),[s,o]=j.useState(null),{connectWallet:l,walletConnected:a,walletAddress:c}=Ae();j.useEffect(()=>{i0.get("walletConnected")==="true"&&l()},[l]);const u=()=>{l(),i0.set("walletConnected","true",{expires:30}),J.success("Wallet connected successfully!")},d=p=>{if(p.preventDefault(),!a){J.error("Please connect your wallet first!");return}s&&(r||e.trim())&&t(r?null:e.trim())},f=[{id:"guardian",name:"Forest Guardian",description:"Protect and nurture digital ecosystems",icon:Ey,color:"emerald"},{id:"innovator",name:"Eco Innovator",description:"Pioneer regenerative technologies",icon:Pr,color:"purple"},{id:"healer",name:"Earth Healer",description:"Restore balance to damaged systems",icon:Ny,color:"blue"}];return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 to-purple-900 flex items-center justify-center p-4",children:h.jsxs("div",{className:"max-w-2xl w-full",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx(Pr,{size:48,className:"text-emerald-400 mx-auto mb-4"}),h.jsx("h1",{className:"text-3xl font-bold text-emerald-400 mb-2",children:"Choose Your Path"}),h.jsx("p",{className:"text-gray-300",children:"Every regenerator has their own way of healing the world"})]}),h.jsxs("div",{className:"mb-8 text-center",children:[h.jsx("button",{onClick:u,disabled:a,className:`glass-button px-8 py-4 text-lg group transition-all duration-300 ${a?"bg-emerald-500/20 border-emerald-500/30 cursor-default":"hover:bg-emerald-500/10"}`,children:h.jsxs("span",{className:"flex items-center justify-center gap-3",children:[h.jsx(Rf,{className:`${a?"text-emerald-400":""}`}),a?"Wallet Connected":"Connect Wallet"]})}),a&&h.jsxs("p",{className:"text-sm text-emerald-400 mt-2",children:["Connected: ",c.slice(0,6),"...",c.slice(-4)]})]}),h.jsx("div",{className:`grid md:grid-cols-3 gap-4 mb-8 transition-opacity duration-300 ${a?"":"opacity-50 pointer-events-none"}`,children:f.map(p=>{const m=p.icon;return h.jsxs("button",{onClick:()=>o(p.id),className:`p-6 rounded-xl border transition-all duration-300 text-left group ${s===p.id?"bg-emerald-500/20 border-emerald-500/50 ring-2 ring-emerald-500/20":"bg-black/20 border-gray-700/30 hover:border-emerald-500/30"}`,children:[h.jsx(m,{size:32,className:`mb-4 ${s===p.id?"text-emerald-400 animate-bounce":"text-gray-400 group-hover:text-emerald-400"}`}),h.jsx("h3",{className:"font-bold text-lg text-emerald-400 mb-2",children:p.name}),h.jsx("p",{className:"text-sm text-gray-400",children:p.description})]},p.id)})}),h.jsxs("form",{onSubmit:d,className:`space-y-6 bg-black/20 p-6 rounded-xl border border-emerald-500/20 transition-opacity duration-300 ${a?"":"opacity-50 pointer-events-none"}`,children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block",children:h.jsx("input",{type:"text",placeholder:"Enter username",value:e,onChange:p=>n(p.target.value),disabled:r,className:"w-full px-4 py-2 rounded-lg bg-black/20 border border-emerald-500/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})}),h.jsxs("label",{className:"flex items-center gap-2 text-gray-300",children:[h.jsx("input",{type:"checkbox",checked:r,onChange:p=>i(p.target.checked),className:"rounded border-emerald-500/20 text-emerald-500 focus:ring-emerald-500/50"}),"Stay anonymous"]})]}),h.jsx("button",{type:"submit",disabled:!s||!r&&!e.trim(),className:"w-full action-button py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Begin Your Journey"})]})]})})},s0=[{id:"locations",label:"",fullLabel:"Locations",icon:Pf},{id:"events",label:"",fullLabel:"Events",icon:td},{id:"garden",label:"",fullLabel:"Garden",icon:Pr},{id:"store",label:"",fullLabel:"Store",icon:tb},{id:"dojo",label:"",fullLabel:"Dojo",icon:Vk},{id:"projects",label:"",fullLabel:"Projects",icon:Af},{id:"cookiejar",label:"",fullLabel:"CookieJar",icon:Xo},{id:"wallet",label:"",fullLabel:"Wallet",icon:Rf},{id:"tales",label:"",fullLabel:"Trail Tales",icon:ky}],t3=()=>{const[t,e]=j.useState("locations"),[n,r]=j.useState(!0),[i,s]=j.useState(!0),[o,l]=j.useState(!1),[a,c]=j.useState(!1),[u,d]=j.useState(!1),f=Ae(x=>x.logs),{addUser:p}=Ev();j.useEffect(()=>{const x=()=>{d(window.scrollY>100)};return window.addEventListener("scroll",x),()=>window.removeEventListener("scroll",x)},[]),j.useEffect(()=>(o||a?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[o,a]);const m=async x=>{if(!document.startViewTransition){e(x),l(!1);return}await document.startViewTransition(()=>{e(x),l(!1)}).finished},v=x=>{p(x),s(!1)};return n?h.jsx(Q4,{onStart:()=>r(!1)}):i?h.jsx(e3,{onComplete:v}):h.jsxs("div",{className:"min-h-screen bg-gradient-to-r from-emerald-950 via-emerald-900 to-purple-900 text-white",children:[h.jsx(Rk,{position:"top-right",closeButton:!0,theme:"dark",toastOptions:{style:{background:"rgba(0, 0, 0, 0.8)",color:"#fff",border:"1px solid rgba(74, 222, 128, 0.2)"}}}),h.jsx(Y4,{}),h.jsx("div",{className:"sticky top-0 z-20 bg-gray-900/95 backdrop-blur-sm border-b border-emerald-500/20 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-emerald-400",children:"Regen Trail"}),h.jsx("p",{className:"text-xs text-gray-400 italic",children:"A HAND Experience"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(G4,{}),h.jsx("button",{onClick:()=>l(!o),className:"md:hidden p-2 hover:bg-emerald-500/10 rounded-lg transition-colors",children:o?h.jsx(My,{className:"text-emerald-400",size:24}):h.jsx(Jk,{className:"text-emerald-400",size:24})})]})]})}),h.jsx("div",{className:`sticky top-[73px] z-10 transition-all duration-300 ${u?"bg-gray-900/95 backdrop-blur-sm border-b border-emerald-500/20":"bg-transparent"}`,children:h.jsx("div",{className:"flex justify-center gap-2 p-2",children:s0.map(x=>h.jsxs("button",{onClick:()=>m(x.id),className:`p-2 rounded-lg transition-all duration-300 relative group ${t===x.id?"bg-emerald-500/20 scale-110":"hover:bg-emerald-500/10"}`,title:x.fullLabel,children:[h.jsx("span",{className:"text-2xl",children:x.label}),h.jsx("span",{className:`absolute -bottom-4 left-1/2 transform -translate-x-1/2 text-xs text-emerald-400 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 ${u?"hidden":""}`,children:x.fullLabel})]},x.id))})}),h.jsx("div",{className:"p-4",children:h.jsx("div",{className:"max-w-6xl mx-auto space-y-8",children:h.jsxs("div",{className:"grid md:grid-cols-[1fr,300px] gap-8",children:[h.jsxs("div",{className:"space-y-8",style:{viewTransitionName:"tab-content"},children:[t==="locations"&&h.jsx(zb,{}),t==="events"&&h.jsx(Jb,{}),t==="garden"&&h.jsx(Vb,{}),t==="store"&&h.jsx($b,{}),t==="dojo"&&h.jsx(Wb,{}),t==="projects"&&h.jsx(qb,{}),t==="cookiejar"&&h.jsx(Gb,{}),t==="wallet"&&h.jsx(Kb,{}),t==="tales"&&h.jsx(U4,{})]}),h.jsxs("div",{className:"space-y-8 fade-background",children:[h.jsx(q4,{}),h.jsx(J4,{}),h.jsx(K4,{logs:f,onProposalClick:()=>c(!0)}),h.jsx(X4,{})]})]})})}),h.jsx("div",{className:"fixed bottom-4 right-4 text-xs text-gray-500 italic",children:"Disclaimer: This is meant to be educational and fun. Have you taken the green pill? "}),(o||a)&&h.jsx("div",{className:"modal-backdrop",onClick:()=>{l(!1),c(!1)}}),h.jsx("div",{className:`mobile-menu ${o?"translate-x-0":"translate-x-full"}`,children:h.jsx("div",{className:"p-4 space-y-2",children:s0.map(x=>{const y=x.icon;return h.jsxs("button",{onClick:()=>m(x.id),className:`w-full flex items-center gap-3 p-4 rounded-lg transition-all duration-300 ${t===x.id?"bg-emerald-500/20 text-emerald-400":"hover:bg-emerald-500/10 text-gray-300"}`,children:[h.jsx(y,{size:20}),h.jsx("span",{children:x.fullLabel})]},x.id)})})}),a&&h.jsx("div",{className:"modal-content",children:h.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",onClick:x=>x.stopPropagation(),children:[h.jsx("h3",{className:"text-xl font-semibold text-emerald-400 mb-4",children:"Active Proposal"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[h.jsx("h4",{className:"font-medium text-emerald-300 mb-2",children:"Clean Streets & Grow Food"}),h.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"Proposal to clean up local streets and establish community gardens for organic food production."}),h.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[h.jsx("span",{children:"Support: 89%"}),h.jsx("span",{children:"Quorum: Yes"})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"glass-button flex-1 hover:bg-emerald-500/20",onClick:()=>c(!1),children:"Vote For"}),h.jsx("button",{className:"glass-button flex-1 hover:bg-red-500/20",onClick:()=>c(!1),children:"Vote Against"})]})]}),h.jsx("div",{className:"mt-4 text-center",children:h.jsx("button",{className:"text-gray-400 text-sm hover:text-gray-300",onClick:()=>c(!1),children:"Close"})})]})})]})};wy(document.getElementById("root")).render(h.jsx(j.StrictMode,{children:h.jsx(t3,{})}));
